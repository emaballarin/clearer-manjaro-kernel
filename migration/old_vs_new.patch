diff --git a/.gitignore b/.gitignore
deleted file mode 100644
index 95fa1bb..0000000
--- a/.gitignore
+++ /dev/null
@@ -1,2 +0,0 @@
-*tar.xz
-src/*
diff --git a/0014-drm-amdgpu-add-dc-feature-mask-to-disable-fractional-pwm.patch b/0001-drm-amdgpu-Add-DC-feature-mask-to-disable-fractional-pwm.patch
similarity index 53%
rename from 0014-drm-amdgpu-add-dc-feature-mask-to-disable-fractional-pwm.patch
rename to 0001-drm-amdgpu-Add-DC-feature-mask-to-disable-fractional-pwm.patch
index b586b98..ff8c54c 100644
--- a/0014-drm-amdgpu-add-dc-feature-mask-to-disable-fractional-pwm.patch
+++ b/0001-drm-amdgpu-Add-DC-feature-mask-to-disable-fractional-pwm.patch
@@ -1,43 +1,8 @@
-From f247d4a6fe42acc60b775457e3c35b8289532590 Mon Sep 17 00:00:00 2001
-From: Leo Li <sunpeng.li@amd.com>
-Date: Mon, 21 Oct 2019 14:58:47 -0400
-Subject: drm/amdgpu: Add DC feature mask to disable fractional pwm
-MIME-Version: 1.0
-Content-Type: text/plain; charset=UTF-8
-Content-Transfer-Encoding: 8bit
-
-[Why]
-
-Some LED panel drivers might not like fractional PWM. In such cases,
-backlight flickering may be observed.
-
-[How]
-
-Add a DC feature mask to disable fractional PWM, and associate it with
-the preexisting dc_config flag.
-
-The flag is only plumbed through the dmcu firmware, so plumb it through
-the driver path as well.
-
-To disable, add the following to the linux cmdline:
-amdgpu.dcfeaturemask=0x4
-
-Bugzilla: https://bugzilla.kernel.org/show_bug.cgi?id=204957
-Signed-off-by: Leo Li <sunpeng.li@amd.com>
-Reviewed-by: Anthony Koo <anthony.koo@amd.com>
-Tested-by: Lukáš Krejčí <lskrejci@gmail.com>
-Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
----
- drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c | 3 +++
- drivers/gpu/drm/amd/display/dc/dce/dce_abm.c      | 4 ++++
- drivers/gpu/drm/amd/include/amd_shared.h          | 1 +
- 3 files changed, 8 insertions(+)
-
 diff --git a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
-index 4e9c15c409ba..25b72eb76add 100644
+index 1cf4beb76835..73f917d4d1e1 100644
 --- a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
 +++ b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
-@@ -697,6 +697,9 @@ static int amdgpu_dm_init(struct amdgpu_device *adev)
+@@ -728,6 +728,9 @@ static int amdgpu_dm_init(struct amdgpu_device *adev)
  	if (amdgpu_dc_feature_mask & DC_MULTI_MON_PP_MCLK_SWITCH_MASK)
  		init_data.flags.multi_mon_pp_mclk_switch = true;
  
@@ -48,7 +13,7 @@ index 4e9c15c409ba..25b72eb76add 100644
  
  #ifdef CONFIG_DRM_AMD_DC_DCN2_0
 diff --git a/drivers/gpu/drm/amd/display/dc/dce/dce_abm.c b/drivers/gpu/drm/amd/display/dc/dce/dce_abm.c
-index 7700a855d77c..698b84acc44f 100644
+index d759fdca7fdb..b8a3fc505c9b 100644
 --- a/drivers/gpu/drm/amd/display/dc/dce/dce_abm.c
 +++ b/drivers/gpu/drm/amd/display/dc/dce/dce_abm.c
 @@ -404,6 +404,10 @@ static bool dce_abm_init_backlight(struct abm *abm)
@@ -70,10 +35,9 @@ index 8889aaceec60..5450ed762b7a 100644
  enum DC_FEATURE_MASK {
  	DC_FBC_MASK = 0x1,
  	DC_MULTI_MON_PP_MCLK_SWITCH_MASK = 0x2,
-+	DC_DISABLE_FRACTIONAL_PWM_MASK = 0x4,
++        DC_DISABLE_FRACTIONAL_PWM_MASK = 0x4,
  };
  
  enum amd_dpm_forced_level;
--- 
-cgit v1.2.1-1-g437b
-
+--
+2.23.0
diff --git a/0006-iwlwifi-pcie-restore-support-for-Killer-Qu-C0-NICs.patch b/0002-iwlwifi-pcie-restore-support-for-Killer-Qu-C0-NICs.patch
similarity index 100%
rename from 0006-iwlwifi-pcie-restore-support-for-Killer-Qu-C0-NICs.patch
rename to 0002-iwlwifi-pcie-restore-support-for-Killer-Qu-C0-NICs.patch
diff --git a/0002-lib-devres-add-a-helper-function-for-ioremap_uc.patch b/0002-lib-devres-add-a-helper-function-for-ioremap_uc.patch
deleted file mode 100644
index e670f21..0000000
--- a/0002-lib-devres-add-a-helper-function-for-ioremap_uc.patch
+++ /dev/null
@@ -1,79 +0,0 @@
-From d56ae3b8201b4634648de6a0df959d936c9fc0e6 Mon Sep 17 00:00:00 2001
-From: Tuowen Zhao <ztuowen@gmail.com>
-Date: Wed, 16 Oct 2019 15:06:28 -0600
-Subject: lib: devres: add a helper function for ioremap_uc
-
-Implement a resource managed strongly uncachable ioremap function.
-
-Cc: <stable@vger.kernel.org> # v4.19+
-Tested-by: AceLan Kao <acelan.kao@canonical.com>
-Signed-off-by: Tuowen Zhao <ztuowen@gmail.com>
-Acked-by: Mika Westerberg <mika.westerberg@linux.intel.com>
-Acked-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
-Acked-by: Luis Chamberlain <mcgrof@kernel.org>
-Signed-off-by: Lee Jones <lee.jones@linaro.org>
----
- include/linux/io.h |  2 ++
- lib/devres.c       | 19 +++++++++++++++++++
- 2 files changed, 21 insertions(+)
-
-diff --git a/include/linux/io.h b/include/linux/io.h
-index accac822336a..a59834bc0a11 100644
---- a/include/linux/io.h
-+++ b/include/linux/io.h
-@@ -64,6 +64,8 @@ static inline void devm_ioport_unmap(struct device *dev, void __iomem *addr)
- 
- void __iomem *devm_ioremap(struct device *dev, resource_size_t offset,
- 			   resource_size_t size);
-+void __iomem *devm_ioremap_uc(struct device *dev, resource_size_t offset,
-+				   resource_size_t size);
- void __iomem *devm_ioremap_nocache(struct device *dev, resource_size_t offset,
- 				   resource_size_t size);
- void __iomem *devm_ioremap_wc(struct device *dev, resource_size_t offset,
-diff --git a/lib/devres.c b/lib/devres.c
-index 6a0e9bd6524a..17624d35e82d 100644
---- a/lib/devres.c
-+++ b/lib/devres.c
-@@ -9,6 +9,7 @@
- enum devm_ioremap_type {
- 	DEVM_IOREMAP = 0,
- 	DEVM_IOREMAP_NC,
-+	DEVM_IOREMAP_UC,
- 	DEVM_IOREMAP_WC,
- };
- 
-@@ -39,6 +40,9 @@ static void __iomem *__devm_ioremap(struct device *dev, resource_size_t offset,
- 	case DEVM_IOREMAP_NC:
- 		addr = ioremap_nocache(offset, size);
- 		break;
-+	case DEVM_IOREMAP_UC:
-+		addr = ioremap_uc(offset, size);
-+		break;
- 	case DEVM_IOREMAP_WC:
- 		addr = ioremap_wc(offset, size);
- 		break;
-@@ -68,6 +72,21 @@ void __iomem *devm_ioremap(struct device *dev, resource_size_t offset,
- }
- EXPORT_SYMBOL(devm_ioremap);
- 
-+/**
-+ * devm_ioremap_uc - Managed ioremap_uc()
-+ * @dev: Generic device to remap IO address for
-+ * @offset: Resource address to map
-+ * @size: Size of map
-+ *
-+ * Managed ioremap_uc().  Map is automatically unmapped on driver detach.
-+ */
-+void __iomem *devm_ioremap_uc(struct device *dev, resource_size_t offset,
-+			      resource_size_t size)
-+{
-+	return __devm_ioremap(dev, offset, size, DEVM_IOREMAP_UC);
-+}
-+EXPORT_SYMBOL_GPL(devm_ioremap_uc);
-+
- /**
-  * devm_ioremap_nocache - Managed ioremap_nocache()
-  * @dev: Generic device to remap IO address for
--- 
-cgit v1.2.1-1-g437b
-
diff --git a/0003-mfd-intel-lpss-use-devm_ioremap_uc-for-MMIO.patch b/0003-mfd-intel-lpss-use-devm_ioremap_uc-for-MMIO.patch
deleted file mode 100644
index 2d6f139..0000000
--- a/0003-mfd-intel-lpss-use-devm_ioremap_uc-for-MMIO.patch
+++ /dev/null
@@ -1,48 +0,0 @@
-From 328396ba88d7080612a52f5e0d9f848e40ab57f3 Mon Sep 17 00:00:00 2001
-From: Tuowen Zhao <ztuowen@gmail.com>
-Date: Wed, 16 Oct 2019 15:06:29 -0600
-Subject: mfd: intel-lpss: Use devm_ioremap_uc for MMIO
-
-Some BIOS erroneously specifies write-combining BAR for intel-lpss-pci
-in MTRR. This will cause the system to hang during boot. If possible,
-this bug could be corrected with a firmware update.
-
-This patch use devm_ioremap_uc to overwrite/ignore the MTRR settings
-by forcing the use of strongly uncachable pages for intel-lpss.
-
-The BIOS bug is present on Dell XPS 13 7390 2-in-1:
-
-[    0.001734]   5 base 4000000000 mask 6000000000 write-combining
-
-4000000000-7fffffffff : PCI Bus 0000:00
-  4000000000-400fffffff : 0000:00:02.0 (i915)
-  4010000000-4010000fff : 0000:00:15.0 (intel-lpss-pci)
-
-Link: https://bugzilla.kernel.org/show_bug.cgi?id=203485
-Cc: <stable@vger.kernel.org> # v4.19+
-Tested-by: AceLan Kao <acelan.kao@canonical.com>
-Signed-off-by: Tuowen Zhao <ztuowen@gmail.com>
-Acked-by: Mika Westerberg <mika.westerberg@linux.intel.com>
-Acked-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
-Tested-by: Roman Gilg <subdiff@gmail.com>
-Signed-off-by: Lee Jones <lee.jones@linaro.org>
----
- drivers/mfd/intel-lpss.c | 2 +-
- 1 file changed, 1 insertion(+), 1 deletion(-)
-
-diff --git a/drivers/mfd/intel-lpss.c b/drivers/mfd/intel-lpss.c
-index bfe4ff337581..b0f0781a6b9c 100644
---- a/drivers/mfd/intel-lpss.c
-+++ b/drivers/mfd/intel-lpss.c
-@@ -384,7 +384,7 @@ int intel_lpss_probe(struct device *dev,
- 	if (!lpss)
- 		return -ENOMEM;
- 
--	lpss->priv = devm_ioremap(dev, info->mem->start + LPSS_PRIV_OFFSET,
-+	lpss->priv = devm_ioremap_uc(dev, info->mem->start + LPSS_PRIV_OFFSET,
- 				  LPSS_PRIV_SIZE);
- 	if (!lpss->priv)
- 		return -ENOMEM;
--- 
-cgit v1.2.1-1-g437b
-
diff --git a/0004-PCI-pciehp-prevent-deadlock-on-disconnect.patch b/0004-PCI-pciehp-prevent-deadlock-on-disconnect.patch
deleted file mode 100644
index 4245c53..0000000
--- a/0004-PCI-pciehp-prevent-deadlock-on-disconnect.patch
+++ /dev/null
@@ -1,272 +0,0 @@
-From afad84fc6acaed69089d70da12594a6c3f68841f Mon Sep 17 00:00:00 2001
-From: Mika Westerberg <mika.westerberg@linux.intel.com>
-Date: Tue, 29 Oct 2019 20:00:22 +0300
-Subject: PCI: pciehp: Prevent deadlock on disconnect
-
-This addresses deadlocks in these common cases in hierarchies containing
-two switches:
-
-  - All involved ports are runtime suspended and they are unplugged. This
-    can happen easily if the drivers involved automatically enable runtime
-    PM (xHCI for example does that).
-
-  - System is suspended (e.g., closing the lid on a laptop) with a dock +
-    something else connected, and the dock is unplugged while suspended.
-
-These cases lead to the following deadlock:
-
-  INFO: task irq/126-pciehp:198 blocked for more than 120 seconds.
-  irq/126-pciehp  D    0   198      2 0x80000000
-  Call Trace:
-   schedule+0x2c/0x80
-   schedule_timeout+0x246/0x350
-   wait_for_completion+0xb7/0x140
-   kthread_stop+0x49/0x110
-   free_irq+0x32/0x70
-   pcie_shutdown_notification+0x2f/0x50
-   pciehp_remove+0x27/0x50
-   pcie_port_remove_service+0x36/0x50
-   device_release_driver+0x12/0x20
-   bus_remove_device+0xec/0x160
-   device_del+0x13b/0x350
-   device_unregister+0x1a/0x60
-   remove_iter+0x1e/0x30
-   device_for_each_child+0x56/0x90
-   pcie_port_device_remove+0x22/0x40
-   pcie_portdrv_remove+0x20/0x60
-   pci_device_remove+0x3e/0xc0
-   device_release_driver_internal+0x18c/0x250
-   device_release_driver+0x12/0x20
-   pci_stop_bus_device+0x6f/0x90
-   pci_stop_bus_device+0x31/0x90
-   pci_stop_and_remove_bus_device+0x12/0x20
-   pciehp_unconfigure_device+0x88/0x140
-   pciehp_disable_slot+0x6a/0x110
-   pciehp_handle_presence_or_link_change+0x263/0x400
-   pciehp_ist+0x1c9/0x1d0
-   irq_thread_fn+0x24/0x60
-   irq_thread+0xeb/0x190
-   kthread+0x120/0x140
-
-  INFO: task irq/190-pciehp:2288 blocked for more than 120 seconds.
-  irq/190-pciehp  D    0  2288      2 0x80000000
-  Call Trace:
-   __schedule+0x2a2/0x880
-   schedule+0x2c/0x80
-   schedule_preempt_disabled+0xe/0x10
-   mutex_lock+0x2c/0x30
-   pci_lock_rescan_remove+0x15/0x20
-   pciehp_unconfigure_device+0x4d/0x140
-   pciehp_disable_slot+0x6a/0x110
-   pciehp_handle_presence_or_link_change+0x263/0x400
-   pciehp_ist+0x1c9/0x1d0
-   irq_thread_fn+0x24/0x60
-   irq_thread+0xeb/0x190
-   kthread+0x120/0x140
-
-What happens here is that the whole hierarchy is runtime resumed and the
-parent PCIe downstream port, which got the hot-remove event, starts
-removing devices below it, taking pci_lock_rescan_remove() lock. When the
-child PCIe port is runtime resumed it calls pciehp_check_presence() which
-ends up calling pciehp_card_present() and pciehp_check_link_active().  Both
-of these use pcie_capability_read_word(), which notices that the underlying
-device is already gone and returns PCIBIOS_DEVICE_NOT_FOUND with the
-capability value set to 0. When pciehp gets this value it thinks that its
-child device is also hot-removed and schedules its IRQ thread to handle the
-event.
-
-The deadlock happens when the child's IRQ thread runs and tries to acquire
-pci_lock_rescan_remove() which is already taken by the parent and the
-parent waits for the child's IRQ thread to finish.
-
-Prevent this from happening by checking the return value of
-pcie_capability_read_word() and if it is PCIBIOS_DEVICE_NOT_FOUND stop
-performing any hot-removal activities.
-
-[bhelgaas: add common scenarios to commit log]
-Link: https://lore.kernel.org/r/20191029170022.57528-2-mika.westerberg@linux.intel.com
-Tested-by: Kai-Heng Feng <kai.heng.feng@canonical.com>
-Signed-off-by: Mika Westerberg <mika.westerberg@linux.intel.com>
-Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
----
- drivers/pci/hotplug/pciehp.h      |  6 ++--
- drivers/pci/hotplug/pciehp_core.c | 11 ++++++--
- drivers/pci/hotplug/pciehp_ctrl.c |  4 +--
- drivers/pci/hotplug/pciehp_hpc.c  | 59 +++++++++++++++++++++++++++++++--------
- 4 files changed, 61 insertions(+), 19 deletions(-)
-
-diff --git a/drivers/pci/hotplug/pciehp.h b/drivers/pci/hotplug/pciehp.h
-index 654c972b8ea0..afea59a3aad2 100644
---- a/drivers/pci/hotplug/pciehp.h
-+++ b/drivers/pci/hotplug/pciehp.h
-@@ -172,10 +172,10 @@ void pciehp_set_indicators(struct controller *ctrl, int pwr, int attn);
- 
- void pciehp_get_latch_status(struct controller *ctrl, u8 *status);
- int pciehp_query_power_fault(struct controller *ctrl);
--bool pciehp_card_present(struct controller *ctrl);
--bool pciehp_card_present_or_link_active(struct controller *ctrl);
-+int pciehp_card_present(struct controller *ctrl);
-+int pciehp_card_present_or_link_active(struct controller *ctrl);
- int pciehp_check_link_status(struct controller *ctrl);
--bool pciehp_check_link_active(struct controller *ctrl);
-+int pciehp_check_link_active(struct controller *ctrl);
- void pciehp_release_ctrl(struct controller *ctrl);
- 
- int pciehp_sysfs_enable_slot(struct hotplug_slot *hotplug_slot);
-diff --git a/drivers/pci/hotplug/pciehp_core.c b/drivers/pci/hotplug/pciehp_core.c
-index 56daad828c9e..312cc45c44c7 100644
---- a/drivers/pci/hotplug/pciehp_core.c
-+++ b/drivers/pci/hotplug/pciehp_core.c
-@@ -139,10 +139,15 @@ static int get_adapter_status(struct hotplug_slot *hotplug_slot, u8 *value)
- {
- 	struct controller *ctrl = to_ctrl(hotplug_slot);
- 	struct pci_dev *pdev = ctrl->pcie->port;
-+	int ret;
- 
- 	pci_config_pm_runtime_get(pdev);
--	*value = pciehp_card_present_or_link_active(ctrl);
-+	ret = pciehp_card_present_or_link_active(ctrl);
- 	pci_config_pm_runtime_put(pdev);
-+	if (ret < 0)
-+		return ret;
-+
-+	*value = ret;
- 	return 0;
- }
- 
-@@ -158,13 +163,13 @@ static int get_adapter_status(struct hotplug_slot *hotplug_slot, u8 *value)
-  */
- static void pciehp_check_presence(struct controller *ctrl)
- {
--	bool occupied;
-+	int occupied;
- 
- 	down_read(&ctrl->reset_lock);
- 	mutex_lock(&ctrl->state_lock);
- 
- 	occupied = pciehp_card_present_or_link_active(ctrl);
--	if ((occupied && (ctrl->state == OFF_STATE ||
-+	if ((occupied > 0 && (ctrl->state == OFF_STATE ||
- 			  ctrl->state == BLINKINGON_STATE)) ||
- 	    (!occupied && (ctrl->state == ON_STATE ||
- 			   ctrl->state == BLINKINGOFF_STATE)))
-diff --git a/drivers/pci/hotplug/pciehp_ctrl.c b/drivers/pci/hotplug/pciehp_ctrl.c
-index 21af7b16d7a4..c760a13ec7b1 100644
---- a/drivers/pci/hotplug/pciehp_ctrl.c
-+++ b/drivers/pci/hotplug/pciehp_ctrl.c
-@@ -226,7 +226,7 @@ void pciehp_handle_disable_request(struct controller *ctrl)
- 
- void pciehp_handle_presence_or_link_change(struct controller *ctrl, u32 events)
- {
--	bool present, link_active;
-+	int present, link_active;
- 
- 	/*
- 	 * If the slot is on and presence or link has changed, turn it off.
-@@ -257,7 +257,7 @@ void pciehp_handle_presence_or_link_change(struct controller *ctrl, u32 events)
- 	mutex_lock(&ctrl->state_lock);
- 	present = pciehp_card_present(ctrl);
- 	link_active = pciehp_check_link_active(ctrl);
--	if (!present && !link_active) {
-+	if (present <= 0 && link_active <= 0) {
- 		mutex_unlock(&ctrl->state_lock);
- 		return;
- 	}
-diff --git a/drivers/pci/hotplug/pciehp_hpc.c b/drivers/pci/hotplug/pciehp_hpc.c
-index 1a522c1c4177..526a8f70bac5 100644
---- a/drivers/pci/hotplug/pciehp_hpc.c
-+++ b/drivers/pci/hotplug/pciehp_hpc.c
-@@ -201,17 +201,29 @@ static void pcie_write_cmd_nowait(struct controller *ctrl, u16 cmd, u16 mask)
- 	pcie_do_write_cmd(ctrl, cmd, mask, false);
- }
- 
--bool pciehp_check_link_active(struct controller *ctrl)
-+/**
-+ * pciehp_check_link_active() - Is the link active
-+ * @ctrl: PCIe hotplug controller
-+ *
-+ * Check whether the downstream link is currently active. Note it is
-+ * possible that the card is removed immediately after this so the
-+ * caller may need to take it into account.
-+ *
-+ * If the hotplug controller itself is not available anymore returns
-+ * %-ENODEV.
-+ */
-+int pciehp_check_link_active(struct controller *ctrl)
- {
- 	struct pci_dev *pdev = ctrl_dev(ctrl);
- 	u16 lnk_status;
--	bool ret;
-+	int ret;
- 
--	pcie_capability_read_word(pdev, PCI_EXP_LNKSTA, &lnk_status);
--	ret = !!(lnk_status & PCI_EXP_LNKSTA_DLLLA);
-+	ret = pcie_capability_read_word(pdev, PCI_EXP_LNKSTA, &lnk_status);
-+	if (ret == PCIBIOS_DEVICE_NOT_FOUND || lnk_status == (u16)~0)
-+		return -ENODEV;
- 
--	if (ret)
--		ctrl_dbg(ctrl, "%s: lnk_status = %x\n", __func__, lnk_status);
-+	ret = !!(lnk_status & PCI_EXP_LNKSTA_DLLLA);
-+	ctrl_dbg(ctrl, "%s: lnk_status = %x\n", __func__, lnk_status);
- 
- 	return ret;
- }
-@@ -373,13 +385,29 @@ void pciehp_get_latch_status(struct controller *ctrl, u8 *status)
- 	*status = !!(slot_status & PCI_EXP_SLTSTA_MRLSS);
- }
- 
--bool pciehp_card_present(struct controller *ctrl)
-+/**
-+ * pciehp_card_present() - Is the card present
-+ * @ctrl: PCIe hotplug controller
-+ *
-+ * Function checks whether the card is currently present in the slot and
-+ * in that case returns true. Note it is possible that the card is
-+ * removed immediately after the check so the caller may need to take
-+ * this into account.
-+ *
-+ * It the hotplug controller itself is not available anymore returns
-+ * %-ENODEV.
-+ */
-+int pciehp_card_present(struct controller *ctrl)
- {
- 	struct pci_dev *pdev = ctrl_dev(ctrl);
- 	u16 slot_status;
-+	int ret;
- 
--	pcie_capability_read_word(pdev, PCI_EXP_SLTSTA, &slot_status);
--	return slot_status & PCI_EXP_SLTSTA_PDS;
-+	ret = pcie_capability_read_word(pdev, PCI_EXP_SLTSTA, &slot_status);
-+	if (ret == PCIBIOS_DEVICE_NOT_FOUND || slot_status == (u16)~0)
-+		return -ENODEV;
-+
-+	return !!(slot_status & PCI_EXP_SLTSTA_PDS);
- }
- 
- /**
-@@ -390,10 +418,19 @@ bool pciehp_card_present(struct controller *ctrl)
-  * Presence Detect State bit, this helper also returns true if the Link Active
-  * bit is set.  This is a concession to broken hotplug ports which hardwire
-  * Presence Detect State to zero, such as Wilocity's [1ae9:0200].
-+ *
-+ * Returns: %1 if the slot is occupied and %0 if it is not. If the hotplug
-+ *	    port is not present anymore returns %-ENODEV.
-  */
--bool pciehp_card_present_or_link_active(struct controller *ctrl)
-+int pciehp_card_present_or_link_active(struct controller *ctrl)
- {
--	return pciehp_card_present(ctrl) || pciehp_check_link_active(ctrl);
-+	int ret;
-+
-+	ret = pciehp_card_present(ctrl);
-+	if (ret)
-+		return ret;
-+
-+	return pciehp_check_link_active(ctrl);
- }
- 
- int pciehp_query_power_fault(struct controller *ctrl)
--- 
-cgit v1.2.1-1-g437b
-
diff --git a/0005-ACPI-PM-s2idle-rework-ACPI-events-sync.patch b/0005-ACPI-PM-s2idle-rework-ACPI-events-sync.patch
deleted file mode 100644
index daefbd8..0000000
--- a/0005-ACPI-PM-s2idle-rework-ACPI-events-sync.patch
+++ /dev/null
@@ -1,78 +0,0 @@
-From 3c3e5ada50e5a54dd267deef040365b8c1c59529 Mon Sep 17 00:00:00 2001
-From: "Rafael J. Wysocki" <rafael.j.wysocki@intel.com>
-Date: Thu, 28 Nov 2019 23:50:40 +0100
-Subject: ACPI: PM: s2idle: Rework ACPI events synchronization
-
-Note that the EC GPE processing need not be synchronized in
-acpi_s2idle_wake() after invoking acpi_ec_dispatch_gpe(), because
-that function checks the GPE status and dispatches its handler if
-need be and the SCI action handler is not going to run anyway at
-that point.
-
-Moreover, it is better to drain all of the pending ACPI events
-before restoring the working-state configuration of GPEs in
-acpi_s2idle_restore(), because those events are likely to be related
-to system wakeup, in which case they will not be relevant going
-forward.
-
-Rework the code to take these observations into account.
-
-Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
----
- drivers/acpi/sleep.c | 26 +++++++++++++++++++-------
- 1 file changed, 19 insertions(+), 7 deletions(-)
-
-diff --git a/drivers/acpi/sleep.c b/drivers/acpi/sleep.c
-index 2af937a8b1c5..6747a279621b 100644
---- a/drivers/acpi/sleep.c
-+++ b/drivers/acpi/sleep.c
-@@ -977,6 +977,16 @@ static int acpi_s2idle_prepare_late(void)
- 	return 0;
- }
- 
-+static void acpi_s2idle_sync(void)
-+{
-+	/*
-+	 * The EC driver uses the system workqueue and an additional special
-+	 * one, so those need to be flushed too.
-+	 */
-+	acpi_ec_flush_work();
-+	acpi_os_wait_events_complete(); /* synchronize Notify handling */
-+}
-+
- static void acpi_s2idle_wake(void)
- {
- 	/*
-@@ -1001,13 +1011,8 @@ static void acpi_s2idle_wake(void)
- 		 * should be missed by canceling the wakeup here.
- 		 */
- 		pm_system_cancel_wakeup();
--		/*
--		 * The EC driver uses the system workqueue and an additional
--		 * special one, so those need to be flushed too.
--		 */
--		acpi_os_wait_events_complete(); /* synchronize EC GPE processing */
--		acpi_ec_flush_work();
--		acpi_os_wait_events_complete(); /* synchronize Notify handling */
-+
-+		acpi_s2idle_sync();
- 
- 		rearm_wake_irq(acpi_sci_irq);
- 	}
-@@ -1024,6 +1029,13 @@ static void acpi_s2idle_restore_early(void)
- 
- static void acpi_s2idle_restore(void)
- {
-+	/*
-+	 * Drain pending events before restoring the working-state configuration
-+	 * of GPEs.
-+	 */
-+	acpi_os_wait_events_complete(); /* synchronize GPE processing */
-+	acpi_s2idle_sync();
-+
- 	s2idle_wakeup = false;
- 
- 	acpi_enable_all_runtime_gpes();
--- 
-cgit v1.2.1-1-g437b
-
diff --git a/0006-ALSA-hda-fix-regression-by-strip-mask-fix.patch b/0006-ALSA-hda-fix-regression-by-strip-mask-fix.patch
deleted file mode 100644
index 07b11cc..0000000
--- a/0006-ALSA-hda-fix-regression-by-strip-mask-fix.patch
+++ /dev/null
@@ -1,60 +0,0 @@
-From 04fe3cc1f00622bf3ff356dca7f122768a14bdbc Mon Sep 17 00:00:00 2001
-From: Takashi Iwai <tiwai@suse.de>
-Date: Sat, 14 Dec 2019 18:52:17 +0100
-Subject: ALSA: hda: Fix regression by strip mask fix
-
-The commit e38e486d66e2 ("ALSA: hda: Modify stream stripe mask only
-when needed") tried to address the regression by the unconditional
-application of the stripe mask, but this caused yet another
-regression for the previously working devices.  Namely, the patch
-clears the azx_dev->stripe flag at snd_hdac_stream_clear(), but this
-may be called multiple times before restarting the stream, so this
-ended up with clearance of the flag for the whole time.
-
-This patch fixes the regression by moving the azx_dev->stripe flag
-clearance at the counter-part, the close callback of HDMI codec
-driver instead.
-
-Fixes: e38e486d66e2 ("ALSA: hda: Modify stream stripe mask only when needed")
-BugLink: https://bugzilla.kernel.org/show_bug.cgi?id=205855
-BugLink: https://bugzilla.kernel.org/show_bug.cgi?id=204477
-Cc: <stable@vger.kernel.org>
-Link: https://lore.kernel.org/r/20191214175217.31852-1-tiwai@suse.de
-Signed-off-by: Takashi Iwai <tiwai@suse.de>
----
- sound/hda/hdac_stream.c    | 4 +---
- sound/pci/hda/patch_hdmi.c | 2 ++
- 2 files changed, 3 insertions(+), 3 deletions(-)
-
-diff --git a/sound/hda/hdac_stream.c b/sound/hda/hdac_stream.c
-index f9707fb05efe..682ed39f79b0 100644
---- a/sound/hda/hdac_stream.c
-+++ b/sound/hda/hdac_stream.c
-@@ -120,10 +120,8 @@ void snd_hdac_stream_clear(struct hdac_stream *azx_dev)
- 	snd_hdac_stream_updateb(azx_dev, SD_CTL,
- 				SD_CTL_DMA_START | SD_INT_MASK, 0);
- 	snd_hdac_stream_writeb(azx_dev, SD_STS, SD_INT_MASK); /* to be sure */
--	if (azx_dev->stripe) {
-+	if (azx_dev->stripe)
- 		snd_hdac_stream_updateb(azx_dev, SD_CTL_3B, SD_CTL_STRIPE_MASK, 0);
--		azx_dev->stripe = 0;
--	}
- 	azx_dev->running = false;
- }
- EXPORT_SYMBOL_GPL(snd_hdac_stream_clear);
-diff --git a/sound/pci/hda/patch_hdmi.c b/sound/pci/hda/patch_hdmi.c
-index 4dafc864d765..488c17c9f375 100644
---- a/sound/pci/hda/patch_hdmi.c
-+++ b/sound/pci/hda/patch_hdmi.c
-@@ -1983,6 +1983,8 @@ static int hdmi_pcm_close(struct hda_pcm_stream *hinfo,
- 		per_cvt->assigned = 0;
- 		hinfo->nid = 0;
- 
-+		azx_stream(get_azx_dev(substream))->stripe = 0;
-+
- 		mutex_lock(&spec->pcm_lock);
- 		snd_hda_spdif_ctls_unassign(codec, pcm_idx);
- 		clear_bit(pcm_idx, &spec->pcm_in_use);
--- 
-cgit v1.2.1-1-g437b
-
diff --git a/0007-drm-i915-save-AUD_FREQ_CNTRL-state-at-audio-domain-suspend.patch b/0007-drm-i915-save-AUD_FREQ_CNTRL-state-at-audio-domain-suspend.patch
deleted file mode 100644
index 6ea75b6..0000000
--- a/0007-drm-i915-save-AUD_FREQ_CNTRL-state-at-audio-domain-suspend.patch
+++ /dev/null
@@ -1,86 +0,0 @@
-From c0da4d4ee458208d5427d0a284173bd39a95d040 Mon Sep 17 00:00:00 2001
-From: Kai Vehmanen <kai.vehmanen@linux.intel.com>
-Date: Fri, 20 Sep 2019 11:39:18 +0300
-Subject: drm/i915: save AUD_FREQ_CNTRL state at audio domain suspend
-
-When audio power domain is suspended, the display driver must
-save state of AUD_FREQ_CNTRL on Tiger Lake and Ice Lake
-systems. The initial value of the register is set by BIOS and
-is read by driver during the audio component init sequence.
-
-Cc: Jani Nikula <jani.nikula@intel.com>
-Cc: Imre Deak <imre.deak@intel.com>
-Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>
-Signed-off-by: Jani Nikula <jani.nikula@intel.com>
-Link: https://patchwork.freedesktop.org/patch/msgid/20190920083918.27057-1-kai.vehmanen@linux.intel.com
----
- drivers/gpu/drm/i915/display/intel_audio.c | 17 +++++++++++++++--
- drivers/gpu/drm/i915/i915_drv.h            |  1 +
- drivers/gpu/drm/i915/i915_reg.h            |  2 ++
- 3 files changed, 18 insertions(+), 2 deletions(-)
-
-diff --git a/drivers/gpu/drm/i915/display/intel_audio.c b/drivers/gpu/drm/i915/display/intel_audio.c
-index ddcccf4408c3..439bc0a93410 100644
---- a/drivers/gpu/drm/i915/display/intel_audio.c
-+++ b/drivers/gpu/drm/i915/display/intel_audio.c
-@@ -850,10 +850,17 @@ static unsigned long i915_audio_component_get_power(struct device *kdev)
- 
- 	ret = intel_display_power_get(dev_priv, POWER_DOMAIN_AUDIO);
- 
--	/* Force CDCLK to 2*BCLK as long as we need audio to be powered. */
--	if (dev_priv->audio_power_refcount++ == 0)
-+	if (dev_priv->audio_power_refcount++ == 0) {
-+		if (IS_TIGERLAKE(dev_priv) || IS_ICELAKE(dev_priv)) {
-+			I915_WRITE(AUD_FREQ_CNTRL, dev_priv->audio_freq_cntrl);
-+			DRM_DEBUG_KMS("restored AUD_FREQ_CNTRL to 0x%x\n",
-+				      dev_priv->audio_freq_cntrl);
-+		}
-+
-+		/* Force CDCLK to 2*BCLK as long as we need audio powered. */
- 		if (IS_CANNONLAKE(dev_priv) || IS_GEMINILAKE(dev_priv))
- 			glk_force_audio_cdclk(dev_priv, true);
-+	}
- 
- 	return ret;
- }
-@@ -1114,6 +1121,12 @@ static void i915_audio_component_init(struct drm_i915_private *dev_priv)
- 		return;
- 	}
- 
-+	if (IS_TIGERLAKE(dev_priv) || IS_ICELAKE(dev_priv)) {
-+		dev_priv->audio_freq_cntrl = I915_READ(AUD_FREQ_CNTRL);
-+		DRM_DEBUG_KMS("init value of AUD_FREQ_CNTRL of 0x%x\n",
-+			      dev_priv->audio_freq_cntrl);
-+	}
-+
- 	dev_priv->audio_component_registered = true;
- }
- 
-diff --git a/drivers/gpu/drm/i915/i915_drv.h b/drivers/gpu/drm/i915/i915_drv.h
-index 89b6112bd66b..043ce1b47aeb 100644
---- a/drivers/gpu/drm/i915/i915_drv.h
-+++ b/drivers/gpu/drm/i915/i915_drv.h
-@@ -1530,6 +1530,7 @@ struct drm_i915_private {
- 	 */
- 	struct mutex av_mutex;
- 	int audio_power_refcount;
-+	u32 audio_freq_cntrl;
- 
- 	struct {
- 		struct mutex mutex;
-diff --git a/drivers/gpu/drm/i915/i915_reg.h b/drivers/gpu/drm/i915/i915_reg.h
-index f8ee9aba3955..e1fe356463ec 100644
---- a/drivers/gpu/drm/i915/i915_reg.h
-+++ b/drivers/gpu/drm/i915/i915_reg.h
-@@ -9104,6 +9104,8 @@ enum {
- #define HSW_AUD_CHICKENBIT			_MMIO(0x65f10)
- #define   SKL_AUD_CODEC_WAKE_SIGNAL		(1 << 15)
- 
-+#define AUD_FREQ_CNTRL			_MMIO(0x65900)
-+
- /*
-  * HSW - ICL power wells
-  *
--- 
-cgit v1.2.1-1-g437b
-
diff --git a/0008-drm-i915-Fix-audio-power-up-sequence-for-gen10-display.patch b/0008-drm-i915-Fix-audio-power-up-sequence-for-gen10-display.patch
deleted file mode 100644
index 7c46dbe..0000000
--- a/0008-drm-i915-Fix-audio-power-up-sequence-for-gen10-display.patch
+++ /dev/null
@@ -1,56 +0,0 @@
-From 6e149a5538676e885561f1dfc18bbb4dd104c1f6 Mon Sep 17 00:00:00 2001
-From: Kai Vehmanen <kai.vehmanen@linux.intel.com>
-Date: Thu, 3 Oct 2019 11:55:30 +0300
-Subject: drm/i915: Fix audio power up sequence for gen10+ display
-
-On platfroms with gen10+ display, driver must set the enable bit of
-AUDIO_PIN_BUF_CTL register before transactions with the HDA controller
-can proceed. Add setting this bit to the audio power up sequence.
-
-Failing to do this resulted in errors during display audio codec probe,
-and failures during resume from suspend.
-
-Note: We may also need to disable the bit afterwards, but there are
-still unresolved issues with that.
-
-Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=111214
-Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>
-Signed-off-by: Jani Nikula <jani.nikula@intel.com>
-Link: https://patchwork.freedesktop.org/patch/msgid/20191003085531.30990-1-kai.vehmanen@linux.intel.com
----
- drivers/gpu/drm/i915/display/intel_audio.c | 5 +++++
- drivers/gpu/drm/i915/i915_reg.h            | 2 ++
- 2 files changed, 7 insertions(+)
-
-diff --git a/drivers/gpu/drm/i915/display/intel_audio.c b/drivers/gpu/drm/i915/display/intel_audio.c
-index 439bc0a93410..440b33762fef 100644
---- a/drivers/gpu/drm/i915/display/intel_audio.c
-+++ b/drivers/gpu/drm/i915/display/intel_audio.c
-@@ -860,6 +860,11 @@ static unsigned long i915_audio_component_get_power(struct device *kdev)
- 		/* Force CDCLK to 2*BCLK as long as we need audio powered. */
- 		if (IS_CANNONLAKE(dev_priv) || IS_GEMINILAKE(dev_priv))
- 			glk_force_audio_cdclk(dev_priv, true);
-+
-+		if (INTEL_GEN(dev_priv) >= 10 || IS_GEMINILAKE(dev_priv))
-+			I915_WRITE(AUD_PIN_BUF_CTL,
-+				   (I915_READ(AUD_PIN_BUF_CTL) |
-+				    AUD_PIN_BUF_ENABLE));
- 	}
- 
- 	return ret;
-diff --git a/drivers/gpu/drm/i915/i915_reg.h b/drivers/gpu/drm/i915/i915_reg.h
-index e1fe356463ec..ccfea9c2b8bf 100644
---- a/drivers/gpu/drm/i915/i915_reg.h
-+++ b/drivers/gpu/drm/i915/i915_reg.h
-@@ -9105,6 +9105,8 @@ enum {
- #define   SKL_AUD_CODEC_WAKE_SIGNAL		(1 << 15)
- 
- #define AUD_FREQ_CNTRL			_MMIO(0x65900)
-+#define AUD_PIN_BUF_CTL		_MMIO(0x48414)
-+#define   AUD_PIN_BUF_ENABLE		REG_BIT(31)
- 
- /*
-  * HSW - ICL power wells
--- 
-cgit v1.2.1-1-g437b
-
diff --git a/0009-drm-i915-extend-audio-CDCLK-2-BCLK-constraint-to-more-platforms.patch b/0009-drm-i915-extend-audio-CDCLK-2-BCLK-constraint-to-more-platforms.patch
deleted file mode 100644
index 8d5b9ae..0000000
--- a/0009-drm-i915-extend-audio-CDCLK-2-BCLK-constraint-to-more-platforms.patch
+++ /dev/null
@@ -1,40 +0,0 @@
-From 975d5a884b3c80155808c2ac39e6bb6d51450dea Mon Sep 17 00:00:00 2001
-From: Kai Vehmanen <kai.vehmanen@linux.intel.com>
-Date: Thu, 3 Oct 2019 11:55:31 +0300
-Subject: drm/i915: extend audio CDCLK>=2*BCLK constraint to more platforms
-
-The CDCLK>=2*BCLK constraint applies to all generations since gen10.
-Extend the constraint logic in audio get/put_power().
-
-Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>
-Signed-off-by: Jani Nikula <jani.nikula@intel.com>
-Link: https://patchwork.freedesktop.org/patch/msgid/20191003085531.30990-2-kai.vehmanen@linux.intel.com
----
- drivers/gpu/drm/i915/display/intel_audio.c | 4 ++--
- 1 file changed, 2 insertions(+), 2 deletions(-)
-
-diff --git a/drivers/gpu/drm/i915/display/intel_audio.c b/drivers/gpu/drm/i915/display/intel_audio.c
-index 440b33762fef..05ef43b13d1c 100644
---- a/drivers/gpu/drm/i915/display/intel_audio.c
-+++ b/drivers/gpu/drm/i915/display/intel_audio.c
-@@ -858,7 +858,7 @@ static unsigned long i915_audio_component_get_power(struct device *kdev)
- 		}
- 
- 		/* Force CDCLK to 2*BCLK as long as we need audio powered. */
--		if (IS_CANNONLAKE(dev_priv) || IS_GEMINILAKE(dev_priv))
-+		if (INTEL_GEN(dev_priv) >= 10 || IS_GEMINILAKE(dev_priv))
- 			glk_force_audio_cdclk(dev_priv, true);
- 
- 		if (INTEL_GEN(dev_priv) >= 10 || IS_GEMINILAKE(dev_priv))
-@@ -877,7 +877,7 @@ static void i915_audio_component_put_power(struct device *kdev,
- 
- 	/* Stop forcing CDCLK to 2*BCLK if no need for audio to be powered. */
- 	if (--dev_priv->audio_power_refcount == 0)
--		if (IS_CANNONLAKE(dev_priv) || IS_GEMINILAKE(dev_priv))
-+		if (INTEL_GEN(dev_priv) >= 10 || IS_GEMINILAKE(dev_priv))
- 			glk_force_audio_cdclk(dev_priv, false);
- 
- 	intel_display_power_put(dev_priv, POWER_DOMAIN_AUDIO, cookie);
--- 
-cgit v1.2.1-1-g437b
-
diff --git a/0010-drm-i915-limit-audio-CDCLK-constraint-back-to-GLK-only.patch b/0010-drm-i915-limit-audio-CDCLK-constraint-back-to-GLK-only.patch
deleted file mode 100644
index 17083b5..0000000
--- a/0010-drm-i915-limit-audio-CDCLK-constraint-back-to-GLK-only.patch
+++ /dev/null
@@ -1,63 +0,0 @@
-From ce769a8e35537fc71cc9934a1fa39a481f994b25 Mon Sep 17 00:00:00 2001
-From: Kai Vehmanen <kai.vehmanen@linux.intel.com>
-Date: Tue, 31 Dec 2019 16:00:07 +0200
-Subject: drm/i915: Limit audio CDCLK>=2*BCLK constraint back to GLK only
-
-Revert changes done in commit f6ec9483091f ("drm/i915: extend audio
-CDCLK>=2*BCLK constraint to more platforms"). Audio drivers
-communicate with i915 over HDA bus multiple times during system
-boot-up and each of these transactions result in matching
-get_power/put_power calls to i915, and depending on the platform,
-a modeset change causing visible flicker.
-
-GLK is the only platform with minimum CDCLK significantly lower
-than BCLK, and thus for GLK setting a higher CDCLK is mandatory.
-
-For other platforms, minimum CDCLK is close but below 2*BCLK
-(e.g. on ICL, CDCLK=176.4kHz with BCLK=96kHz). Spec-wise the constraint
-should be set, but in practise no communication errors have been
-reported and the downside if set is the flicker observed at boot-time.
-
-Revert to old behaviour until better mechanism to manage
-probe-time clocks is available.
-
-The full CDCLK>=2*BCLK constraint is still enforced at pipe
-enable time in intel_crtc_compute_min_cdclk().
-
-Bugzilla: https://gitlab.freedesktop.org/drm/intel/issues/913
-Fixes: f6ec9483091f ("drm/i915: extend audio CDCLK>=2*BCLK constraint to more platforms")
-Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>
-Reviewed-by: Matt Roper <matthew.d.roper@intel.com>
-Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
-Link: https://patchwork.freedesktop.org/patch/msgid/20191231140007.31728-1-kai.vehmanen@linux.intel.com
-(cherry picked from commit 1ee48a61aa57dbdbc3cd2808d8b28df40d938e44)
-Signed-off-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
----
- drivers/gpu/drm/i915/display/intel_audio.c | 4 ++--
- 1 file changed, 2 insertions(+), 2 deletions(-)
-
-diff --git a/drivers/gpu/drm/i915/display/intel_audio.c b/drivers/gpu/drm/i915/display/intel_audio.c
-index 05ef43b13d1c..0cf475f3063c 100644
---- a/drivers/gpu/drm/i915/display/intel_audio.c
-+++ b/drivers/gpu/drm/i915/display/intel_audio.c
-@@ -858,7 +858,7 @@ static unsigned long i915_audio_component_get_power(struct device *kdev)
- 		}
- 
- 		/* Force CDCLK to 2*BCLK as long as we need audio powered. */
--		if (INTEL_GEN(dev_priv) >= 10 || IS_GEMINILAKE(dev_priv))
-+		if (IS_GEMINILAKE(dev_priv))
- 			glk_force_audio_cdclk(dev_priv, true);
- 
- 		if (INTEL_GEN(dev_priv) >= 10 || IS_GEMINILAKE(dev_priv))
-@@ -877,7 +877,7 @@ static void i915_audio_component_put_power(struct device *kdev,
- 
- 	/* Stop forcing CDCLK to 2*BCLK if no need for audio to be powered. */
- 	if (--dev_priv->audio_power_refcount == 0)
--		if (INTEL_GEN(dev_priv) >= 10 || IS_GEMINILAKE(dev_priv))
-+		if (IS_GEMINILAKE(dev_priv))
- 			glk_force_audio_cdclk(dev_priv, false);
- 
- 	intel_display_power_put(dev_priv, POWER_DOMAIN_AUDIO, cookie);
--- 
-cgit v1.2.1-1-g437b
-
diff --git a/0011-pinctrl-sunrisepoint-add-missing-interrupt-status-register-offset.patch b/0011-pinctrl-sunrisepoint-add-missing-interrupt-status-register-offset.patch
deleted file mode 100644
index 64afce3..0000000
--- a/0011-pinctrl-sunrisepoint-add-missing-interrupt-status-register-offset.patch
+++ /dev/null
@@ -1,34 +0,0 @@
-From adb810e1819b859aec1f8eb4c5611bc6ebe82137 Mon Sep 17 00:00:00 2001
-From: Boyan Ding <boyan.j.ding@gmail.com>
-Date: Wed, 1 Jan 2020 11:44:49 -0800
-Subject: pinctrl: sunrisepoint: Add missing Interrupt Status register offset
-
-Commit 179e5a6114cc ("pinctrl: intel: Remove default Interrupt Status
-offset") removes default interrupt status offset of GPIO controllers,
-with previous commits explicitly providing the previously default
-offsets. However, the is_offset value in SPTH_COMMUNITY is missing,
-preventing related irq from being properly detected and handled.
-
-Fixes: f702e0b93cdb ("pinctrl: sunrisepoint: Provide Interrupt Status register offset")
-Link: https://bugzilla.kernel.org/show_bug.cgi?id=205745
-Cc: stable@vger.kernel.org
-Signed-off-by: Boyan Ding <boyan.j.ding@gmail.com>
----
- drivers/pinctrl/intel/pinctrl-sunrisepoint.c | 1 +
- 1 file changed, 1 insertion(+)
-
-diff --git a/drivers/pinctrl/intel/pinctrl-sunrisepoint.c b/drivers/pinctrl/intel/pinctrl-sunrisepoint.c
-index 44d7f50bbc82..d936e7aa74c4 100644
---- a/drivers/pinctrl/intel/pinctrl-sunrisepoint.c
-+++ b/drivers/pinctrl/intel/pinctrl-sunrisepoint.c
-@@ -49,6 +49,7 @@
- 		.padown_offset = SPT_PAD_OWN,		\
- 		.padcfglock_offset = SPT_PADCFGLOCK,	\
- 		.hostown_offset = SPT_HOSTSW_OWN,	\
-+		.is_offset = SPT_GPI_IS,		\
- 		.ie_offset = SPT_GPI_IE,		\
- 		.pin_base = (s),			\
- 		.npins = ((e) - (s) + 1),		\
--- 
-cgit v1.2.1-1-g437b
-
diff --git a/0012-revert-iwlwifi-mvm-fix-scan-config-command-size.patch b/0012-revert-iwlwifi-mvm-fix-scan-config-command-size.patch
deleted file mode 100644
index 073e94f..0000000
--- a/0012-revert-iwlwifi-mvm-fix-scan-config-command-size.patch
+++ /dev/null
@@ -1,48 +0,0 @@
-From bb8bf48f4e9ab555fe824358d8d01da52f7d8255 Mon Sep 17 00:00:00 2001
-From: Mehmet Akif Tasova <makiftasova@gmail.com>
-Date: Mon, 30 Dec 2019 15:48:16 +0200
-Subject: Revert "iwlwifi: mvm: fix scan config command size"
-
-Since v5.4-rc1 was released, iwlwifi started throwing errors when scan
-commands were sent to the firmware with certain devices (depending on
-the OTP burned in the device, which contains the list of available
-channels).  For instance:
-
-iwlwifi 0000:00:14.3: FW error in SYNC CMD SCAN_CFG_CMD
-
-This bug was reported in the ArchLinux bug tracker:
-https://bugs.archlinux.org/task/64703
-
-And also in a specific case in bugzilla, when the lar_disabled option
-was set: https://bugzilla.kernel.org/show_bug.cgi?id=205193
-
-Revert the commit that introduced this error, by using the number of
-channels from the OTP instead of the number of channels that is
-specified in the FW TLV that tells us how many channels it supports.
-
-This reverts commit 06eb547c4ae4382e70d556ba213d13c95ca1801b.
-
-Cc: stable@vger.kernel.org # v5.4+
-Signed-off-by: Mehmet Akif Tasova <makiftasova@gmail.com>
-[ Luca: reworded the commit message a bit. ]
-Signed-off-by: Luca Coelho <luciano.coelho@intel.com>
----
- drivers/net/wireless/intel/iwlwifi/mvm/scan.c | 2 +-
- 1 file changed, 1 insertion(+), 1 deletion(-)
-
-diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/scan.c b/drivers/net/wireless/intel/iwlwifi/mvm/scan.c
-index fcafa22ec6ce..8aa567d7912c 100644
---- a/drivers/net/wireless/intel/iwlwifi/mvm/scan.c
-+++ b/drivers/net/wireless/intel/iwlwifi/mvm/scan.c
-@@ -1220,7 +1220,7 @@ static int iwl_mvm_legacy_config_scan(struct iwl_mvm *mvm)
- 		cmd_size = sizeof(struct iwl_scan_config_v2);
- 	else
- 		cmd_size = sizeof(struct iwl_scan_config_v1);
--	cmd_size += num_channels;
-+	cmd_size += mvm->fw->ucode_capa.n_scan_channels;
- 
- 	cfg = kzalloc(cmd_size, GFP_KERNEL);
- 	if (!cfg)
--- 
-cgit v1.2.1-1-g437b
-
diff --git a/0013-Revert-e1000e-make-watchdog-use-delayed-work.patch b/0013-Revert-e1000e-make-watchdog-use-delayed-work.patch
deleted file mode 100644
index b6f52b7..0000000
--- a/0013-Revert-e1000e-make-watchdog-use-delayed-work.patch
+++ /dev/null
@@ -1,174 +0,0 @@
-From ddd410cff71ff21a64d66039f30e197314e18e23 Mon Sep 17 00:00:00 2001
-From: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
-Date: Sat, 4 Jan 2020 23:29:22 -0800
-Subject: e1000e: Revert "e1000e: Make watchdog use delayed work"
-
-This reverts commit 59653e6497d16f7ac1d9db088f3959f57ee8c3db.
-
-This is due to this commit causing driver crashes and connections to
-reset unexpectedly.
-
-Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
----
- drivers/net/ethernet/intel/e1000e/e1000.h  |  5 ++-
- drivers/net/ethernet/intel/e1000e/netdev.c | 54 ++++++++++++++----------------
- 2 files changed, 27 insertions(+), 32 deletions(-)
-
-diff --git a/drivers/net/ethernet/intel/e1000e/e1000.h b/drivers/net/ethernet/intel/e1000e/e1000.h
-index 6c51b1bad8c4..37a2314d3e6b 100644
---- a/drivers/net/ethernet/intel/e1000e/e1000.h
-+++ b/drivers/net/ethernet/intel/e1000e/e1000.h
-@@ -185,13 +185,12 @@ struct e1000_phy_regs {
- 
- /* board specific private data structure */
- struct e1000_adapter {
-+	struct timer_list watchdog_timer;
- 	struct timer_list phy_info_timer;
- 	struct timer_list blink_timer;
- 
- 	struct work_struct reset_task;
--	struct delayed_work watchdog_task;
--
--	struct workqueue_struct *e1000_workqueue;
-+	struct work_struct watchdog_task;
- 
- 	const struct e1000_info *ei;
- 
-diff --git a/drivers/net/ethernet/intel/e1000e/netdev.c b/drivers/net/ethernet/intel/e1000e/netdev.c
-index d7d56e42a6aa..060daf66bf63 100644
---- a/drivers/net/ethernet/intel/e1000e/netdev.c
-+++ b/drivers/net/ethernet/intel/e1000e/netdev.c
-@@ -1780,8 +1780,7 @@ static irqreturn_t e1000_intr_msi(int __always_unused irq, void *data)
- 		}
- 		/* guard against interrupt when we're going down */
- 		if (!test_bit(__E1000_DOWN, &adapter->state))
--			mod_delayed_work(adapter->e1000_workqueue,
--					 &adapter->watchdog_task, HZ);
-+			mod_timer(&adapter->watchdog_timer, jiffies + 1);
- 	}
- 
- 	/* Reset on uncorrectable ECC error */
-@@ -1861,8 +1860,7 @@ static irqreturn_t e1000_intr(int __always_unused irq, void *data)
- 		}
- 		/* guard against interrupt when we're going down */
- 		if (!test_bit(__E1000_DOWN, &adapter->state))
--			mod_delayed_work(adapter->e1000_workqueue,
--					 &adapter->watchdog_task, HZ);
-+			mod_timer(&adapter->watchdog_timer, jiffies + 1);
- 	}
- 
- 	/* Reset on uncorrectable ECC error */
-@@ -1907,8 +1905,7 @@ static irqreturn_t e1000_msix_other(int __always_unused irq, void *data)
- 		hw->mac.get_link_status = true;
- 		/* guard against interrupt when we're going down */
- 		if (!test_bit(__E1000_DOWN, &adapter->state))
--			mod_delayed_work(adapter->e1000_workqueue,
--					 &adapter->watchdog_task, HZ);
-+			mod_timer(&adapter->watchdog_timer, jiffies + 1);
- 	}
- 
- 	if (!test_bit(__E1000_DOWN, &adapter->state))
-@@ -4281,6 +4278,7 @@ void e1000e_down(struct e1000_adapter *adapter, bool reset)
- 
- 	napi_synchronize(&adapter->napi);
- 
-+	del_timer_sync(&adapter->watchdog_timer);
- 	del_timer_sync(&adapter->phy_info_timer);
- 
- 	spin_lock(&adapter->stats64_lock);
-@@ -5152,11 +5150,25 @@ static void e1000e_check_82574_phy_workaround(struct e1000_adapter *adapter)
- 	}
- }
- 
-+/**
-+ * e1000_watchdog - Timer Call-back
-+ * @data: pointer to adapter cast into an unsigned long
-+ **/
-+static void e1000_watchdog(struct timer_list *t)
-+{
-+	struct e1000_adapter *adapter = from_timer(adapter, t, watchdog_timer);
-+
-+	/* Do the rest outside of interrupt context */
-+	schedule_work(&adapter->watchdog_task);
-+
-+	/* TODO: make this use queue_delayed_work() */
-+}
-+
- static void e1000_watchdog_task(struct work_struct *work)
- {
- 	struct e1000_adapter *adapter = container_of(work,
- 						     struct e1000_adapter,
--						     watchdog_task.work);
-+						     watchdog_task);
- 	struct net_device *netdev = adapter->netdev;
- 	struct e1000_mac_info *mac = &adapter->hw.mac;
- 	struct e1000_phy_info *phy = &adapter->hw.phy;
-@@ -5404,9 +5416,8 @@ link_up:
- 
- 	/* Reset the timer */
- 	if (!test_bit(__E1000_DOWN, &adapter->state))
--		queue_delayed_work(adapter->e1000_workqueue,
--				   &adapter->watchdog_task,
--				   round_jiffies(2 * HZ));
-+		mod_timer(&adapter->watchdog_timer,
-+			  round_jiffies(jiffies + 2 * HZ));
- }
- 
- #define E1000_TX_FLAGS_CSUM		0x00000001
-@@ -7259,21 +7270,11 @@ static int e1000_probe(struct pci_dev *pdev, const struct pci_device_id *ent)
- 		goto err_eeprom;
- 	}
- 
--	adapter->e1000_workqueue = alloc_workqueue("%s", WQ_MEM_RECLAIM, 0,
--						   e1000e_driver_name);
--
--	if (!adapter->e1000_workqueue) {
--		err = -ENOMEM;
--		goto err_workqueue;
--	}
--
--	INIT_DELAYED_WORK(&adapter->watchdog_task, e1000_watchdog_task);
--	queue_delayed_work(adapter->e1000_workqueue, &adapter->watchdog_task,
--			   0);
--
-+	timer_setup(&adapter->watchdog_timer, e1000_watchdog, 0);
- 	timer_setup(&adapter->phy_info_timer, e1000_update_phy_info, 0);
- 
- 	INIT_WORK(&adapter->reset_task, e1000_reset_task);
-+	INIT_WORK(&adapter->watchdog_task, e1000_watchdog_task);
- 	INIT_WORK(&adapter->downshift_task, e1000e_downshift_workaround);
- 	INIT_WORK(&adapter->update_phy_task, e1000e_update_phy_task);
- 	INIT_WORK(&adapter->print_hang_task, e1000_print_hw_hang);
-@@ -7367,9 +7368,6 @@ static int e1000_probe(struct pci_dev *pdev, const struct pci_device_id *ent)
- 	return 0;
- 
- err_register:
--	flush_workqueue(adapter->e1000_workqueue);
--	destroy_workqueue(adapter->e1000_workqueue);
--err_workqueue:
- 	if (!(adapter->flags & FLAG_HAS_AMT))
- 		e1000e_release_hw_control(adapter);
- err_eeprom:
-@@ -7416,17 +7414,15 @@ static void e1000_remove(struct pci_dev *pdev)
- 	 */
- 	if (!down)
- 		set_bit(__E1000_DOWN, &adapter->state);
-+	del_timer_sync(&adapter->watchdog_timer);
- 	del_timer_sync(&adapter->phy_info_timer);
- 
- 	cancel_work_sync(&adapter->reset_task);
-+	cancel_work_sync(&adapter->watchdog_task);
- 	cancel_work_sync(&adapter->downshift_task);
- 	cancel_work_sync(&adapter->update_phy_task);
- 	cancel_work_sync(&adapter->print_hang_task);
- 
--	cancel_delayed_work(&adapter->watchdog_task);
--	flush_workqueue(adapter->e1000_workqueue);
--	destroy_workqueue(adapter->e1000_workqueue);
--
- 	if (adapter->flags & FLAG_HAS_HW_TIMESTAMP) {
- 		cancel_work_sync(&adapter->tx_hwtstamp_work);
- 		if (adapter->tx_hwtstamp_skb) {
--- 
-cgit v1.2.1-1-g437b
-
diff --git a/PKGBUILD b/PKGBUILD
index c3bd898..f589561 100644
--- a/PKGBUILD
+++ b/PKGBUILD
@@ -6,26 +6,26 @@
 # Maintainer: Jonathon Fernyhough (i686) <jonathon@manjaro.org>
 # Contributor: Helmut Stult <helmut[at]manjaro[dot]org>
 
-pkgbase=linux54
-pkgname=('linux54' 'linux54-headers')
+pkgbase=linux55
+pkgname=('linux55' 'linux55-headers')
 _kernelname=-MANJARO
-_basekernel=5.4
-_basever=54
-_aufs=20191223
-pkgver=5.4.15
-pkgrel=2
+_basekernel=5.5
+_basever=55
+_aufs=20200127
+_sub=0
+pkgver=${_basekernel}.${_sub}
+pkgrel=1
 arch=('i686' 'x86_64')
 url="http://www.kernel.org/"
 license=('GPL2')
 makedepends=('xmlto' 'docbook-xsl' 'kmod' 'inetutils' 'bc' 'elfutils' 'git')
 options=('!strip')
 source=("https://www.kernel.org/pub/linux/kernel/v5.x/linux-${_basekernel}.tar.xz"
-        "https://www.kernel.org/pub/linux/kernel/v5.x/patch-${pkgver}.xz"
-        #"prepatch-${_basekernel}.patch"
+        #"https://www.kernel.org/pub/linux/kernel/v5.x/patch-${pkgver}.xz"
         # the main kernel config files
         'config.x86_64' 'config' 'config.aufs'
         # AUFS Patches
-        "aufs5.4-${_aufs}.patch"
+        "aufs5.x-rcN-${_aufs}.patch"
         'aufs5-base.patch'
         'aufs5-kbuild.patch'
         'aufs5-loopback.patch'
@@ -35,19 +35,7 @@ source=("https://www.kernel.org/pub/linux/kernel/v5.x/linux-${_basekernel}.tar.x
         'vfs-ino.patch'
         # ARCH Patches
         '0001-ZEN-Add-sysctl-and-CONFIG-to-disallow-unprivileged-CLONE_NEWUSER.patch'
-        '0002-lib-devres-add-a-helper-function-for-ioremap_uc.patch'
-        '0003-mfd-intel-lpss-use-devm_ioremap_uc-for-MMIO.patch'
-        '0004-PCI-pciehp-prevent-deadlock-on-disconnect.patch'
-        '0005-ACPI-PM-s2idle-rework-ACPI-events-sync.patch'
-        '0006-iwlwifi-pcie-restore-support-for-Killer-Qu-C0-NICs.patch'
-        '0007-drm-i915-save-AUD_FREQ_CNTRL-state-at-audio-domain-suspend.patch'
-        '0008-drm-i915-Fix-audio-power-up-sequence-for-gen10-display.patch'
-        '0009-drm-i915-extend-audio-CDCLK-2-BCLK-constraint-to-more-platforms.patch'
-        '0010-drm-i915-limit-audio-CDCLK-constraint-back-to-GLK-only.patch'
-        '0011-pinctrl-sunrisepoint-add-missing-interrupt-status-register-offset.patch'
-        '0012-revert-iwlwifi-mvm-fix-scan-config-command-size.patch'
-        '0013-Revert-e1000e-make-watchdog-use-delayed-work.patch'
-        '0014-drm-amdgpu-add-dc-feature-mask-to-disable-fractional-pwm.patch'
+        '0002-iwlwifi-pcie-restore-support-for-Killer-Qu-C0-NICs.patch'
         # MANJARO Patches
         '0001-apparmor-patch-to-provide-compatibility-with-v2-net-rules.patch'
         '0002-apparmor-af_unix-mediation.patch'
@@ -69,33 +57,20 @@ source=("https://www.kernel.org/pub/linux/kernel/v5.x/linux-${_basekernel}.tar.x
         '0011-bootsplash.patch'
         '0012-bootsplash.patch'
         '0013-bootsplash.patch')
-sha256sums=('bf338980b1670bca287f9994b7441c2361907635879169c64ae78364efc5f491'
-            'ff95ac79de6d23f5e87184d67f23ee0613707ed84b2fbe4280182ada2945dfda'
-            '8e6dc31f5b76de3c398eef312b5c3423039b4bd1b3e7776542c409fd26d60a3c'
+sha256sums=('a6fbd4ee903c128367892c2393ee0d9657b6ed3ea90016d4dc6f1f6da20b2330'
+            '32558d7e08983f539519e0e9692488650283b5bbe7e2601c516f88bfc0b01a27'
             'bfe52746bfc04114627b6f1e0dd94bc05dd94abe8f6dbee770f78d6116e315e8'
             'b44d81446d8b53d5637287c30ae3eb64cae0078c3fbc45fcf1081dd6699818b5'
-            'eb2de93799728d81b288e4d705c2194ed29da5b1316fab2ba01d1fcf6125d740'
-            '452d88811439abbcdf728bc29d637e8f8193b6b65e66877994b944a008cd6483'
-            '5e75a6227bcc67d1d22ab84f897d9b48b600c59530290988f6caa937f08f5c93'
-            'c98e3f0b061c5ce7462f135af999aab4c8808ab02f08d3e7be9ece9bd42cbd8f'
-            'aebc190f80fcc6add48cf6f0db20aba0600d700df9fe03b5ebfadd8359f4730f'
-            '0f650de173629ac0dd0ee0106c77036f8d6a744bdf97999f3a88c57ecb5e37ee'
-            'a5948d35cce73856200493a5e9d801ce2cabcb41f3dd471eef5dbef16ddf4616'
-            '497055144417f07fd074cad7616b75105b9514c6cbfd169b0a3cf7cf21016d05'
+            '5140f290d76b35a06e13b431f72f7049c07c46cd12f985777e0b0bcb613f1104'
+            'd23d429e2a843d8b1c503480b650f59c9e2273e1907e927132e086dfc133616c'
+            'a5533120455c6490a75f06f5fc24b861ed2df503c980fa5548b5caa2f7984f13'
+            '02211d7d11883e30a7a90fc4e1eb4c4d9391fa636f717fb7061ba48d26630ac4'
+            '9bd2ec4fd05a993f140720d51d02ff7032c824fafcfb8d5dbd47272187534656'
+            '32caef5516e4d1d70cdb98a66011d70b5955aea0a19b525c46d914d7a35de0d5'
+            'c9796feddec29b332602bee218e8d3e5b629523b40314eeab078f415b96d1322'
+            'c95cc6bc798978e29125c49ab613959c939ab7cf505142e968025373f4ffb9d5'
             '7685d526bbdbfa795986591a70071c960ff572f56d3501774861728a9df8664c'
-            '7baea65989ef0d29ab4eb8296759193b8f93c31248d08e944e1bdf0059ccdfdd'
-            'abcf6043c594d5514118124a8f2cf8787557a95338fa0ff7f28a142567bafed0'
-            '2431629465ca508a203df31ee14f614c061f6efc128ec858cecb4a3a2ee5f1d0'
-            '25d72c2c88088d78afa1658fc16c8d4ad98f4140ec69fa0ade49abfe27e8f722'
             'fcb9e515bf0816db05446fd8ced7468756bea3cf01b060504bace41b2e7f5f74'
-            'e2084feabc3abeed37579ff515c367014356a652b85794b1612fea4daabe85d3'
-            '988ffbb96d85564a9d96145e5973339a8f78ae95d919efb2ee7bb50f7a8e8fc9'
-            '5257159e20a5fcb102a3b3ee6de33882a9e132e7f1d4345b8730effdd0240bb6'
-            '763cd8e7d5b4a5c24f7a82f24c64ec5503ea5c81dfb42fa74150136c0ca066fd'
-            '33ec2170ace6b4f7dbc1cc751110d325d8619202d0f312587adbc4bef7a045ce'
-            '11a29c93dad7f0eb54e18e3420b37fb4dc24a4053a982650d014797d6e27c6b1'
-            '0f11af2c5c10e029ad5ac3e25dfaf1348cdfa398e8c62938937ee85eeb9d015b'
-            'cba63c224af57d6b9432bb5f507121148d02b313c5f87c55504f49632a3a6062'
             '98202b8ad70d02d86603294bae967874fa7b18704b5c7b867568b0fd33a08921'
             '5cbbf3db9ea3205e9b89fe3049bea6dd626181db0cb0dc461e4cf5a400c68dd6'
             'c7dbec875d0c1d6782c037a1dcefff2e5bdb5fc9dffac1beea07dd8c1bdef1d7'
@@ -119,7 +94,7 @@ prepare() {
   cd "${srcdir}/linux-${_basekernel}"
 
   # add upstream patch
-  patch -p1 -i "${srcdir}/patch-${pkgver}"
+  #patch -p1 -i "${srcdir}/patch-${pkgver}"
 
   # add latest fixes from stable queue, if needed
   # http://git.kernel.org/?p=linux/kernel/git/stable/stable-queue.git
@@ -129,30 +104,8 @@ prepare() {
   # disable USER_NS for non-root users by default
   patch -Np1 -i ../0001-ZEN-Add-sysctl-and-CONFIG-to-disallow-unprivileged-CLONE_NEWUSER.patch
 
-  # fix dell xps 13 2-in-1 issue
-  # https://lkml.org/lkml/2019/10/16/1230
-  patch -Np1 -i '../0002-lib-devres-add-a-helper-function-for-ioremap_uc.patch'
-  patch -Np1 -i '../0003-mfd-intel-lpss-use-devm_ioremap_uc-for-MMIO.patch'
-
-  # https://twitter.com/vskye11/status/1216240051639791616
-  patch -Np1 -i '../0001-i2c-nuvoton-nc677x-hwmon-driver.patch'
-
   # other fixes by Arch
-  patch -Np1 -i '../0004-PCI-pciehp-prevent-deadlock-on-disconnect.patch'
-  patch -Np1 -i '../0005-ACPI-PM-s2idle-rework-ACPI-events-sync.patch'
-  patch -Np1 -i '../0006-iwlwifi-pcie-restore-support-for-Killer-Qu-C0-NICs.patch'
-  patch -Np1 -i '../0007-drm-i915-save-AUD_FREQ_CNTRL-state-at-audio-domain-suspend.patch'
-  patch -Np1 -i '../0008-drm-i915-Fix-audio-power-up-sequence-for-gen10-display.patch'
-  patch -Np1 -i '../0009-drm-i915-extend-audio-CDCLK-2-BCLK-constraint-to-more-platforms.patch'
-  patch -Np1 -i '../0010-drm-i915-limit-audio-CDCLK-constraint-back-to-GLK-only.patch'
-  patch -Np1 -i '../0011-pinctrl-sunrisepoint-add-missing-interrupt-status-register-offset.patch'
-  patch -Np1 -i '../0012-revert-iwlwifi-mvm-fix-scan-config-command-size.patch'
-  patch -Np1 -i '../0013-Revert-e1000e-make-watchdog-use-delayed-work.patch'
-  patch -Np1 -i '../0014-drm-amdgpu-add-dc-feature-mask-to-disable-fractional-pwm.patch'
-
-  # https://bbs.archlinux.org/viewtopic.php?pid=1883376#p1883376
-  # https://gitlab.manjaro.org/packages/core/linux54/issues/5
-  # No patch yet found ...
+  patch -Np1 -i '../0002-iwlwifi-pcie-restore-support-for-Killer-Qu-C0-NICs.patch'
 
   # add patches for snapd
   # https://gitlab.com/apparmor/apparmor-kernel/tree/5.2-outoftree
@@ -184,7 +137,7 @@ prepare() {
   git apply -p1 < "${srcdir}/0013-bootsplash.patch"
 
   # add aufs5 support
-  patch -Np1 -i "${srcdir}/aufs5.4-${_aufs}.patch"
+  patch -Np1 -i "${srcdir}/aufs5.x-rcN-${_aufs}.patch"
   patch -Np1 -i "${srcdir}/aufs5-base.patch"
   patch -Np1 -i "${srcdir}/aufs5-kbuild.patch"
   patch -Np1 -i "${srcdir}/aufs5-loopback.patch"
@@ -206,9 +159,6 @@ prepare() {
     sed -i "s|CONFIG_LOCALVERSION_AUTO=.*|CONFIG_LOCALVERSION_AUTO=n|" ./.config
   fi
 
-  # set patchlevel to 4
-  sed -ri "s|^(PATCHLEVEL =).*|\1 4|" Makefile
-
   # set extraversion to pkgrel
   sed -ri "s|^(EXTRAVERSION =).*|\1 -${pkgrel}|" Makefile
 
@@ -237,7 +187,7 @@ build() {
   make ${MAKEFLAGS} LOCALVERSION= bzImage modules
 }
 
-package_linux54() {
+package_linux55() {
   pkgdesc="The ${pkgbase/linux/Linux} kernel and modules"
   depends=('coreutils' 'linux-firmware' 'kmod' 'mkinitcpio>=27')
   optdepends=('crda: to set the correct wireless channels of your country')
@@ -286,7 +236,7 @@ package_linux54() {
   install -Dt "${pkgdir}/usr/lib/modules/${_kernver}/build" -m644 vmlinux
 }
 
-package_linux54-headers() {
+package_linux55-headers() {
   pkgdesc="Header files and scripts for building modules for ${pkgbase/linux/Linux} kernel"
   provides=("linux-headers=$pkgver")
 
@@ -348,7 +298,7 @@ package_linux54-headers() {
   # strip scripts directory
   local _binary _strip
   while read -rd '' _binary; do
-    case "$(file -bi ${_binary})" in
+    case "$(file -bi "${_binary}")" in
       *application/x-sharedlib*)  _strip="${STRIP_SHARED}"   ;; # Libraries (.so)
       *application/x-archive*)    _strip="${STRIP_STATIC}"   ;; # Libraries (.a)
       *application/x-executable*) _strip="${STRIP_BINARIES}" ;; # Binaries
diff --git a/aufs5-base.patch b/aufs5-base.patch
index d1b1a88..17ea8f8 100644
--- a/aufs5-base.patch
+++ b/aufs5-base.patch
@@ -1,11 +1,11 @@
 SPDX-License-Identifier: GPL-2.0
-aufs5.4 base patch
+aufs5.x-rcN base patch
 
 diff --git a/MAINTAINERS b/MAINTAINERS
-index 9d3a5c54a41d..f33398b47c42 100644
+index cf6ccca6e61c..c3b9b0d405fd 100644
 --- a/MAINTAINERS
 +++ b/MAINTAINERS
-@@ -2832,6 +2832,19 @@ F:	include/linux/audit.h
+@@ -2877,6 +2877,19 @@ F:	include/linux/audit.h
  F:	include/uapi/linux/audit.h
  F:	kernel/audit*
  
@@ -26,10 +26,10 @@ index 9d3a5c54a41d..f33398b47c42 100644
  M:	Miguel Ojeda Sandonis <miguel.ojeda.sandonis@gmail.com>
  S:	Maintained
 diff --git a/drivers/block/loop.c b/drivers/block/loop.c
-index f6f77eaa7217..5e094699215e 100644
+index 739b372a5112..872e3b3a7693 100644
 --- a/drivers/block/loop.c
 +++ b/drivers/block/loop.c
-@@ -738,6 +738,24 @@ static int loop_change_fd(struct loop_device *lo, struct block_device *bdev,
+@@ -750,6 +750,24 @@ static int loop_change_fd(struct loop_device *lo, struct block_device *bdev,
  	return error;
  }
  
@@ -55,10 +55,10 @@ index f6f77eaa7217..5e094699215e 100644
  
  static ssize_t loop_attr_show(struct device *dev, char *page,
 diff --git a/fs/dcache.c b/fs/dcache.c
-index e88cf0554e65..7ce4ccf5a51c 100644
+index b280e07e162b..046000653e4d 100644
 --- a/fs/dcache.c
 +++ b/fs/dcache.c
-@@ -1264,7 +1264,7 @@ enum d_walk_ret {
+@@ -1266,7 +1266,7 @@ enum d_walk_ret {
   *
   * The @enter() callbacks are called with d_lock held.
   */
@@ -68,7 +68,7 @@ index e88cf0554e65..7ce4ccf5a51c 100644
  {
  	struct dentry *this_parent;
 diff --git a/fs/fcntl.c b/fs/fcntl.c
-index 3d40771e8e7c..d62303c5472a 100644
+index 9bc167562ee8..b0935c67bd1e 100644
 --- a/fs/fcntl.c
 +++ b/fs/fcntl.c
 @@ -32,7 +32,7 @@
@@ -76,7 +76,7 @@ index 3d40771e8e7c..d62303c5472a 100644
  #define SETFL_MASK (O_APPEND | O_NONBLOCK | O_NDELAY | O_DIRECT | O_NOATIME)
  
 -static int setfl(int fd, struct file * filp, unsigned long arg)
-+int setfl(int fd, struct file * filp, unsigned long arg)
++int setfl(int fd, struct file *filp, unsigned long arg)
  {
  	struct inode * inode = file_inode(filp);
  	int error = 0;
@@ -90,10 +90,10 @@ index 3d40771e8e7c..d62303c5472a 100644
  		return error;
  
 diff --git a/fs/inode.c b/fs/inode.c
-index fef457a42882..aaeacde398ee 100644
+index 96d62d97694e..31796c1040d6 100644
 --- a/fs/inode.c
 +++ b/fs/inode.c
-@@ -1673,7 +1673,7 @@ EXPORT_SYMBOL(generic_update_time);
+@@ -1680,7 +1680,7 @@ EXPORT_SYMBOL(generic_update_time);
   * This does the actual work of updating an inodes time or version.  Must have
   * had called mnt_want_write() before calling this.
   */
@@ -103,7 +103,7 @@ index fef457a42882..aaeacde398ee 100644
  	int (*update_time)(struct inode *, struct timespec64 *, int);
  
 diff --git a/fs/namespace.c b/fs/namespace.c
-index 2adfe7b166a3..0f7e57e5f4b7 100644
+index 5e1bf611a9eb..c05ac2488abb 100644
 --- a/fs/namespace.c
 +++ b/fs/namespace.c
 @@ -776,6 +776,12 @@ static inline int check_mnt(struct mount *mnt)
@@ -120,7 +120,7 @@ index 2adfe7b166a3..0f7e57e5f4b7 100644
   * vfsmount lock must be held for write
   */
 diff --git a/fs/read_write.c b/fs/read_write.c
-index 5bbf587f5bc1..3265bb84f152 100644
+index 5bbf587f5bc1..fa9b3994b34c 100644
 --- a/fs/read_write.c
 +++ b/fs/read_write.c
 @@ -498,6 +498,28 @@ static ssize_t __vfs_write(struct file *file, const char __user *p,
@@ -135,7 +135,7 @@ index 5bbf587f5bc1..3265bb84f152 100644
 +		return fop->read;
 +	if (fop->read_iter)
 +		return new_sync_read;
-+	return ERR_PTR(-ENOSYS);
++	return ERR_PTR(-ENOSYS); /* doesn't have ->read(|_iter)() op */
 +}
 +
 +vfs_writef_t vfs_writef(struct file *file)
@@ -146,17 +146,17 @@ index 5bbf587f5bc1..3265bb84f152 100644
 +		return fop->write;
 +	if (fop->write_iter)
 +		return new_sync_write;
-+	return ERR_PTR(-ENOSYS);
++	return ERR_PTR(-ENOSYS); /* doesn't have ->write(|_iter)() op */
 +}
 +
  ssize_t __kernel_write(struct file *file, const void *buf, size_t count, loff_t *pos)
  {
  	mm_segment_t old_fs;
 diff --git a/fs/splice.c b/fs/splice.c
-index 98412721f056..75b489fcb66f 100644
+index 3009652a41c8..d9bcc4a71a0a 100644
 --- a/fs/splice.c
 +++ b/fs/splice.c
-@@ -834,8 +834,8 @@ EXPORT_SYMBOL(generic_splice_sendpage);
+@@ -849,8 +849,8 @@ EXPORT_SYMBOL(generic_splice_sendpage);
  /*
   * Attempt to initiate a splice from pipe to file.
   */
@@ -167,7 +167,7 @@ index 98412721f056..75b489fcb66f 100644
  {
  	ssize_t (*splice_write)(struct pipe_inode_info *, struct file *,
  				loff_t *, size_t, unsigned int);
-@@ -851,9 +851,9 @@ static long do_splice_from(struct pipe_inode_info *pipe, struct file *out,
+@@ -866,9 +866,9 @@ static long do_splice_from(struct pipe_inode_info *pipe, struct file *out,
  /*
   * Attempt to initiate a splice from a file to a pipe.
   */
@@ -194,18 +194,18 @@ index 4d1ff010bc5a..457f4e4a5cc1 100644
  	if (wait)
  		sync_inodes_sb(sb);
 diff --git a/include/linux/fs.h b/include/linux/fs.h
-index e0d909d35763..3e997d7fc67f 100644
+index 98e0349adb52..5fc7807f7c2e 100644
 --- a/include/linux/fs.h
 +++ b/include/linux/fs.h
 @@ -1349,6 +1349,7 @@ extern void fasync_free(struct fasync_struct *);
  /* can be called from interrupts */
  extern void kill_fasync(struct fasync_struct **, int, int);
  
-+extern int setfl(int fd, struct file * filp, unsigned long arg);
++extern int setfl(int fd, struct file *filp, unsigned long arg);
  extern void __f_setown(struct file *filp, struct pid *, enum pid_type, int force);
  extern int f_setown(struct file *filp, unsigned long arg, int force);
  extern void f_delown(struct file *filp);
-@@ -1835,6 +1836,7 @@ struct file_operations {
+@@ -1842,6 +1843,7 @@ struct file_operations {
  	ssize_t (*sendpage) (struct file *, struct page *, int, size_t, loff_t *, int);
  	unsigned long (*get_unmapped_area)(struct file *, unsigned long, unsigned long, unsigned long, unsigned long);
  	int (*check_flags)(int);
@@ -213,7 +213,7 @@ index e0d909d35763..3e997d7fc67f 100644
  	int (*flock) (struct file *, int, struct file_lock *);
  	ssize_t (*splice_write)(struct pipe_inode_info *, struct file *, loff_t *, size_t, unsigned int);
  	ssize_t (*splice_read)(struct file *, loff_t *, struct pipe_inode_info *, size_t, unsigned int);
-@@ -1905,6 +1907,12 @@ ssize_t rw_copy_check_uvector(int type, const struct iovec __user * uvector,
+@@ -1912,6 +1914,12 @@ ssize_t rw_copy_check_uvector(int type, const struct iovec __user * uvector,
  			      struct iovec *fast_pointer,
  			      struct iovec **ret_pointer);
  
@@ -226,7 +226,7 @@ index e0d909d35763..3e997d7fc67f 100644
  extern ssize_t __vfs_read(struct file *, char __user *, size_t, loff_t *);
  extern ssize_t vfs_read(struct file *, char __user *, size_t, loff_t *);
  extern ssize_t vfs_write(struct file *, const char __user *, size_t, loff_t *);
-@@ -2325,6 +2333,7 @@ extern int current_umask(void);
+@@ -2332,6 +2340,7 @@ extern int current_umask(void);
  extern void ihold(struct inode * inode);
  extern void iput(struct inode *);
  extern int generic_update_time(struct inode *, struct timespec64 *, int);
@@ -234,7 +234,7 @@ index e0d909d35763..3e997d7fc67f 100644
  
  /* /sys/fs */
  extern struct kobject *fs_kobj;
-@@ -2613,6 +2622,7 @@ static inline bool sb_is_blkdev_sb(struct super_block *sb)
+@@ -2620,6 +2629,7 @@ static inline bool sb_is_blkdev_sb(struct super_block *sb)
  	return false;
  }
  #endif
@@ -243,7 +243,7 @@ index e0d909d35763..3e997d7fc67f 100644
  extern const struct file_operations def_blk_fops;
  extern const struct file_operations def_chr_fops;
 diff --git a/include/linux/lockdep.h b/include/linux/lockdep.h
-index b8a835fd611b..f452521f2e05 100644
+index c50d01ef1414..4f4677020360 100644
 --- a/include/linux/lockdep.h
 +++ b/include/linux/lockdep.h
 @@ -331,6 +331,8 @@ static inline int lockdep_match_key(struct lockdep_map *lock,
@@ -255,7 +255,7 @@ index b8a835fd611b..f452521f2e05 100644
  /*
   * Acquire a lock.
   *
-@@ -473,6 +475,7 @@ struct lockdep_map { };
+@@ -472,6 +474,7 @@ struct lockdep_map { };
  
  #define lockdep_depth(tsk)	(0)
  
@@ -298,7 +298,7 @@ index 74b4911ac16d..19789fbea567 100644
 +			 unsigned int flags);
  #endif
 diff --git a/kernel/locking/lockdep.c b/kernel/locking/lockdep.c
-index 233459c03b5a..407c08ac8ac8 100644
+index 32406ef0d6a2..e52169c2086b 100644
 --- a/kernel/locking/lockdep.c
 +++ b/kernel/locking/lockdep.c
 @@ -153,7 +153,7 @@ static
diff --git a/aufs5-kbuild.patch b/aufs5-kbuild.patch
index d95c224..65a56e7 100644
--- a/aufs5-kbuild.patch
+++ b/aufs5-kbuild.patch
@@ -1,8 +1,8 @@
 SPDX-License-Identifier: GPL-2.0
-aufs5.4 kbuild patch
+aufs5.x-rcN kbuild patch
 
 diff --git a/fs/Kconfig b/fs/Kconfig
-index 2501e6f1f965..38a6a5991da9 100644
+index 7b623e9fc1b0..9070b9159188 100644
 --- a/fs/Kconfig
 +++ b/fs/Kconfig
 @@ -264,6 +264,7 @@ source "fs/pstore/Kconfig"
@@ -14,10 +14,10 @@ index 2501e6f1f965..38a6a5991da9 100644
  endif # MISC_FILESYSTEMS
  
 diff --git a/fs/Makefile b/fs/Makefile
-index 14231b4cf383..8765e191ebe0 100644
+index 1148c555c4d3..ed6ff7ddc478 100644
 --- a/fs/Makefile
 +++ b/fs/Makefile
-@@ -132,3 +132,4 @@ obj-$(CONFIG_CEPH_FS)		+= ceph/
+@@ -133,3 +133,4 @@ obj-$(CONFIG_CEPH_FS)		+= ceph/
  obj-$(CONFIG_PSTORE)		+= pstore/
  obj-$(CONFIG_EFIVAR_FS)		+= efivarfs/
  obj-$(CONFIG_EROFS_FS)		+= erofs/
diff --git a/aufs5-loopback.patch b/aufs5-loopback.patch
index a988c00..7ba0107 100644
--- a/aufs5-loopback.patch
+++ b/aufs5-loopback.patch
@@ -1,11 +1,11 @@
 SPDX-License-Identifier: GPL-2.0
-aufs5.4 loopback patch
+aufs5.x-rcN loopback patch
 
 diff --git a/drivers/block/loop.c b/drivers/block/loop.c
-index 5e094699215e..22b2ecb6cfe8 100644
+index 872e3b3a7693..768100025129 100644
 --- a/drivers/block/loop.c
 +++ b/drivers/block/loop.c
-@@ -625,6 +625,15 @@ static inline void loop_update_dio(struct loop_device *lo)
+@@ -635,6 +635,15 @@ static inline void loop_update_dio(struct loop_device *lo)
  			lo->use_dio);
  }
  
@@ -21,7 +21,7 @@ index 5e094699215e..22b2ecb6cfe8 100644
  static void loop_reread_partitions(struct loop_device *lo,
  				   struct block_device *bdev)
  {
-@@ -678,6 +687,7 @@ static int loop_change_fd(struct loop_device *lo, struct block_device *bdev,
+@@ -690,6 +699,7 @@ static int loop_change_fd(struct loop_device *lo, struct block_device *bdev,
  			  unsigned int arg)
  {
  	struct file	*file = NULL, *old_file;
@@ -29,7 +29,7 @@ index 5e094699215e..22b2ecb6cfe8 100644
  	int		error;
  	bool		partscan;
  
-@@ -697,12 +707,19 @@ static int loop_change_fd(struct loop_device *lo, struct block_device *bdev,
+@@ -709,12 +719,19 @@ static int loop_change_fd(struct loop_device *lo, struct block_device *bdev,
  	file = fget(arg);
  	if (!file)
  		goto out_err;
@@ -49,7 +49,7 @@ index 5e094699215e..22b2ecb6cfe8 100644
  
  	error = -EINVAL;
  
-@@ -714,6 +731,7 @@ static int loop_change_fd(struct loop_device *lo, struct block_device *bdev,
+@@ -726,6 +743,7 @@ static int loop_change_fd(struct loop_device *lo, struct block_device *bdev,
  	blk_mq_freeze_queue(lo->lo_queue);
  	mapping_set_gfp_mask(old_file->f_mapping, lo->old_gfp_mask);
  	lo->lo_backing_file = file;
@@ -57,7 +57,7 @@ index 5e094699215e..22b2ecb6cfe8 100644
  	lo->old_gfp_mask = mapping_gfp_mask(file->f_mapping);
  	mapping_set_gfp_mask(file->f_mapping,
  			     lo->old_gfp_mask & ~(__GFP_IO|__GFP_FS));
-@@ -727,6 +745,8 @@ static int loop_change_fd(struct loop_device *lo, struct block_device *bdev,
+@@ -739,6 +757,8 @@ static int loop_change_fd(struct loop_device *lo, struct block_device *bdev,
  	 * dependency.
  	 */
  	fput(old_file);
@@ -66,7 +66,7 @@ index 5e094699215e..22b2ecb6cfe8 100644
  	if (partscan)
  		loop_reread_partitions(lo, bdev);
  	return 0;
-@@ -735,6 +755,8 @@ static int loop_change_fd(struct loop_device *lo, struct block_device *bdev,
+@@ -747,6 +767,8 @@ static int loop_change_fd(struct loop_device *lo, struct block_device *bdev,
  	mutex_unlock(&loop_ctl_mutex);
  	if (file)
  		fput(file);
@@ -75,7 +75,7 @@ index 5e094699215e..22b2ecb6cfe8 100644
  	return error;
  }
  
-@@ -939,7 +961,7 @@ static void loop_update_rotational(struct loop_device *lo)
+@@ -951,7 +973,7 @@ static void loop_update_rotational(struct loop_device *lo)
  static int loop_set_fd(struct loop_device *lo, fmode_t mode,
  		       struct block_device *bdev, unsigned int arg)
  {
@@ -84,7 +84,7 @@ index 5e094699215e..22b2ecb6cfe8 100644
  	struct inode	*inode;
  	struct address_space *mapping;
  	struct block_device *claimed_bdev = NULL;
-@@ -955,6 +977,12 @@ static int loop_set_fd(struct loop_device *lo, fmode_t mode,
+@@ -967,6 +989,12 @@ static int loop_set_fd(struct loop_device *lo, fmode_t mode,
  	file = fget(arg);
  	if (!file)
  		goto out;
@@ -97,7 +97,7 @@ index 5e094699215e..22b2ecb6cfe8 100644
  
  	/*
  	 * If we don't hold exclusive handle for the device, upgrade to it
-@@ -1003,6 +1031,7 @@ static int loop_set_fd(struct loop_device *lo, fmode_t mode,
+@@ -1015,6 +1043,7 @@ static int loop_set_fd(struct loop_device *lo, fmode_t mode,
  	lo->lo_device = bdev;
  	lo->lo_flags = lo_flags;
  	lo->lo_backing_file = file;
@@ -105,7 +105,7 @@ index 5e094699215e..22b2ecb6cfe8 100644
  	lo->transfer = NULL;
  	lo->ioctl = NULL;
  	lo->lo_sizelimit = 0;
-@@ -1056,6 +1085,8 @@ static int loop_set_fd(struct loop_device *lo, fmode_t mode,
+@@ -1068,6 +1097,8 @@ static int loop_set_fd(struct loop_device *lo, fmode_t mode,
  		bd_abort_claiming(bdev, claimed_bdev, loop_set_fd);
  out_putf:
  	fput(file);
@@ -114,7 +114,7 @@ index 5e094699215e..22b2ecb6cfe8 100644
  out:
  	/* This is safe: open() is still holding a reference. */
  	module_put(THIS_MODULE);
-@@ -1102,6 +1133,7 @@ loop_init_xfer(struct loop_device *lo, struct loop_func_table *xfer,
+@@ -1114,6 +1145,7 @@ loop_init_xfer(struct loop_device *lo, struct loop_func_table *xfer,
  static int __loop_clr_fd(struct loop_device *lo, bool release)
  {
  	struct file *filp = NULL;
@@ -122,7 +122,7 @@ index 5e094699215e..22b2ecb6cfe8 100644
  	gfp_t gfp = lo->old_gfp_mask;
  	struct block_device *bdev = lo->lo_device;
  	int err = 0;
-@@ -1125,6 +1157,7 @@ static int __loop_clr_fd(struct loop_device *lo, bool release)
+@@ -1137,6 +1169,7 @@ static int __loop_clr_fd(struct loop_device *lo, bool release)
  
  	spin_lock_irq(&lo->lo_lock);
  	lo->lo_backing_file = NULL;
@@ -130,7 +130,7 @@ index 5e094699215e..22b2ecb6cfe8 100644
  	spin_unlock_irq(&lo->lo_lock);
  
  	loop_release_xfer(lo);
-@@ -1207,6 +1240,8 @@ static int __loop_clr_fd(struct loop_device *lo, bool release)
+@@ -1220,6 +1253,8 @@ static int __loop_clr_fd(struct loop_device *lo, bool release)
  	 */
  	if (filp)
  		fput(filp);
@@ -140,7 +140,7 @@ index 5e094699215e..22b2ecb6cfe8 100644
  }
  
 diff --git a/drivers/block/loop.h b/drivers/block/loop.h
-index af75a5ee4094..1e6ee5a4f623 100644
+index af75a5ee4094..1d847cb194ff 100644
 --- a/drivers/block/loop.h
 +++ b/drivers/block/loop.h
 @@ -46,7 +46,7 @@ struct loop_device {
@@ -148,12 +148,12 @@ index af75a5ee4094..1e6ee5a4f623 100644
  				 unsigned long arg); 
  
 -	struct file *	lo_backing_file;
-+	struct file *	lo_backing_file, *lo_backing_virt_file;
++	struct file	*lo_backing_file, *lo_backing_virt_file;
  	struct block_device *lo_device;
  	void		*key_data; 
  
 diff --git a/fs/aufs/f_op.c b/fs/aufs/f_op.c
-index 0309f0d502ff..19feb4f3cb5f 100644
+index 6fb4a4ed8cc7..ba9a959f2db2 100644
 --- a/fs/aufs/f_op.c
 +++ b/fs/aufs/f_op.c
 @@ -359,7 +359,7 @@ static ssize_t aufs_read_iter(struct kiocb *kio, struct iov_iter *iov_iter)
@@ -166,7 +166,7 @@ index 0309f0d502ff..19feb4f3cb5f 100644
  		if (file->f_mapping != h_file->f_mapping) {
  			file->f_mapping = h_file->f_mapping;
 diff --git a/fs/aufs/loop.c b/fs/aufs/loop.c
-index 9ba35a878ecd..4ed0ff03d5ab 100644
+index a8b63acc6204..9d97c3af5686 100644
 --- a/fs/aufs/loop.c
 +++ b/fs/aufs/loop.c
 @@ -133,3 +133,19 @@ void au_loopback_fin(void)
@@ -190,7 +190,7 @@ index 9ba35a878ecd..4ed0ff03d5ab 100644
 +	return f;
 +}
 diff --git a/fs/aufs/loop.h b/fs/aufs/loop.h
-index f31e40aff267..e13fb1a0717a 100644
+index 94f4f80ae33b..ca1194354aff 100644
 --- a/fs/aufs/loop.h
 +++ b/fs/aufs/loop.h
 @@ -26,6 +26,8 @@ void au_warn_loopback(struct super_block *h_sb);
@@ -212,7 +212,7 @@ index f31e40aff267..e13fb1a0717a 100644
  
  #endif /* __KERNEL__ */
 diff --git a/fs/aufs/super.c b/fs/aufs/super.c
-index a97e2921cb09..f74eb6962684 100644
+index 589dd0122020..801e0a7faec5 100644
 --- a/fs/aufs/super.c
 +++ b/fs/aufs/super.c
 @@ -844,7 +844,10 @@ static const struct super_operations aufs_sop = {
@@ -228,14 +228,14 @@ index a97e2921cb09..f74eb6962684 100644
  
  /* ---------------------------------------------------------------------- */
 diff --git a/include/linux/fs.h b/include/linux/fs.h
-index 3e997d7fc67f..b28d4d0ecaed 100644
+index 5fc7807f7c2e..07e24e72706e 100644
 --- a/include/linux/fs.h
 +++ b/include/linux/fs.h
-@@ -1973,6 +1973,10 @@ struct super_operations {
+@@ -1980,6 +1980,10 @@ struct super_operations {
  				  struct shrink_control *);
  	long (*free_cached_objects)(struct super_block *,
  				    struct shrink_control *);
-+#if defined(CONFIG_BLK_DEV_LOOP) ||  defined(CONFIG_BLK_DEV_LOOP_MODULE)
++#if IS_ENABLED(CONFIG_BLK_DEV_LOOP) || IS_ENABLED(CONFIG_BLK_DEV_LOOP_MODULE)
 +	/* and aufs */
 +	struct file *(*real_loop)(struct file *);
 +#endif
diff --git a/aufs5-mmap.patch b/aufs5-mmap.patch
index afc90b3..12569cf 100644
--- a/aufs5-mmap.patch
+++ b/aufs5-mmap.patch
@@ -1,5 +1,5 @@
 SPDX-License-Identifier: GPL-2.0
-aufs5.4 mmap patch
+aufs5.x-rcN mmap patch
 
 diff --git a/fs/proc/base.c b/fs/proc/base.c
 index ebea9501afb8..dc7edc5f7267 100644
@@ -72,10 +72,10 @@ index 7907e6419e57..d17209cf52bc 100644
  		ino = inode->i_ino;
  		pgoff = (loff_t)vma->vm_pgoff << PAGE_SHIFT;
 diff --git a/include/linux/mm.h b/include/linux/mm.h
-index a2adf95b3f9c..70e1dccc1283 100644
+index cfaa8feecfe8..b66c4c536ac5 100644
 --- a/include/linux/mm.h
 +++ b/include/linux/mm.h
-@@ -1510,6 +1510,28 @@ static inline void unmap_shared_mapping_range(struct address_space *mapping,
+@@ -1495,6 +1495,28 @@ static inline void unmap_shared_mapping_range(struct address_space *mapping,
  	unmap_mapping_range(mapping, holebegin, holelen, 0);
  }
  
@@ -125,10 +125,10 @@ index 270aa8fd2800..33848c2165e2 100644
  
  #ifdef CONFIG_SWAP
 diff --git a/kernel/fork.c b/kernel/fork.c
-index 13b38794efb5..ede7225bae95 100644
+index 080809560072..968e4dc2279f 100644
 --- a/kernel/fork.c
 +++ b/kernel/fork.c
-@@ -562,7 +562,7 @@ static __latent_entropy int dup_mmap(struct mm_struct *mm,
+@@ -565,7 +565,7 @@ static __latent_entropy int dup_mmap(struct mm_struct *mm,
  			struct inode *inode = file_inode(file);
  			struct address_space *mapping = file->f_mapping;
  
@@ -138,7 +138,7 @@ index 13b38794efb5..ede7225bae95 100644
  				atomic_dec(&inode->i_writecount);
  			i_mmap_lock_write(mapping);
 diff --git a/mm/Makefile b/mm/Makefile
-index d996846697ef..fbadb91df4e4 100644
+index 1937cc251883..778c1e399903 100644
 --- a/mm/Makefile
 +++ b/mm/Makefile
 @@ -42,7 +42,7 @@ obj-y			:= filemap.o mempool.o oom_kill.o fadvise.o \
@@ -151,10 +151,10 @@ index d996846697ef..fbadb91df4e4 100644
  # Give 'page_alloc' its own module-parameter namespace
  page-alloc-y := page_alloc.o
 diff --git a/mm/filemap.c b/mm/filemap.c
-index 85b7d087eb45..115275a4a0e2 100644
+index bf6aa30be58d..32ca075c0c8b 100644
 --- a/mm/filemap.c
 +++ b/mm/filemap.c
-@@ -2696,7 +2696,7 @@ vm_fault_t filemap_page_mkwrite(struct vm_fault *vmf)
+@@ -2675,7 +2675,7 @@ vm_fault_t filemap_page_mkwrite(struct vm_fault *vmf)
  	vm_fault_t ret = VM_FAULT_LOCKED;
  
  	sb_start_pagefault(inode->i_sb);
@@ -164,10 +164,10 @@ index 85b7d087eb45..115275a4a0e2 100644
  	if (page->mapping != inode->i_mapping) {
  		unlock_page(page);
 diff --git a/mm/mmap.c b/mm/mmap.c
-index a7d8c84d19b7..9c350dc3f570 100644
+index 71e4ffc83bcd..7256e8b985eb 100644
 --- a/mm/mmap.c
 +++ b/mm/mmap.c
-@@ -182,7 +182,7 @@ static struct vm_area_struct *remove_vma(struct vm_area_struct *vma)
+@@ -176,7 +176,7 @@ static struct vm_area_struct *remove_vma(struct vm_area_struct *vma)
  	if (vma->vm_ops && vma->vm_ops->close)
  		vma->vm_ops->close(vma);
  	if (vma->vm_file)
@@ -176,7 +176,7 @@ index a7d8c84d19b7..9c350dc3f570 100644
  	mpol_put(vma_policy(vma));
  	vm_area_free(vma);
  	return next;
-@@ -940,7 +940,7 @@ int __vma_adjust(struct vm_area_struct *vma, unsigned long start,
+@@ -909,7 +909,7 @@ int __vma_adjust(struct vm_area_struct *vma, unsigned long start,
  	if (remove_next) {
  		if (file) {
  			uprobe_munmap(next, next->vm_start, next->vm_end);
@@ -185,7 +185,7 @@ index a7d8c84d19b7..9c350dc3f570 100644
  		}
  		if (next->anon_vma)
  			anon_vma_merge(vma, next);
-@@ -1865,8 +1865,8 @@ unsigned long mmap_region(struct file *file, unsigned long addr,
+@@ -1837,8 +1837,8 @@ unsigned long mmap_region(struct file *file, unsigned long addr,
  	return addr;
  
  unmap_and_free_vma:
@@ -195,7 +195,7 @@ index a7d8c84d19b7..9c350dc3f570 100644
  
  	/* Undo any partial mapping done by a device driver. */
  	unmap_region(mm, vma, prev, vma->vm_start, vma->vm_end);
-@@ -2695,7 +2695,7 @@ int __split_vma(struct mm_struct *mm, struct vm_area_struct *vma,
+@@ -2667,7 +2667,7 @@ int __split_vma(struct mm_struct *mm, struct vm_area_struct *vma,
  		goto out_free_mpol;
  
  	if (new->vm_file)
@@ -204,7 +204,7 @@ index a7d8c84d19b7..9c350dc3f570 100644
  
  	if (new->vm_ops && new->vm_ops->open)
  		new->vm_ops->open(new);
-@@ -2714,7 +2714,7 @@ int __split_vma(struct mm_struct *mm, struct vm_area_struct *vma,
+@@ -2686,7 +2686,7 @@ int __split_vma(struct mm_struct *mm, struct vm_area_struct *vma,
  	if (new->vm_ops && new->vm_ops->close)
  		new->vm_ops->close(new);
  	if (new->vm_file)
@@ -213,7 +213,7 @@ index a7d8c84d19b7..9c350dc3f570 100644
  	unlink_anon_vmas(new);
   out_free_mpol:
  	mpol_put(vma_policy(new));
-@@ -2906,7 +2906,7 @@ SYSCALL_DEFINE5(remap_file_pages, unsigned long, start, unsigned long, size,
+@@ -2878,7 +2878,7 @@ SYSCALL_DEFINE5(remap_file_pages, unsigned long, start, unsigned long, size,
  	struct vm_area_struct *vma;
  	unsigned long populate = 0;
  	unsigned long ret = -EINVAL;
@@ -222,7 +222,7 @@ index a7d8c84d19b7..9c350dc3f570 100644
  
  	pr_warn_once("%s (%d) uses deprecated remap_file_pages() syscall. See Documentation/vm/remap_file_pages.rst.\n",
  		     current->comm, current->pid);
-@@ -2981,10 +2981,27 @@ SYSCALL_DEFINE5(remap_file_pages, unsigned long, start, unsigned long, size,
+@@ -2953,10 +2953,27 @@ SYSCALL_DEFINE5(remap_file_pages, unsigned long, start, unsigned long, size,
  		}
  	}
  
@@ -251,7 +251,7 @@ index a7d8c84d19b7..9c350dc3f570 100644
  out:
  	up_write(&mm->mmap_sem);
  	if (populate)
-@@ -3274,7 +3291,7 @@ struct vm_area_struct *copy_vma(struct vm_area_struct **vmap,
+@@ -3247,7 +3264,7 @@ struct vm_area_struct *copy_vma(struct vm_area_struct **vmap,
  		if (anon_vma_clone(new_vma, vma))
  			goto out_free_mempol;
  		if (new_vma->vm_file)
@@ -261,10 +261,10 @@ index a7d8c84d19b7..9c350dc3f570 100644
  			new_vma->vm_ops->open(new_vma);
  		vma_link(mm, new_vma, prev, rb_link, rb_parent);
 diff --git a/mm/nommu.c b/mm/nommu.c
-index 99b7ec318824..de5b6cd162fe 100644
+index bd2b4e5ef144..acdab5253263 100644
 --- a/mm/nommu.c
 +++ b/mm/nommu.c
-@@ -552,7 +552,7 @@ static void __put_nommu_region(struct vm_region *region)
+@@ -563,7 +563,7 @@ static void __put_nommu_region(struct vm_region *region)
  		up_write(&nommu_region_sem);
  
  		if (region->vm_file)
@@ -273,7 +273,7 @@ index 99b7ec318824..de5b6cd162fe 100644
  
  		/* IO memory and memory shared directly out of the pagecache
  		 * from ramfs/tmpfs mustn't be released here */
-@@ -690,7 +690,7 @@ static void delete_vma(struct mm_struct *mm, struct vm_area_struct *vma)
+@@ -695,7 +695,7 @@ static void delete_vma(struct mm_struct *mm, struct vm_area_struct *vma)
  	if (vma->vm_ops && vma->vm_ops->close)
  		vma->vm_ops->close(vma);
  	if (vma->vm_file)
@@ -282,7 +282,7 @@ index 99b7ec318824..de5b6cd162fe 100644
  	put_nommu_region(vma->vm_region);
  	vm_area_free(vma);
  }
-@@ -1213,7 +1213,7 @@ unsigned long do_mmap(struct file *file,
+@@ -1218,7 +1218,7 @@ unsigned long do_mmap(struct file *file,
  					goto error_just_free;
  				}
  			}
@@ -291,7 +291,7 @@ index 99b7ec318824..de5b6cd162fe 100644
  			kmem_cache_free(vm_region_jar, region);
  			region = pregion;
  			result = start;
-@@ -1290,10 +1290,10 @@ unsigned long do_mmap(struct file *file,
+@@ -1295,10 +1295,10 @@ unsigned long do_mmap(struct file *file,
  	up_write(&nommu_region_sem);
  error:
  	if (region->vm_file)
@@ -306,7 +306,7 @@ index 99b7ec318824..de5b6cd162fe 100644
  
 diff --git a/mm/prfile.c b/mm/prfile.c
 new file mode 100644
-index 000000000000..024cdcfae1b1
+index 000000000000..00d51187c325
 --- /dev/null
 +++ b/mm/prfile.c
 @@ -0,0 +1,86 @@
@@ -318,7 +318,7 @@ index 000000000000..024cdcfae1b1
 + *
 + * See Documentation/filesystems/aufs/design/06mmap.txt
 + *
-+ * Copyright (c) 2014-2019 Junjro R. Okajima
++ * Copyright (c) 2014-2020 Junjro R. Okajima
 + * Copyright (c) 2014 Ian Campbell
 + */
 +
diff --git a/aufs5-standalone.patch b/aufs5-standalone.patch
index 4085857..88f134c 100644
--- a/aufs5-standalone.patch
+++ b/aufs5-standalone.patch
@@ -1,11 +1,11 @@
 SPDX-License-Identifier: GPL-2.0
-aufs5.4 standalone patch
+aufs5.x-rcN standalone patch
 
 diff --git a/fs/dcache.c b/fs/dcache.c
-index 7ce4ccf5a51c..00d7e6a08026 100644
+index 046000653e4d..15aa871d1b45 100644
 --- a/fs/dcache.c
 +++ b/fs/dcache.c
-@@ -1369,6 +1369,7 @@ void d_walk(struct dentry *parent, void *data,
+@@ -1371,6 +1371,7 @@ void d_walk(struct dentry *parent, void *data,
  	seq = 1;
  	goto again;
  }
@@ -13,7 +13,7 @@ index 7ce4ccf5a51c..00d7e6a08026 100644
  
  struct check_mount {
  	struct vfsmount *mnt;
-@@ -2914,6 +2915,7 @@ void d_exchange(struct dentry *dentry1, struct dentry *dentry2)
+@@ -2916,6 +2917,7 @@ void d_exchange(struct dentry *dentry1, struct dentry *dentry2)
  
  	write_sequnlock(&rename_lock);
  }
@@ -22,10 +22,10 @@ index 7ce4ccf5a51c..00d7e6a08026 100644
  /**
   * d_ancestor - search for an ancestor
 diff --git a/fs/exec.c b/fs/exec.c
-index 555e93c7dec8..dad39c6b3878 100644
+index 74d88dab98dd..71eb4fcace94 100644
 --- a/fs/exec.c
 +++ b/fs/exec.c
-@@ -110,6 +110,7 @@ bool path_noexec(const struct path *path)
+@@ -109,6 +109,7 @@ bool path_noexec(const struct path *path)
  	return (path->mnt->mnt_flags & MNT_NOEXEC) ||
  	       (path->mnt->mnt_sb->s_iflags & SB_I_NOEXEC);
  }
@@ -34,10 +34,10 @@ index 555e93c7dec8..dad39c6b3878 100644
  #ifdef CONFIG_USELIB
  /*
 diff --git a/fs/fcntl.c b/fs/fcntl.c
-index d62303c5472a..d4ad34463848 100644
+index b0935c67bd1e..07251ba86c31 100644
 --- a/fs/fcntl.c
 +++ b/fs/fcntl.c
-@@ -85,6 +85,7 @@ int setfl(int fd, struct file * filp, unsigned long arg)
+@@ -85,6 +85,7 @@ int setfl(int fd, struct file *filp, unsigned long arg)
   out:
  	return error;
  }
@@ -66,10 +66,10 @@ index 30d55c9a1744..34b9bbf4c556 100644
  void __init files_init(void)
  {
 diff --git a/fs/inode.c b/fs/inode.c
-index aaeacde398ee..5be87f2d3828 100644
+index 31796c1040d6..217169541ac4 100644
 --- a/fs/inode.c
 +++ b/fs/inode.c
-@@ -1682,6 +1682,7 @@ int update_time(struct inode *inode, struct timespec64 *time, int flags)
+@@ -1689,6 +1689,7 @@ int update_time(struct inode *inode, struct timespec64 *time, int flags)
  
  	return update_time(inode, time, flags);
  }
@@ -78,7 +78,7 @@ index aaeacde398ee..5be87f2d3828 100644
  /**
   *	touch_atime	-	update the access time
 diff --git a/fs/namespace.c b/fs/namespace.c
-index 0f7e57e5f4b7..516c2f397d33 100644
+index c05ac2488abb..100b7839c8b0 100644
 --- a/fs/namespace.c
 +++ b/fs/namespace.c
 @@ -431,6 +431,7 @@ void __mnt_drop_write(struct vfsmount *mnt)
@@ -130,7 +130,7 @@ index b62f5c0923a8..89af4b9c7319 100644
  long vfs_truncate(const struct path *path, loff_t length)
  {
 diff --git a/fs/read_write.c b/fs/read_write.c
-index 3265bb84f152..5b2dbddb0efe 100644
+index fa9b3994b34c..eb0e2c6ebaff 100644
 --- a/fs/read_write.c
 +++ b/fs/read_write.c
 @@ -468,6 +468,7 @@ ssize_t vfs_read(struct file *file, char __user *buf, size_t count, loff_t *pos)
@@ -143,7 +143,7 @@ index 3265bb84f152..5b2dbddb0efe 100644
  {
 @@ -508,6 +509,7 @@ vfs_readf_t vfs_readf(struct file *file)
  		return new_sync_read;
- 	return ERR_PTR(-ENOSYS);
+ 	return ERR_PTR(-ENOSYS); /* doesn't have ->read(|_iter)() op */
  }
 +EXPORT_SYMBOL_GPL(vfs_readf);
  
@@ -151,7 +151,7 @@ index 3265bb84f152..5b2dbddb0efe 100644
  {
 @@ -519,6 +521,7 @@ vfs_writef_t vfs_writef(struct file *file)
  		return new_sync_write;
- 	return ERR_PTR(-ENOSYS);
+ 	return ERR_PTR(-ENOSYS); /* doesn't have ->write(|_iter)() op */
  }
 +EXPORT_SYMBOL_GPL(vfs_writef);
  
@@ -166,10 +166,10 @@ index 3265bb84f152..5b2dbddb0efe 100644
  /* file_ppos returns &file->f_pos or NULL if file is stream */
  static inline loff_t *file_ppos(struct file *file)
 diff --git a/fs/splice.c b/fs/splice.c
-index 75b489fcb66f..0a1f7498c22b 100644
+index d9bcc4a71a0a..bf8725e99070 100644
 --- a/fs/splice.c
 +++ b/fs/splice.c
-@@ -847,6 +847,7 @@ long do_splice_from(struct pipe_inode_info *pipe, struct file *out,
+@@ -862,6 +862,7 @@ long do_splice_from(struct pipe_inode_info *pipe, struct file *out,
  
  	return splice_write(pipe, out, ppos, len, flags);
  }
@@ -177,7 +177,7 @@ index 75b489fcb66f..0a1f7498c22b 100644
  
  /*
   * Attempt to initiate a splice from a file to a pipe.
-@@ -876,6 +877,7 @@ long do_splice_to(struct file *in, loff_t *ppos,
+@@ -891,6 +892,7 @@ long do_splice_to(struct file *in, loff_t *ppos,
  
  	return splice_read(in, ppos, pipe, len, flags);
  }
@@ -210,7 +210,7 @@ index 90dd78f0eb27..40b01dd1b14a 100644
  ssize_t
  __vfs_getxattr(struct dentry *dentry, struct inode *inode, const char *name,
 diff --git a/kernel/locking/lockdep.c b/kernel/locking/lockdep.c
-index 407c08ac8ac8..d7f71842f8a2 100644
+index e52169c2086b..d9bc5cbe9078 100644
 --- a/kernel/locking/lockdep.c
 +++ b/kernel/locking/lockdep.c
 @@ -174,6 +174,7 @@ inline struct lock_class *lockdep_hlock_class(struct held_lock *hlock)
@@ -230,17 +230,8 @@ index 0fef395662a6..83fb1ecfc33d 100644
  	}
  }
 +EXPORT_SYMBOL_GPL(task_work_run);
-diff --git a/security/device_cgroup.c b/security/device_cgroup.c
-index 725674f3276d..83f6494c52a2 100644
---- a/security/device_cgroup.c
-+++ b/security/device_cgroup.c
-@@ -824,3 +824,4 @@ int __devcgroup_check_permission(short type, u32 major, u32 minor,
- 
- 	return 0;
- }
-+EXPORT_SYMBOL_GPL(__devcgroup_check_permission);
 diff --git a/security/security.c b/security/security.c
-index 1bc000f834e2..306f2c9f7ee2 100644
+index cd2d18d2d279..fbf716450399 100644
 --- a/security/security.c
 +++ b/security/security.c
 @@ -1036,6 +1036,7 @@ int security_path_rmdir(const struct path *dir, struct dentry *dentry)
diff --git a/aufs5.4-20191223.patch b/aufs5.x-rcN-20200127.patch
similarity index 98%
rename from aufs5.4-20191223.patch
rename to aufs5.x-rcN-20200127.patch
index 22f049a..7adcb84 100644
--- a/aufs5.4-20191223.patch
+++ b/aufs5.x-rcN-20200127.patch
@@ -1,6 +1,6 @@
-diff -Naur null/Documentation/ABI/testing/debugfs-aufs linux-5.4/Documentation/ABI/testing/debugfs-aufs
+diff -Naur null/Documentation/ABI/testing/debugfs-aufs linux-5.x-rcN/Documentation/ABI/testing/debugfs-aufs
 --- /dev/null
-+++ linux-5.4/Documentation/ABI/testing/debugfs-aufs	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/ABI/testing/debugfs-aufs	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,55 @@
 +What:		/debug/aufs/si_<id>/
 +Date:		March 2009
@@ -57,9 +57,9 @@ diff -Naur null/Documentation/ABI/testing/debugfs-aufs linux-5.4/Documentation/A
 +		be created.
 +		When the aufs mount option 'noxino' is specified, it
 +		will be empty. About XINO files, see the aufs manual.
-diff -Naur null/Documentation/ABI/testing/sysfs-aufs linux-5.4/Documentation/ABI/testing/sysfs-aufs
+diff -Naur null/Documentation/ABI/testing/sysfs-aufs linux-5.x-rcN/Documentation/ABI/testing/sysfs-aufs
 --- /dev/null
-+++ linux-5.4/Documentation/ABI/testing/sysfs-aufs	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/ABI/testing/sysfs-aufs	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,31 @@
 +What:		/sys/fs/aufs/si_<id>/
 +Date:		March 2009
@@ -92,10 +92,10 @@ diff -Naur null/Documentation/ABI/testing/sysfs-aufs linux-5.4/Documentation/ABI
 +		even if it is the default path.
 +		When the aufs mount option 'noxino' is specified, it
 +		will be empty. About XINO files, see the aufs manual.
-diff -Naur null/Documentation/filesystems/aufs/README linux-5.4/Documentation/filesystems/aufs/README
+diff -Naur null/Documentation/filesystems/aufs/README linux-5.x-rcN/Documentation/filesystems/aufs/README
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/README	2020-01-05 17:54:14.807458921 +0100
-@@ -0,0 +1,400 @@
++++ linux-5.x-rcN/Documentation/filesystems/aufs/README	2020-01-27 10:04:26.404487515 +0100
+@@ -0,0 +1,401 @@
 +
 +Aufs5 -- advanced multi layered unification filesystem version 5.x
 +http://aufs.sf.net
@@ -421,6 +421,7 @@ diff -Naur null/Documentation/filesystems/aufs/README linux-5.4/Documentation/fi
 +  system, instead of the date you downloaded.
 +- configuration (define/undefine CONFIG_AUFS_xxx)
 +- kernel configuration or /proc/config.gz (if you have it)
++- LSM (linux security module, if you are using)
 +- behaviour which you think to be incorrect
 +- actual operation, reproducible one is better
 +- mailto: aufs-users at lists.sourceforge.net
@@ -496,12 +497,12 @@ diff -Naur null/Documentation/filesystems/aufs/README linux-5.4/Documentation/fi
 +# Local variables: ;
 +# mode: text;
 +# End: ;
-diff -Naur null/Documentation/filesystems/aufs/design/01intro.txt linux-5.4/Documentation/filesystems/aufs/design/01intro.txt
+diff -Naur null/Documentation/filesystems/aufs/design/01intro.txt linux-5.x-rcN/Documentation/filesystems/aufs/design/01intro.txt
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/design/01intro.txt	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/filesystems/aufs/design/01intro.txt	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,171 @@
 +
-+# Copyright (C) 2005-2019 Junjiro R. Okajima
++# Copyright (C) 2005-2020 Junjiro R. Okajima
 +# 
 +# This program is free software; you can redistribute it and/or modify
 +# it under the terms of the GNU General Public License as published by
@@ -671,12 +672,12 @@ diff -Naur null/Documentation/filesystems/aufs/design/01intro.txt linux-5.4/Docu
 +Some people may think it is better to pass such work to user space
 +helper, instead of doing in kernel space. Actually I am still thinking
 +about it. But currently I have implemented it in kernel space.
-diff -Naur null/Documentation/filesystems/aufs/design/02struct.txt linux-5.4/Documentation/filesystems/aufs/design/02struct.txt
+diff -Naur null/Documentation/filesystems/aufs/design/02struct.txt linux-5.x-rcN/Documentation/filesystems/aufs/design/02struct.txt
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/design/02struct.txt	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/filesystems/aufs/design/02struct.txt	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,258 @@
 +
-+# Copyright (C) 2005-2019 Junjiro R. Okajima
++# Copyright (C) 2005-2020 Junjiro R. Okajima
 +# 
 +# This program is free software; you can redistribute it and/or modify
 +# it under the terms of the GNU General Public License as published by
@@ -933,12 +934,12 @@ diff -Naur null/Documentation/filesystems/aufs/design/02struct.txt linux-5.4/Doc
 +- etc.
 +
 +For this purpose, use "aumvdown" command in aufs-util.git.
-diff -Naur null/Documentation/filesystems/aufs/design/03atomic_open.txt linux-5.4/Documentation/filesystems/aufs/design/03atomic_open.txt
+diff -Naur null/Documentation/filesystems/aufs/design/03atomic_open.txt linux-5.x-rcN/Documentation/filesystems/aufs/design/03atomic_open.txt
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/design/03atomic_open.txt	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/filesystems/aufs/design/03atomic_open.txt	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,85 @@
 +
-+# Copyright (C) 2015-2019 Junjiro R. Okajima
++# Copyright (C) 2015-2020 Junjiro R. Okajima
 +# 
 +# This program is free software; you can redistribute it and/or modify
 +# it under the terms of the GNU General Public License as published by
@@ -1022,12 +1023,12 @@ diff -Naur null/Documentation/filesystems/aufs/design/03atomic_open.txt linux-5.
 +       ->atomic_open() are lost. in the ordinary case, the checks are
 +       done by VFS:do_last(), lookup_open() and atomic_open(). some can
 +       be implemented in aufs, but not all I am afraid.
-diff -Naur null/Documentation/filesystems/aufs/design/03lookup.txt linux-5.4/Documentation/filesystems/aufs/design/03lookup.txt
+diff -Naur null/Documentation/filesystems/aufs/design/03lookup.txt linux-5.x-rcN/Documentation/filesystems/aufs/design/03lookup.txt
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/design/03lookup.txt	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/filesystems/aufs/design/03lookup.txt	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,113 @@
 +
-+# Copyright (C) 2005-2019 Junjiro R. Okajima
++# Copyright (C) 2005-2020 Junjiro R. Okajima
 +# 
 +# This program is free software; you can redistribute it and/or modify
 +# it under the terms of the GNU General Public License as published by
@@ -1139,12 +1140,12 @@ diff -Naur null/Documentation/filesystems/aufs/design/03lookup.txt linux-5.4/Doc
 +   test, and skip the revalidation in step 4. It is useful and improves
 +   aufs performance when system surely hide the aufs branches from user,
 +   by over-mounting something (or another method).
-diff -Naur null/Documentation/filesystems/aufs/design/04branch.txt linux-5.4/Documentation/filesystems/aufs/design/04branch.txt
+diff -Naur null/Documentation/filesystems/aufs/design/04branch.txt linux-5.x-rcN/Documentation/filesystems/aufs/design/04branch.txt
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/design/04branch.txt	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/filesystems/aufs/design/04branch.txt	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,74 @@
 +
-+# Copyright (C) 2005-2019 Junjiro R. Okajima
++# Copyright (C) 2005-2020 Junjiro R. Okajima
 +# 
 +# This program is free software; you can redistribute it and/or modify
 +# it under the terms of the GNU General Public License as published by
@@ -1217,12 +1218,12 @@ diff -Naur null/Documentation/filesystems/aufs/design/04branch.txt linux-5.4/Doc
 +  - a file on the branch is mmap-ed.
 +  - a regular file on the branch is opened for write and there is no
 +    same named entry on the upper branch.
-diff -Naur null/Documentation/filesystems/aufs/design/05wbr_policy.txt linux-5.4/Documentation/filesystems/aufs/design/05wbr_policy.txt
+diff -Naur null/Documentation/filesystems/aufs/design/05wbr_policy.txt linux-5.x-rcN/Documentation/filesystems/aufs/design/05wbr_policy.txt
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/design/05wbr_policy.txt	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/filesystems/aufs/design/05wbr_policy.txt	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,64 @@
 +
-+# Copyright (C) 2005-2019 Junjiro R. Okajima
++# Copyright (C) 2005-2020 Junjiro R. Okajima
 +# 
 +# This program is free software; you can redistribute it and/or modify
 +# it under the terms of the GNU General Public License as published by
@@ -1285,9 +1286,9 @@ diff -Naur null/Documentation/filesystems/aufs/design/05wbr_policy.txt linux-5.4
 +  where the source and the target exists and selects the higher
 +  one. If the selected branch is readonly, then aufs follows the
 +  copyup policy.
-diff -Naur null/Documentation/filesystems/aufs/design/06dirren.dot linux-5.4/Documentation/filesystems/aufs/design/06dirren.dot
+diff -Naur null/Documentation/filesystems/aufs/design/06dirren.dot linux-5.x-rcN/Documentation/filesystems/aufs/design/06dirren.dot
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/design/06dirren.dot	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/filesystems/aufs/design/06dirren.dot	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,31 @@
 +
 +// to view this graph, run dot(1) command in GRAPHVIZ.
@@ -1320,12 +1321,12 @@ diff -Naur null/Documentation/filesystems/aufs/design/06dirren.dot linux-5.4/Doc
 +
 +aufs_lookup -> whinfo [label="load/remove"];
 +}
-diff -Naur null/Documentation/filesystems/aufs/design/06dirren.txt linux-5.4/Documentation/filesystems/aufs/design/06dirren.txt
+diff -Naur null/Documentation/filesystems/aufs/design/06dirren.txt linux-5.x-rcN/Documentation/filesystems/aufs/design/06dirren.txt
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/design/06dirren.txt	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/filesystems/aufs/design/06dirren.txt	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,102 @@
 +
-+# Copyright (C) 2017-2019 Junjiro R. Okajima
++# Copyright (C) 2017-2020 Junjiro R. Okajima
 +#
 +# This program is free software; you can redistribute it and/or modify
 +# it under the terms of the GNU General Public License as published by
@@ -1426,12 +1427,12 @@ diff -Naur null/Documentation/filesystems/aufs/design/06dirren.txt linux-5.4/Doc
 +contains two names, before- and after-rename, the name comparision in
 +UDBA handler may not work correctly. In this case, the behaviour will be
 +equivalen to udba=reval case.
-diff -Naur null/Documentation/filesystems/aufs/design/06fhsm.txt linux-5.4/Documentation/filesystems/aufs/design/06fhsm.txt
+diff -Naur null/Documentation/filesystems/aufs/design/06fhsm.txt linux-5.x-rcN/Documentation/filesystems/aufs/design/06fhsm.txt
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/design/06fhsm.txt	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/filesystems/aufs/design/06fhsm.txt	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,120 @@
 +
-+# Copyright (C) 2011-2019 Junjiro R. Okajima
++# Copyright (C) 2011-2020 Junjiro R. Okajima
 +# 
 +# This program is free software; you can redistribute it and/or modify
 +# it under the terms of the GNU General Public License as published by
@@ -1550,12 +1551,12 @@ diff -Naur null/Documentation/filesystems/aufs/design/06fhsm.txt linux-5.4/Docum
 +
 +And of course, in every step, an error may happen. So the operation
 +should restore the original file state after an error happens.
-diff -Naur null/Documentation/filesystems/aufs/design/06mmap.txt linux-5.4/Documentation/filesystems/aufs/design/06mmap.txt
+diff -Naur null/Documentation/filesystems/aufs/design/06mmap.txt linux-5.x-rcN/Documentation/filesystems/aufs/design/06mmap.txt
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/design/06mmap.txt	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/filesystems/aufs/design/06mmap.txt	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,72 @@
 +
-+# Copyright (C) 2005-2019 Junjiro R. Okajima
++# Copyright (C) 2005-2020 Junjiro R. Okajima
 +# 
 +# This program is free software; you can redistribute it and/or modify
 +# it under the terms of the GNU General Public License as published by
@@ -1626,12 +1627,12 @@ diff -Naur null/Documentation/filesystems/aufs/design/06mmap.txt linux-5.4/Docum
 +  equivalent to vm_prfile described above.
 +
 +I have to give up this "looks-smater" approach.
-diff -Naur null/Documentation/filesystems/aufs/design/06xattr.txt linux-5.4/Documentation/filesystems/aufs/design/06xattr.txt
+diff -Naur null/Documentation/filesystems/aufs/design/06xattr.txt linux-5.x-rcN/Documentation/filesystems/aufs/design/06xattr.txt
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/design/06xattr.txt	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/filesystems/aufs/design/06xattr.txt	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,96 @@
 +
-+# Copyright (C) 2014-2019 Junjiro R. Okajima
++# Copyright (C) 2014-2020 Junjiro R. Okajima
 +#
 +# This program is free software; you can redistribute it and/or modify
 +# it under the terms of the GNU General Public License as published by
@@ -1726,12 +1727,12 @@ diff -Naur null/Documentation/filesystems/aufs/design/06xattr.txt linux-5.4/Docu
 +Some contradiction may happen I am afraid.
 +Do we need another attribute to stop copying XATTR? I am unsure. For
 +now, aufs implements the branch attributes to ignore the error.
-diff -Naur null/Documentation/filesystems/aufs/design/07export.txt linux-5.4/Documentation/filesystems/aufs/design/07export.txt
+diff -Naur null/Documentation/filesystems/aufs/design/07export.txt linux-5.x-rcN/Documentation/filesystems/aufs/design/07export.txt
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/design/07export.txt	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/filesystems/aufs/design/07export.txt	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,58 @@
 +
-+# Copyright (C) 2005-2019 Junjiro R. Okajima
++# Copyright (C) 2005-2020 Junjiro R. Okajima
 +# 
 +# This program is free software; you can redistribute it and/or modify
 +# it under the terms of the GNU General Public License as published by
@@ -1788,12 +1789,12 @@ diff -Naur null/Documentation/filesystems/aufs/design/07export.txt linux-5.4/Doc
 +  convert it into ESTALE for NFSD.
 +- readdir(): call lockdep_on/off() because filldir in NFSD calls
 +  lookup_one_len(), vfs_getattr(), encode_fh() and others.
-diff -Naur null/Documentation/filesystems/aufs/design/08shwh.txt linux-5.4/Documentation/filesystems/aufs/design/08shwh.txt
+diff -Naur null/Documentation/filesystems/aufs/design/08shwh.txt linux-5.x-rcN/Documentation/filesystems/aufs/design/08shwh.txt
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/design/08shwh.txt	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/filesystems/aufs/design/08shwh.txt	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,52 @@
 +
-+# Copyright (C) 2005-2019 Junjiro R. Okajima
++# Copyright (C) 2005-2020 Junjiro R. Okajima
 +# 
 +# This program is free software; you can redistribute it and/or modify
 +# it under the terms of the GNU General Public License as published by
@@ -1844,12 +1845,12 @@ diff -Naur null/Documentation/filesystems/aufs/design/08shwh.txt linux-5.4/Docum
 +
 +This new squashfs archive can be stored on the boot device and the
 +initramfs will use it to replace the old one at the next boot.
-diff -Naur null/Documentation/filesystems/aufs/design/10dynop.txt linux-5.4/Documentation/filesystems/aufs/design/10dynop.txt
+diff -Naur null/Documentation/filesystems/aufs/design/10dynop.txt linux-5.x-rcN/Documentation/filesystems/aufs/design/10dynop.txt
 --- /dev/null
-+++ linux-5.4/Documentation/filesystems/aufs/design/10dynop.txt	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/Documentation/filesystems/aufs/design/10dynop.txt	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,47 @@
 +
-+# Copyright (C) 2010-2019 Junjiro R. Okajima
++# Copyright (C) 2010-2020 Junjiro R. Okajima
 +#
 +# This program is free software; you can redistribute it and/or modify
 +# it under the terms of the GNU General Public License as published by
@@ -1895,9 +1896,9 @@ diff -Naur null/Documentation/filesystems/aufs/design/10dynop.txt linux-5.4/Docu
 +XIP (DAX) mainly.
 +Currently this approach is applied to address_space_operations for
 +regular files only.
-diff -Naur null/fs/aufs/Kconfig linux-5.4/fs/aufs/Kconfig
+diff -Naur null/fs/aufs/Kconfig linux-5.x-rcN/fs/aufs/Kconfig
 --- /dev/null
-+++ linux-5.4/fs/aufs/Kconfig	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/Kconfig	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,199 @@
 +# SPDX-License-Identifier: GPL-2.0
 +config AUFS_FS
@@ -2098,9 +2099,9 @@ diff -Naur null/fs/aufs/Kconfig linux-5.4/fs/aufs/Kconfig
 +	Automatic configuration for internal use.
 +	When aufs supports Magic SysRq, enabled automatically.
 +endif
-diff -Naur null/fs/aufs/Makefile linux-5.4/fs/aufs/Makefile
+diff -Naur null/fs/aufs/Makefile linux-5.x-rcN/fs/aufs/Makefile
 --- /dev/null
-+++ linux-5.4/fs/aufs/Makefile	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/Makefile	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,46 @@
 +# SPDX-License-Identifier: GPL-2.0
 +
@@ -2148,13 +2149,13 @@ diff -Naur null/fs/aufs/Makefile linux-5.4/fs/aufs/Makefile
 +aufs-$(CONFIG_AUFS_BR_HFSPLUS) += hfsplus.o
 +aufs-$(CONFIG_AUFS_DEBUG) += debug.o
 +aufs-$(CONFIG_AUFS_MAGIC_SYSRQ) += sysrq.o
-diff -Naur null/fs/aufs/aufs.h linux-5.4/fs/aufs/aufs.h
+diff -Naur null/fs/aufs/aufs.h linux-5.x-rcN/fs/aufs/aufs.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/aufs.h	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/aufs.h	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,62 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -2214,13 +2215,13 @@ diff -Naur null/fs/aufs/aufs.h linux-5.4/fs/aufs/aufs.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_H__ */
-diff -Naur null/fs/aufs/branch.c linux-5.4/fs/aufs/branch.c
+diff -Naur null/fs/aufs/branch.c linux-5.x-rcN/fs/aufs/branch.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/branch.c	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/branch.c	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,1428 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -3646,13 +3647,13 @@ diff -Naur null/fs/aufs/branch.c linux-5.4/fs/aufs/branch.c
 +
 +	return err;
 +}
-diff -Naur null/fs/aufs/branch.h linux-5.4/fs/aufs/branch.h
+diff -Naur null/fs/aufs/branch.h linux-5.x-rcN/fs/aufs/branch.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/branch.h	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/branch.h	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,366 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -4016,9 +4017,9 @@ diff -Naur null/fs/aufs/branch.h linux-5.4/fs/aufs/branch.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_BRANCH_H__ */
-diff -Naur null/fs/aufs/conf.mk linux-5.4/fs/aufs/conf.mk
+diff -Naur null/fs/aufs/conf.mk linux-5.x-rcN/fs/aufs/conf.mk
 --- /dev/null
-+++ linux-5.4/fs/aufs/conf.mk	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/conf.mk	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,40 @@
 +# SPDX-License-Identifier: GPL-2.0
 +
@@ -4060,13 +4061,13 @@ diff -Naur null/fs/aufs/conf.mk linux-5.4/fs/aufs/conf.mk
 +${obj}/sysfs.o: ${AuConfName}
 +
 +-include ${srctree}/${src}/conf_priv.mk
-diff -Naur null/fs/aufs/cpup.c linux-5.4/fs/aufs/cpup.c
+diff -Naur null/fs/aufs/cpup.c linux-5.x-rcN/fs/aufs/cpup.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/cpup.c	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/cpup.c	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,1458 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -5522,13 +5523,13 @@ diff -Naur null/fs/aufs/cpup.c linux-5.4/fs/aufs/cpup.c
 +	dput(parent);
 +	return err;
 +}
-diff -Naur null/fs/aufs/cpup.h linux-5.4/fs/aufs/cpup.h
+diff -Naur null/fs/aufs/cpup.h linux-5.x-rcN/fs/aufs/cpup.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/cpup.h	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/cpup.h	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,100 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -5626,13 +5627,13 @@ diff -Naur null/fs/aufs/cpup.h linux-5.4/fs/aufs/cpup.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_CPUP_H__ */
-diff -Naur null/fs/aufs/dbgaufs.c linux-5.4/fs/aufs/dbgaufs.c
+diff -Naur null/fs/aufs/dbgaufs.c linux-5.x-rcN/fs/aufs/dbgaufs.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/dbgaufs.c	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/dbgaufs.c	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,526 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -6156,13 +6157,13 @@ diff -Naur null/fs/aufs/dbgaufs.c linux-5.4/fs/aufs/dbgaufs.c
 +		err = 0;
 +	return err;
 +}
-diff -Naur null/fs/aufs/dbgaufs.h linux-5.4/fs/aufs/dbgaufs.h
+diff -Naur null/fs/aufs/dbgaufs.h linux-5.x-rcN/fs/aufs/dbgaufs.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/dbgaufs.h	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/dbgaufs.h	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,53 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -6213,13 +6214,13 @@ diff -Naur null/fs/aufs/dbgaufs.h linux-5.4/fs/aufs/dbgaufs.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __DBGAUFS_H__ */
-diff -Naur null/fs/aufs/dcsub.c linux-5.4/fs/aufs/dcsub.c
+diff -Naur null/fs/aufs/dcsub.c linux-5.x-rcN/fs/aufs/dcsub.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/dcsub.c	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/dcsub.c	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,225 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -6442,13 +6443,13 @@ diff -Naur null/fs/aufs/dcsub.c linux-5.4/fs/aufs/dcsub.c
 +
 +	return path_is_under(path + 0, path + 1);
 +}
-diff -Naur null/fs/aufs/dcsub.h linux-5.4/fs/aufs/dcsub.h
+diff -Naur null/fs/aufs/dcsub.h linux-5.x-rcN/fs/aufs/dcsub.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/dcsub.h	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/dcsub.h	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,137 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -6583,13 +6584,13 @@ diff -Naur null/fs/aufs/dcsub.h linux-5.4/fs/aufs/dcsub.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_DCSUB_H__ */
-diff -Naur null/fs/aufs/debug.c linux-5.4/fs/aufs/debug.c
+diff -Naur null/fs/aufs/debug.c linux-5.x-rcN/fs/aufs/debug.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/debug.c	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/debug.c	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,441 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -7028,13 +7029,13 @@ diff -Naur null/fs/aufs/debug.c linux-5.4/fs/aufs/debug.c
 +
 +	return 0;
 +}
-diff -Naur null/fs/aufs/debug.h linux-5.4/fs/aufs/debug.h
+diff -Naur null/fs/aufs/debug.h linux-5.x-rcN/fs/aufs/debug.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/debug.h	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/debug.h	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,226 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -7258,13 +7259,13 @@ diff -Naur null/fs/aufs/debug.h linux-5.4/fs/aufs/debug.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_DEBUG_H__ */
-diff -Naur null/fs/aufs/dentry.c linux-5.4/fs/aufs/dentry.c
+diff -Naur null/fs/aufs/dentry.c linux-5.x-rcN/fs/aufs/dentry.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/dentry.c	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/dentry.c	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,1154 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -8416,13 +8417,13 @@ diff -Naur null/fs/aufs/dentry.c linux-5.4/fs/aufs/dentry.c
 +const struct dentry_operations aufs_dop_noreval = {
 +	.d_release		= aufs_d_release
 +};
-diff -Naur null/fs/aufs/dentry.h linux-5.4/fs/aufs/dentry.h
+diff -Naur null/fs/aufs/dentry.h linux-5.x-rcN/fs/aufs/dentry.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/dentry.h	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/dentry.h	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,268 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -8688,13 +8689,13 @@ diff -Naur null/fs/aufs/dentry.h linux-5.4/fs/aufs/dentry.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_DENTRY_H__ */
-diff -Naur null/fs/aufs/dinfo.c linux-5.4/fs/aufs/dinfo.c
+diff -Naur null/fs/aufs/dinfo.c linux-5.x-rcN/fs/aufs/dinfo.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/dinfo.c	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/dinfo.c	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,554 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -9246,13 +9247,13 @@ diff -Naur null/fs/aufs/dinfo.c linux-5.4/fs/aufs/dinfo.c
 +			return bindex;
 +	return -1;
 +}
-diff -Naur null/fs/aufs/dir.c linux-5.4/fs/aufs/dir.c
+diff -Naur null/fs/aufs/dir.c linux-5.x-rcN/fs/aufs/dir.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/dir.c	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/dir.c	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,763 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -10013,13 +10014,13 @@ diff -Naur null/fs/aufs/dir.c linux-5.4/fs/aufs/dir.c
 +	.flush		= aufs_flush_dir,
 +	.fsync		= aufs_fsync_dir
 +};
-diff -Naur null/fs/aufs/dir.h linux-5.4/fs/aufs/dir.h
+diff -Naur null/fs/aufs/dir.h linux-5.x-rcN/fs/aufs/dir.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/dir.h	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/dir.h	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,134 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -10151,13 +10152,13 @@ diff -Naur null/fs/aufs/dir.h linux-5.4/fs/aufs/dir.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_DIR_H__ */
-diff -Naur null/fs/aufs/dirren.c linux-5.4/fs/aufs/dirren.c
+diff -Naur null/fs/aufs/dirren.c linux-5.x-rcN/fs/aufs/dirren.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/dirren.c	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/dirren.c	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,1316 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2017-2019 Junjiro R. Okajima
++ * Copyright (C) 2017-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -10238,7 +10239,7 @@ diff -Naur null/fs/aufs/dirren.c linux-5.4/fs/aufs/dirren.c
 +	found = 0;
 +	idx = au_dr_ihash(ino);
 +	hbl = dr->dr_h_ino + idx;
-+#if 0
++#if 0 /* debug print */
 +	{
 +		struct hlist_bl_node *tmp;
 +
@@ -11471,13 +11472,13 @@ diff -Naur null/fs/aufs/dirren.c linux-5.4/fs/aufs/dirren.c
 +out:
 +	return err;
 +}
-diff -Naur null/fs/aufs/dirren.h linux-5.4/fs/aufs/dirren.h
+diff -Naur null/fs/aufs/dirren.h linux-5.x-rcN/fs/aufs/dirren.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/dirren.h	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/dirren.h	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,140 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2017-2019 Junjiro R. Okajima
++ * Copyright (C) 2017-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -11615,13 +11616,13 @@ diff -Naur null/fs/aufs/dirren.h linux-5.4/fs/aufs/dirren.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_DIRREN_H__ */
-diff -Naur null/fs/aufs/dynop.c linux-5.4/fs/aufs/dynop.c
+diff -Naur null/fs/aufs/dynop.c linux-5.x-rcN/fs/aufs/dynop.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/dynop.c	2020-01-05 17:54:14.807458921 +0100
++++ linux-5.x-rcN/fs/aufs/dynop.c	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,367 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2010-2019 Junjiro R. Okajima
++ * Copyright (C) 2010-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -11986,13 +11987,13 @@ diff -Naur null/fs/aufs/dynop.c linux-5.4/fs/aufs/dynop.c
 +	for (i = 0; i < AuDyLast; i++)
 +		WARN_ON(!hlist_bl_empty(dynop + i));
 +}
-diff -Naur null/fs/aufs/dynop.h linux-5.4/fs/aufs/dynop.h
+diff -Naur null/fs/aufs/dynop.h linux-5.x-rcN/fs/aufs/dynop.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/dynop.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/dynop.h	2020-01-27 10:04:26.404487515 +0100
 @@ -0,0 +1,77 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2010-2019 Junjiro R. Okajima
++ * Copyright (C) 2010-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -12067,13 +12068,13 @@ diff -Naur null/fs/aufs/dynop.h linux-5.4/fs/aufs/dynop.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_DYNOP_H__ */
-diff -Naur null/fs/aufs/export.c linux-5.4/fs/aufs/export.c
+diff -Naur null/fs/aufs/export.c linux-5.x-rcN/fs/aufs/export.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/export.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/export.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,838 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -12909,13 +12910,13 @@ diff -Naur null/fs/aufs/export.c linux-5.4/fs/aufs/export.c
 +	BUILD_BUG_ON(sizeof(u) != sizeof(int));
 +	atomic_set(&sbinfo->si_xigen_next, u);
 +}
-diff -Naur null/fs/aufs/f_op.c linux-5.4/fs/aufs/f_op.c
+diff -Naur null/fs/aufs/f_op.c linux-5.x-rcN/fs/aufs/f_op.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/f_op.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/f_op.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,819 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -13245,7 +13246,7 @@ diff -Naur null/fs/aufs/f_op.c linux-5.4/fs/aufs/f_op.c
 +	if (unlikely(err))
 +		goto out;
 +
-+	err = -ENOSYS;
++	err = -ENOSYS;	/* the branch doesn't have its ->(read|write)_iter() */
 +	iter = NULL;
 +	if (rw == MAY_READ)
 +		iter = h_file->f_op->read_iter;
@@ -13689,7 +13690,7 @@ diff -Naur null/fs/aufs/f_op.c linux-5.4/fs/aufs/f_op.c
 +/* ---------------------------------------------------------------------- */
 +
 +/* no one supports this operation, currently */
-+#if 0
++#if 0 /* reserved for future use */
 +static ssize_t aufs_sendpage(struct file *file, struct page *page, int offset,
 +			     size_t len, loff_t *pos, int more)
 +{
@@ -13725,20 +13726,20 @@ diff -Naur null/fs/aufs/f_op.c linux-5.4/fs/aufs/f_op.c
 +	.setfl		= aufs_setfl,
 +	.splice_write	= aufs_splice_write,
 +	.splice_read	= aufs_splice_read,
-+#if 0
++#if 0 /* reserved for future use */
 +	.aio_splice_write = aufs_aio_splice_write,
 +	.aio_splice_read  = aufs_aio_splice_read,
 +#endif
 +	.fallocate	= aufs_fallocate,
 +	.copy_file_range = aufs_copy_file_range
 +};
-diff -Naur null/fs/aufs/fhsm.c linux-5.4/fs/aufs/fhsm.c
+diff -Naur null/fs/aufs/fhsm.c linux-5.x-rcN/fs/aufs/fhsm.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/fhsm.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/fhsm.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,427 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2011-2019 Junjiro R. Okajima
++ * Copyright (C) 2011-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -14163,13 +14164,13 @@ diff -Naur null/fs/aufs/fhsm.c linux-5.4/fs/aufs/fhsm.c
 +	if (u != AUFS_FHSM_CACHE_DEF_SEC)
 +		seq_printf(seq, ",fhsm_sec=%u", u);
 +}
-diff -Naur null/fs/aufs/file.c linux-5.4/fs/aufs/file.c
+diff -Naur null/fs/aufs/file.c linux-5.x-rcN/fs/aufs/file.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/file.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/file.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,863 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -15030,13 +15031,13 @@ diff -Naur null/fs/aufs/file.c linux-5.4/fs/aufs/file.c
 +	.swap_deactivate	= aufs_swap_deactivate
 +#endif /* CONFIG_AUFS_DEBUG */
 +};
-diff -Naur null/fs/aufs/file.h linux-5.4/fs/aufs/file.h
+diff -Naur null/fs/aufs/file.h linux-5.x-rcN/fs/aufs/file.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/file.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/file.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,342 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -15376,13 +15377,13 @@ diff -Naur null/fs/aufs/file.h linux-5.4/fs/aufs/file.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_FILE_H__ */
-diff -Naur null/fs/aufs/finfo.c linux-5.4/fs/aufs/finfo.c
+diff -Naur null/fs/aufs/finfo.c linux-5.x-rcN/fs/aufs/finfo.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/finfo.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/finfo.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,149 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -15529,13 +15530,13 @@ diff -Naur null/fs/aufs/finfo.c linux-5.4/fs/aufs/finfo.c
 +out:
 +	return err;
 +}
-diff -Naur null/fs/aufs/fstype.h linux-5.4/fs/aufs/fstype.h
+diff -Naur null/fs/aufs/fstype.h linux-5.x-rcN/fs/aufs/fstype.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/fstype.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/fstype.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,401 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -15934,13 +15935,13 @@ diff -Naur null/fs/aufs/fstype.h linux-5.4/fs/aufs/fstype.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_FSTYPE_H__ */
-diff -Naur null/fs/aufs/hbl.h linux-5.4/fs/aufs/hbl.h
+diff -Naur null/fs/aufs/hbl.h linux-5.x-rcN/fs/aufs/hbl.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/hbl.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/hbl.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,65 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2017-2019 Junjiro R. Okajima
++ * Copyright (C) 2017-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -16003,13 +16004,13 @@ diff -Naur null/fs/aufs/hbl.h linux-5.4/fs/aufs/hbl.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_HBL_H__ */
-diff -Naur null/fs/aufs/hfsnotify.c linux-5.4/fs/aufs/hfsnotify.c
+diff -Naur null/fs/aufs/hfsnotify.c linux-5.x-rcN/fs/aufs/hfsnotify.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/hfsnotify.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/hfsnotify.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,288 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -16295,13 +16296,13 @@ diff -Naur null/fs/aufs/hfsnotify.c linux-5.4/fs/aufs/hfsnotify.c
 +	.fin_br		= au_hfsn_fin_br,
 +	.init_br	= au_hfsn_init_br
 +};
-diff -Naur null/fs/aufs/hfsplus.c linux-5.4/fs/aufs/hfsplus.c
+diff -Naur null/fs/aufs/hfsplus.c linux-5.x-rcN/fs/aufs/hfsplus.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/hfsplus.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/hfsplus.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,60 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2010-2019 Junjiro R. Okajima
++ * Copyright (C) 2010-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -16359,13 +16360,13 @@ diff -Naur null/fs/aufs/hfsplus.c linux-5.4/fs/aufs/hfsplus.c
 +		au_lcnt_dec(&br->br_nfiles);
 +	}
 +}
-diff -Naur null/fs/aufs/hnotify.c linux-5.4/fs/aufs/hnotify.c
+diff -Naur null/fs/aufs/hnotify.c linux-5.x-rcN/fs/aufs/hnotify.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/hnotify.c	2020-01-05 17:54:14.810792245 +0100
-@@ -0,0 +1,721 @@
++++ linux-5.x-rcN/fs/aufs/hnotify.c	2020-01-27 10:04:26.407820858 +0100
+@@ -0,0 +1,715 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -16547,12 +16548,6 @@ diff -Naur null/fs/aufs/hnotify.c linux-5.4/fs/aufs/hnotify.c
 +
 +out_dpages:
 +	au_dpages_free(&dpages);
-+
-+#if 0
-+	/* discard children */
-+	dentry_unhash(dentry);
-+	dput(dentry);
-+#endif
 +out:
 +	return err;
 +}
@@ -17084,13 +17079,13 @@ diff -Naur null/fs/aufs/hnotify.c linux-5.4/fs/aufs/hnotify.c
 +	if (au_cache[AuCache_HNOTIFY])
 +		au_hn_destroy_cache();
 +}
-diff -Naur null/fs/aufs/i_op.c linux-5.4/fs/aufs/i_op.c
+diff -Naur null/fs/aufs/i_op.c linux-5.x-rcN/fs/aufs/i_op.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/i_op.c	2020-01-05 17:54:14.810792245 +0100
-@@ -0,0 +1,1505 @@
++++ linux-5.x-rcN/fs/aufs/i_op.c	2020-01-27 10:04:26.407820858 +0100
+@@ -0,0 +1,1498 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -17162,19 +17157,6 @@ diff -Naur null/fs/aufs/i_op.c linux-5.4/fs/aufs/i_op.c
 +	if (!err)
 +		err = security_inode_permission(h_inode, mask);
 +
-+#if 0
-+	if (!err) {
-+		/* todo: do we need to call ima_path_check()? */
-+		struct path h_path = {
-+			.dentry	=
-+			.mnt	= h_mnt
-+		};
-+		err = ima_path_check(&h_path,
-+				     mask & (MAY_READ | MAY_WRITE | MAY_EXEC),
-+				     IMA_COUNT_LEAVE);
-+	}
-+#endif
-+
 +out:
 +	return err;
 +}
@@ -17196,7 +17178,13 @@ diff -Naur null/fs/aufs/i_op.c linux-5.4/fs/aufs/i_op.c
 +	sb = inode->i_sb;
 +	si_read_lock(sb, AuLock_FLUSH);
 +	ii_read_lock_child(inode);
-+#if 0
++#if 0 /* reserved for future use */
++	/*
++	 * This test may be rather 'too much' since the test is essentially done
++	 * in the aufs_lookup().  Theoretically it is possible that the inode
++	 * generation doesn't match to the superblock's here.  But it isn't a
++	 * big deal I suppose.
++	 */
 +	err = au_iigen_test(inode, au_sigen(sb));
 +	if (unlikely(err))
 +		goto out;
@@ -17314,7 +17302,7 @@ diff -Naur null/fs/aufs/i_op.c linux-5.4/fs/aufs/i_op.c
 +	if (inode)
 +		atomic_inc(&inode->i_count);
 +	ret = d_splice_alias(inode, dentry);
-+#if 0
++#if 0 /* reserved for future use */
 +	if (unlikely(d_need_lookup(dentry))) {
 +		spin_lock(&dentry->d_lock);
 +		dentry->d_flags &= ~DCACHE_NEED_LOOKUP;
@@ -17746,7 +17734,7 @@ diff -Naur null/fs/aufs/i_op.c linux-5.4/fs/aufs/i_op.c
 +{
 +	if (p->hdir) {
 +		au_pin_hdir_set_owner(p, p->task);
-+		rwsem_release(&p->hdir->hi_inode->i_rwsem.dep_map, 1, _RET_IP_);
++		rwsem_release(&p->hdir->hi_inode->i_rwsem.dep_map, _RET_IP_);
 +	}
 +}
 +
@@ -18593,13 +18581,13 @@ diff -Naur null/fs/aufs/i_op.c linux-5.4/fs/aufs/i_op.c
 +		.update_time	= aufs_update_time
 +	}
 +};
-diff -Naur null/fs/aufs/i_op_add.c linux-5.4/fs/aufs/i_op_add.c
+diff -Naur null/fs/aufs/i_op_add.c linux-5.x-rcN/fs/aufs/i_op_add.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/i_op_add.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/i_op_add.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,936 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -19533,13 +19521,13 @@ diff -Naur null/fs/aufs/i_op_add.c linux-5.4/fs/aufs/i_op_add.c
 +out:
 +	return err;
 +}
-diff -Naur null/fs/aufs/i_op_del.c linux-5.4/fs/aufs/i_op_del.c
+diff -Naur null/fs/aufs/i_op_del.c linux-5.x-rcN/fs/aufs/i_op_del.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/i_op_del.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/i_op_del.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,513 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -20050,13 +20038,13 @@ diff -Naur null/fs/aufs/i_op_del.c linux-5.4/fs/aufs/i_op_del.c
 +	AuTraceErr(err);
 +	return err;
 +}
-diff -Naur null/fs/aufs/i_op_ren.c linux-5.4/fs/aufs/i_op_ren.c
+diff -Naur null/fs/aufs/i_op_ren.c linux-5.x-rcN/fs/aufs/i_op_ren.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/i_op_ren.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/i_op_ren.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,1250 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -20471,7 +20459,7 @@ diff -Naur null/fs/aufs/i_op_ren.c linux-5.4/fs/aufs/i_op_ren.c
 +	}
 +
 +	BUG_ON(d_is_positive(a->dst_h_dentry) && a->src_btop != a->btgt);
-+#if 0
++#if 0 /* debugging */
 +	BUG_ON(!au_ftest_ren(a->auren_flags, DIRREN)
 +	       && d_is_positive(a->dst_h_dentry)
 +	       && a->src_btop != a->btgt);
@@ -21304,13 +21292,13 @@ diff -Naur null/fs/aufs/i_op_ren.c linux-5.4/fs/aufs/i_op_ren.c
 +	AuTraceErr(err);
 +	return err;
 +}
-diff -Naur null/fs/aufs/iinfo.c linux-5.4/fs/aufs/iinfo.c
+diff -Naur null/fs/aufs/iinfo.c linux-5.x-rcN/fs/aufs/iinfo.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/iinfo.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/iinfo.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,286 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -21594,13 +21582,13 @@ diff -Naur null/fs/aufs/iinfo.c linux-5.4/fs/aufs/iinfo.c
 +	au_kfree_rcu(iinfo->ii_hinode);
 +	AuRwDestroy(&iinfo->ii_rwsem);
 +}
-diff -Naur null/fs/aufs/inode.c linux-5.4/fs/aufs/inode.c
+diff -Naur null/fs/aufs/inode.c linux-5.x-rcN/fs/aufs/inode.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/inode.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/inode.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,529 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -21812,7 +21800,7 @@ diff -Naur null/fs/aufs/inode.c linux-5.4/fs/aufs/inode.c
 +	struct dentry *h_dentry;
 +	struct inode *h_inode;
 +	struct au_iinfo *iinfo;
-+	struct inode_operations *iop;
++	const struct inode_operations *iop;
 +
 +	IiMustWriteLock(inode);
 +
@@ -22127,13 +22115,13 @@ diff -Naur null/fs/aufs/inode.c linux-5.4/fs/aufs/inode.c
 +		mask |= MAY_READ; /* force permission check */
 +	return au_test_h_perm(h_inode, mask);
 +}
-diff -Naur null/fs/aufs/inode.h linux-5.4/fs/aufs/inode.h
+diff -Naur null/fs/aufs/inode.h linux-5.x-rcN/fs/aufs/inode.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/inode.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/inode.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,698 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -22290,7 +22278,7 @@ diff -Naur null/fs/aufs/inode.h linux-5.4/fs/aufs/inode.h
 +	AuIop_OTHER,
 +	AuIop_Last
 +};
-+extern struct inode_operations aufs_iop[AuIop_Last],
++extern struct inode_operations aufs_iop[AuIop_Last], /* not const */
 +	aufs_iop_nogetattr[AuIop_Last];
 +
 +/* au_wr_dir flags */
@@ -22829,13 +22817,13 @@ diff -Naur null/fs/aufs/inode.h linux-5.4/fs/aufs/inode.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_INODE_H__ */
-diff -Naur null/fs/aufs/ioctl.c linux-5.4/fs/aufs/ioctl.c
+diff -Naur null/fs/aufs/ioctl.c linux-5.x-rcN/fs/aufs/ioctl.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/ioctl.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/ioctl.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,220 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -23053,13 +23041,13 @@ diff -Naur null/fs/aufs/ioctl.c linux-5.4/fs/aufs/ioctl.c
 +	return aufs_ioctl_nondir(file, cmd, (unsigned long)compat_ptr(arg));
 +}
 +#endif
-diff -Naur null/fs/aufs/lcnt.h linux-5.4/fs/aufs/lcnt.h
+diff -Naur null/fs/aufs/lcnt.h linux-5.x-rcN/fs/aufs/lcnt.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/lcnt.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/lcnt.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,186 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2018-2019 Junjiro R. Okajima
++ * Copyright (C) 2018-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -23243,13 +23231,13 @@ diff -Naur null/fs/aufs/lcnt.h linux-5.4/fs/aufs/lcnt.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_LCNT_H__ */
-diff -Naur null/fs/aufs/loop.c linux-5.4/fs/aufs/loop.c
+diff -Naur null/fs/aufs/loop.c linux-5.x-rcN/fs/aufs/loop.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/loop.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/loop.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,148 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -23395,13 +23383,13 @@ diff -Naur null/fs/aufs/loop.c linux-5.4/fs/aufs/loop.c
 +		symbol_put(loop_backing_file);
 +	au_kfree_try_rcu(au_warn_loopback_array);
 +}
-diff -Naur null/fs/aufs/loop.h linux-5.4/fs/aufs/loop.h
+diff -Naur null/fs/aufs/loop.h linux-5.x-rcN/fs/aufs/loop.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/loop.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/loop.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,55 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -23454,9 +23442,9 @@ diff -Naur null/fs/aufs/loop.h linux-5.4/fs/aufs/loop.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_LOOP_H__ */
-diff -Naur null/fs/aufs/magic.mk linux-5.4/fs/aufs/magic.mk
+diff -Naur null/fs/aufs/magic.mk linux-5.x-rcN/fs/aufs/magic.mk
 --- /dev/null
-+++ linux-5.4/fs/aufs/magic.mk	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/magic.mk	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,31 @@
 +# SPDX-License-Identifier: GPL-2.0
 +
@@ -23489,13 +23477,13 @@ diff -Naur null/fs/aufs/magic.mk linux-5.4/fs/aufs/magic.mk
 +ifdef CONFIG_HFSPLUS_FS
 +ccflags-y += -DHFSPLUS_SUPER_MAGIC=0x482b
 +endif
-diff -Naur null/fs/aufs/module.c linux-5.4/fs/aufs/module.c
+diff -Naur null/fs/aufs/module.c linux-5.x-rcN/fs/aufs/module.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/module.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/module.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,273 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -23766,13 +23754,13 @@ diff -Naur null/fs/aufs/module.c linux-5.4/fs/aufs/module.c
 +
 +module_init(aufs_init);
 +module_exit(aufs_exit);
-diff -Naur null/fs/aufs/module.h linux-5.4/fs/aufs/module.h
+diff -Naur null/fs/aufs/module.h linux-5.x-rcN/fs/aufs/module.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/module.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/module.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,166 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -23936,13 +23924,13 @@ diff -Naur null/fs/aufs/module.h linux-5.4/fs/aufs/module.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_MODULE_H__ */
-diff -Naur null/fs/aufs/mvdown.c linux-5.4/fs/aufs/mvdown.c
+diff -Naur null/fs/aufs/mvdown.c linux-5.x-rcN/fs/aufs/mvdown.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/mvdown.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/mvdown.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,706 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2011-2019 Junjiro R. Okajima
++ * Copyright (C) 2011-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -24646,13 +24634,13 @@ diff -Naur null/fs/aufs/mvdown.c linux-5.4/fs/aufs/mvdown.c
 +	AuTraceErr(err);
 +	return err;
 +}
-diff -Naur null/fs/aufs/opts.c linux-5.4/fs/aufs/opts.c
+diff -Naur null/fs/aufs/opts.c linux-5.x-rcN/fs/aufs/opts.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/opts.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/opts.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,1880 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -26279,7 +26267,7 @@ diff -Naur null/fs/aufs/opts.c linux-5.4/fs/aufs/opts.c
 +		if ((br->br_perm & AuBrAttr_ICEX)
 +		    && !h_dir->i_op->listxattr)
 +			br->br_perm &= ~AuBrAttr_ICEX;
-+#if 0
++#if 0 /* untested */
 +		if ((br->br_perm & AuBrAttr_ICEX_SEC)
 +		    && (au_br_sb(br)->s_flags & SB_NOSEC))
 +			br->br_perm &= ~AuBrAttr_ICEX_SEC;
@@ -26530,13 +26518,13 @@ diff -Naur null/fs/aufs/opts.c linux-5.4/fs/aufs/opts.c
 +{
 +	return au_mntflags(sb) & AuOptMask_UDBA;
 +}
-diff -Naur null/fs/aufs/opts.h linux-5.4/fs/aufs/opts.h
+diff -Naur null/fs/aufs/opts.h linux-5.x-rcN/fs/aufs/opts.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/opts.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/opts.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,225 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -26759,13 +26747,13 @@ diff -Naur null/fs/aufs/opts.h linux-5.4/fs/aufs/opts.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_OPTS_H__ */
-diff -Naur null/fs/aufs/plink.c linux-5.4/fs/aufs/plink.c
+diff -Naur null/fs/aufs/plink.c linux-5.x-rcN/fs/aufs/plink.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/plink.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/plink.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,516 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -27279,13 +27267,13 @@ diff -Naur null/fs/aufs/plink.c linux-5.4/fs/aufs/plink.c
 +		}
 +	}
 +}
-diff -Naur null/fs/aufs/poll.c linux-5.4/fs/aufs/poll.c
+diff -Naur null/fs/aufs/poll.c linux-5.x-rcN/fs/aufs/poll.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/poll.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/poll.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,51 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -27334,13 +27322,13 @@ diff -Naur null/fs/aufs/poll.c linux-5.4/fs/aufs/poll.c
 +		AuDbg("mask 0x%x\n", mask);
 +	return mask;
 +}
-diff -Naur null/fs/aufs/posix_acl.c linux-5.4/fs/aufs/posix_acl.c
+diff -Naur null/fs/aufs/posix_acl.c linux-5.x-rcN/fs/aufs/posix_acl.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/posix_acl.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/posix_acl.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,105 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2014-2019 Junjiro R. Okajima
++ * Copyright (C) 2014-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -27443,13 +27431,13 @@ diff -Naur null/fs/aufs/posix_acl.c linux-5.4/fs/aufs/posix_acl.c
 +out:
 +	return err;
 +}
-diff -Naur null/fs/aufs/procfs.c linux-5.4/fs/aufs/procfs.c
+diff -Naur null/fs/aufs/procfs.c linux-5.x-rcN/fs/aufs/procfs.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/procfs.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/procfs.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,171 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2010-2019 Junjiro R. Okajima
++ * Copyright (C) 2010-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -27618,13 +27606,13 @@ diff -Naur null/fs/aufs/procfs.c linux-5.4/fs/aufs/procfs.c
 +out:
 +	return err;
 +}
-diff -Naur null/fs/aufs/rdu.c linux-5.4/fs/aufs/rdu.c
+diff -Naur null/fs/aufs/rdu.c linux-5.x-rcN/fs/aufs/rdu.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/rdu.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/rdu.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,384 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -28006,13 +27994,13 @@ diff -Naur null/fs/aufs/rdu.c linux-5.4/fs/aufs/rdu.c
 +	return err;
 +}
 +#endif
-diff -Naur null/fs/aufs/rwsem.h linux-5.4/fs/aufs/rwsem.h
+diff -Naur null/fs/aufs/rwsem.h linux-5.x-rcN/fs/aufs/rwsem.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/rwsem.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/rwsem.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,73 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -28083,13 +28071,13 @@ diff -Naur null/fs/aufs/rwsem.h linux-5.4/fs/aufs/rwsem.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_RWSEM_H__ */
-diff -Naur null/fs/aufs/sbinfo.c linux-5.4/fs/aufs/sbinfo.c
+diff -Naur null/fs/aufs/sbinfo.c linux-5.x-rcN/fs/aufs/sbinfo.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/sbinfo.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/sbinfo.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,314 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -28401,13 +28389,13 @@ diff -Naur null/fs/aufs/sbinfo.c linux-5.4/fs/aufs/sbinfo.c
 +	di_write_unlock2(d1, d2);
 +	si_read_unlock(d1->d_sb);
 +}
-diff -Naur null/fs/aufs/super.c linux-5.4/fs/aufs/super.c
+diff -Naur null/fs/aufs/super.c linux-5.x-rcN/fs/aufs/super.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/super.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/super.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,1047 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -28653,7 +28641,7 @@ diff -Naur null/fs/aufs/super.c linux-5.4/fs/aufs/super.c
 +	sb = dentry->d_sb;
 +	if (sb->s_flags & SB_POSIXACL)
 +		seq_puts(m, ",acl");
-+#if 0
++#if 0 /* reserved for future use */
 +	if (sb->s_flags & SB_I_VERSION)
 +		seq_puts(m, ",i_version");
 +#endif
@@ -29452,13 +29440,13 @@ diff -Naur null/fs/aufs/super.c linux-5.4/fs/aufs/super.c
 +	/* no need to __module_get() and module_put(). */
 +	.owner		= THIS_MODULE,
 +};
-diff -Naur null/fs/aufs/super.h linux-5.4/fs/aufs/super.h
+diff -Naur null/fs/aufs/super.h linux-5.x-rcN/fs/aufs/super.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/super.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/super.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,589 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -29637,7 +29625,7 @@ diff -Naur null/fs/aufs/super.h linux-5.4/fs/aufs/super.h
 +	struct hlist_bl_head	si_files;
 +
 +	/* with/without getattr, brother of sb->s_d_op */
-+	struct inode_operations *si_iop_array;
++	const struct inode_operations *si_iop_array;
 +
 +	/*
 +	 * sysfs and lifetime management.
@@ -30045,13 +30033,13 @@ diff -Naur null/fs/aufs/super.h linux-5.4/fs/aufs/super.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_SUPER_H__ */
-diff -Naur null/fs/aufs/sysaufs.c linux-5.4/fs/aufs/sysaufs.c
+diff -Naur null/fs/aufs/sysaufs.c linux-5.x-rcN/fs/aufs/sysaufs.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/sysaufs.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/sysaufs.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,93 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -30142,13 +30130,13 @@ diff -Naur null/fs/aufs/sysaufs.c linux-5.4/fs/aufs/sysaufs.c
 +out:
 +	return err;
 +}
-diff -Naur null/fs/aufs/sysaufs.h linux-5.4/fs/aufs/sysaufs.h
+diff -Naur null/fs/aufs/sysaufs.h linux-5.x-rcN/fs/aufs/sysaufs.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/sysaufs.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/sysaufs.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,102 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -30248,13 +30236,13 @@ diff -Naur null/fs/aufs/sysaufs.h linux-5.4/fs/aufs/sysaufs.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __SYSAUFS_H__ */
-diff -Naur null/fs/aufs/sysfs.c linux-5.4/fs/aufs/sysfs.c
+diff -Naur null/fs/aufs/sysfs.c linux-5.x-rcN/fs/aufs/sysfs.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/sysfs.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/sysfs.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,374 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -30626,13 +30614,13 @@ diff -Naur null/fs/aufs/sysfs.c linux-5.4/fs/aufs/sysfs.c
 +		}
 +	}
 +}
-diff -Naur null/fs/aufs/sysrq.c linux-5.4/fs/aufs/sysrq.c
+diff -Naur null/fs/aufs/sysrq.c linux-5.x-rcN/fs/aufs/sysrq.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/sysrq.c	2020-01-05 17:54:14.810792245 +0100
-@@ -0,0 +1,160 @@
++++ linux-5.x-rcN/fs/aufs/sysrq.c	2020-01-27 10:04:26.407820858 +0100
+@@ -0,0 +1,149 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -30666,6 +30654,7 @@ diff -Naur null/fs/aufs/sysrq.c linux-5.4/fs/aufs/sysrq.c
 +	struct hlist_bl_head *files;
 +	struct hlist_bl_node *pos;
 +	struct au_finfo *finfo;
++	struct inode *i;
 +
 +	plevel = au_plevel;
 +	au_plevel = KERN_WARNING;
@@ -30678,14 +30667,7 @@ diff -Naur null/fs/aufs/sysrq.c linux-5.4/fs/aufs/sysrq.c
 +	pr("superblock\n");
 +	au_dpri_sb(sb);
 +
-+#if 0
-+	pr("root dentry\n");
-+	au_dpri_dentry(sb->s_root);
-+	pr("root inode\n");
-+	au_dpri_inode(d_inode(sb->s_root));
-+#endif
-+
-+#if 0
++#if 0 /* reserved */
 +	do {
 +		int err, i, j, ndentry;
 +		struct au_dcsub_pages dpages;
@@ -30706,21 +30688,16 @@ diff -Naur null/fs/aufs/sysrq.c linux-5.4/fs/aufs/sysrq.c
 +	} while (0);
 +#endif
 +
-+#if 1
-+	{
-+		struct inode *i;
-+
-+		pr("isolated inode\n");
-+		spin_lock(&sb->s_inode_list_lock);
-+		list_for_each_entry(i, &sb->s_inodes, i_sb_list) {
-+			spin_lock(&i->i_lock);
-+			if (1 || hlist_empty(&i->i_dentry))
-+				au_dpri_inode(i);
-+			spin_unlock(&i->i_lock);
-+		}
-+		spin_unlock(&sb->s_inode_list_lock);
++	pr("isolated inode\n");
++	spin_lock(&sb->s_inode_list_lock);
++	list_for_each_entry(i, &sb->s_inodes, i_sb_list) {
++		spin_lock(&i->i_lock);
++		if (hlist_empty(&i->i_dentry))
++			au_dpri_inode(i);
++		spin_unlock(&i->i_lock);
 +	}
-+#endif
++	spin_unlock(&sb->s_inode_list_lock);
++
 +	pr("files\n");
 +	files = &au_sbi(sb)->si_files;
 +	hlist_bl_lock(files);
@@ -30790,13 +30767,13 @@ diff -Naur null/fs/aufs/sysrq.c linux-5.4/fs/aufs/sysrq.c
 +	if (unlikely(err))
 +		pr_err("err %d (ignored)\n", err);
 +}
-diff -Naur null/fs/aufs/vdir.c linux-5.4/fs/aufs/vdir.c
+diff -Naur null/fs/aufs/vdir.c linux-5.x-rcN/fs/aufs/vdir.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/vdir.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/vdir.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,896 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -30891,7 +30868,7 @@ diff -Naur null/fs/aufs/vdir.c linux-5.4/fs/aufs/vdir.c
 +
 +static void nhash_count(struct hlist_head *head)
 +{
-+#if 0
++#if 0 /* debugging */
 +	unsigned long n;
 +	struct hlist_node *pos;
 +
@@ -31690,13 +31667,13 @@ diff -Naur null/fs/aufs/vdir.c linux-5.4/fs/aufs/vdir.c
 +	/* smp_mb(); */
 +	return 0;
 +}
-diff -Naur null/fs/aufs/vfsub.c linux-5.4/fs/aufs/vfsub.c
+diff -Naur null/fs/aufs/vfsub.c linux-5.x-rcN/fs/aufs/vfsub.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/vfsub.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/vfsub.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,902 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -32596,13 +32573,13 @@ diff -Naur null/fs/aufs/vfsub.c linux-5.4/fs/aufs/vfsub.c
 +
 +	return err;
 +}
-diff -Naur null/fs/aufs/vfsub.h linux-5.4/fs/aufs/vfsub.h
+diff -Naur null/fs/aufs/vfsub.h linux-5.x-rcN/fs/aufs/vfsub.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/vfsub.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/vfsub.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,354 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -32954,13 +32931,13 @@ diff -Naur null/fs/aufs/vfsub.h linux-5.4/fs/aufs/vfsub.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_VFSUB_H__ */
-diff -Naur null/fs/aufs/wbr_policy.c linux-5.4/fs/aufs/wbr_policy.c
+diff -Naur null/fs/aufs/wbr_policy.c linux-5.x-rcN/fs/aufs/wbr_policy.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/wbr_policy.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/wbr_policy.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,830 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -33788,13 +33765,13 @@ diff -Naur null/fs/aufs/wbr_policy.c linux-5.4/fs/aufs/wbr_policy.c
 +		.fin	= au_wbr_create_fin_mfs
 +	}
 +};
-diff -Naur null/fs/aufs/whout.c linux-5.4/fs/aufs/whout.c
+diff -Naur null/fs/aufs/whout.c linux-5.x-rcN/fs/aufs/whout.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/whout.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/whout.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,1062 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -34099,7 +34076,7 @@ diff -Naur null/fs/aufs/whout.c linux-5.4/fs/aufs/whout.c
 +
 +	pr_err("%pd (%s) doesn't support link(2), use noplink and rw+nolwh\n",
 +	       h_root, au_sbtype(h_root->d_sb));
-+	return -ENOSYS;
++	return -ENOSYS;	/* the branch doesn't have its ->link() */
 +}
 +
 +/* todo: should this mkdir be done in /sbin/mount.aufs helper? */
@@ -34854,13 +34831,13 @@ diff -Naur null/fs/aufs/whout.c linux-5.4/fs/aufs/whout.c
 +		au_whtmp_rmdir_free(args);
 +	}
 +}
-diff -Naur null/fs/aufs/whout.h linux-5.4/fs/aufs/whout.h
+diff -Naur null/fs/aufs/whout.h linux-5.x-rcN/fs/aufs/whout.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/whout.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/whout.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,86 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -34944,13 +34921,13 @@ diff -Naur null/fs/aufs/whout.h linux-5.4/fs/aufs/whout.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_WHOUT_H__ */
-diff -Naur null/fs/aufs/wkq.c linux-5.4/fs/aufs/wkq.c
+diff -Naur null/fs/aufs/wkq.c linux-5.x-rcN/fs/aufs/wkq.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/wkq.c	2020-01-05 17:54:14.810792245 +0100
-@@ -0,0 +1,392 @@
++++ linux-5.x-rcN/fs/aufs/wkq.c	2020-01-27 10:04:26.407820858 +0100
+@@ -0,0 +1,372 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -35103,8 +35080,8 @@ diff -Naur null/fs/aufs/wkq.c linux-5.4/fs/aufs/wkq.c
 +		goto out;
 +
 +	err = 0;
-+#if 0
-+	if (0 && au_debug_test()) /* left for debugging */
++#if 0 /* left for debugging */
++	if (0 && au_debug_test())
 +		lockdep_print_held_locks(curr);
 +#endif
 +	held_locks = curr->held_locks;
@@ -35155,7 +35132,7 @@ diff -Naur null/fs/aufs/wkq.c linux-5.4/fs/aufs/wkq.c
 +	if (!hl)
 +		return;
 +	while ((p = *hl++)) /* assignment */
-+		rwsem_release(p->instance, 0, /*p->acquire_ip*/_RET_IP_);
++		rwsem_release(p->instance, /*p->acquire_ip*/_RET_IP_);
 +}
 +#endif
 +
@@ -35181,7 +35158,6 @@ diff -Naur null/fs/aufs/wkq.c linux-5.4/fs/aufs/wkq.c
 +/*
 + * Since struct completion is large, try allocating it dynamically.
 + */
-+#if 1 /* defined(CONFIG_4KSTACKS) || defined(AuTest4KSTACKS) */
 +#define AuWkqCompDeclare(name)	struct completion *comp = NULL
 +
 +static int au_wkq_comp_alloc(struct au_wkinfo *wkinfo, struct completion **comp)
@@ -35200,25 +35176,6 @@ diff -Naur null/fs/aufs/wkq.c linux-5.4/fs/aufs/wkq.c
 +	au_kfree_rcu(comp);
 +}
 +
-+#else
-+
-+/* no braces */
-+#define AuWkqCompDeclare(name) \
-+	DECLARE_COMPLETION_ONSTACK(_ ## name); \
-+	struct completion *comp = &_ ## name
-+
-+static int au_wkq_comp_alloc(struct au_wkinfo *wkinfo, struct completion **comp)
-+{
-+	wkinfo->comp = *comp;
-+	return 0;
-+}
-+
-+static void au_wkq_comp_free(struct completion *comp __maybe_unused)
-+{
-+	/* empty */
-+}
-+#endif /* 4KSTACKS */
-+
 +static void au_wkq_run(struct au_wkinfo *wkinfo)
 +{
 +	if (au_ftest_wkq(wkinfo->flags, NEST)) {
@@ -35340,13 +35297,13 @@ diff -Naur null/fs/aufs/wkq.c linux-5.4/fs/aufs/wkq.c
 +
 +	return err;
 +}
-diff -Naur null/fs/aufs/wkq.h linux-5.4/fs/aufs/wkq.h
+diff -Naur null/fs/aufs/wkq.h linux-5.x-rcN/fs/aufs/wkq.h
 --- /dev/null
-+++ linux-5.4/fs/aufs/wkq.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/wkq.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,89 @@
 +/* SPDX-License-Identifier: GPL-2.0 */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -35433,13 +35390,13 @@ diff -Naur null/fs/aufs/wkq.h linux-5.4/fs/aufs/wkq.h
 +
 +#endif /* __KERNEL__ */
 +#endif /* __AUFS_WKQ_H__ */
-diff -Naur null/fs/aufs/xattr.c linux-5.4/fs/aufs/xattr.c
+diff -Naur null/fs/aufs/xattr.c linux-5.x-rcN/fs/aufs/xattr.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/xattr.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/xattr.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,356 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2014-2019 Junjiro R. Okajima
++ * Copyright (C) 2014-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -35793,13 +35750,13 @@ diff -Naur null/fs/aufs/xattr.c linux-5.4/fs/aufs/xattr.c
 +{
 +	sb->s_xattr = au_xattr_handlers;
 +}
-diff -Naur null/fs/aufs/xino.c linux-5.4/fs/aufs/xino.c
+diff -Naur null/fs/aufs/xino.c linux-5.x-rcN/fs/aufs/xino.c
 --- /dev/null
-+++ linux-5.4/fs/aufs/xino.c	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/fs/aufs/xino.c	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,1965 @@
 +// SPDX-License-Identifier: GPL-2.0
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -37154,7 +37111,7 @@ diff -Naur null/fs/aufs/xino.c linux-5.4/fs/aufs/xino.c
 +	if (unlikely(ul)) {
 +		pr_warn("xi_writing %lu\n", ul);
 +		hlist_bl_lock(hbl);
-+		hlist_bl_for_each_entry_safe (p, pos, n, hbl, node) {
++		hlist_bl_for_each_entry_safe(p, pos, n, hbl, node) {
 +			hlist_bl_del(&p->node);
 +			au_kfree_rcu(p);
 +		}
@@ -37762,13 +37719,13 @@ diff -Naur null/fs/aufs/xino.c linux-5.4/fs/aufs/xino.c
 +out:
 +	return err;
 +}
-diff -Naur null/include/uapi/linux/aufs_type.h linux-5.4/include/uapi/linux/aufs_type.h
+diff -Naur null/include/uapi/linux/aufs_type.h linux-5.x-rcN/include/uapi/linux/aufs_type.h
 --- /dev/null
-+++ linux-5.4/include/uapi/linux/aufs_type.h	2020-01-05 17:54:14.810792245 +0100
++++ linux-5.x-rcN/include/uapi/linux/aufs_type.h	2020-01-27 10:04:26.407820858 +0100
 @@ -0,0 +1,452 @@
 +/* SPDX-License-Identifier: GPL-2.0 WITH Linux-syscall-note */
 +/*
-+ * Copyright (C) 2005-2019 Junjiro R. Okajima
++ * Copyright (C) 2005-2020 Junjiro R. Okajima
 + *
 + * This program, aufs is free software; you can redistribute it and/or modify
 + * it under the terms of the GNU General Public License as published by
@@ -37801,14 +37758,14 @@ diff -Naur null/include/uapi/linux/aufs_type.h linux-5.4/include/uapi/linux/aufs
 +#define pr_fmt(fmt) \
 +		AUFS_NAME " %s:%d:%.*s[%d]: " fmt, __func__, __LINE__, \
 +		(int)sizeof(current->comm), current->comm, current->pid
++#include <linux/limits.h>
 +#else
 +#include <stdint.h>
 +#include <sys/types.h>
++#include <limits.h>
 +#endif /* __KERNEL__ */
 +
-+#include <linux/limits.h>
-+
-+#define AUFS_VERSION	"5.4-20191223"
++#define AUFS_VERSION	"5.x-rcN-20200127"
 +
 +/* todo? move this to linux-2.6.19/include/magic.h */
 +#define AUFS_SUPER_MAGIC	('a' << 24 | 'u' << 16 | 'f' << 8 | 's')
diff --git a/config.x86_64 b/config.x86_64
index c780729..09609d1 100644
--- a/config.x86_64
+++ b/config.x86_64
@@ -1,6 +1,6 @@
 #
 # Automatically generated file; DO NOT EDIT.
-# Linux/x86 5.4.11-1 Kernel Configuration
+# Linux/x86 5.5.0-1 Kernel Configuration
 #
 
 #
@@ -22,7 +22,6 @@ CONFIG_THREAD_INFO_IN_TASK=y
 #
 CONFIG_INIT_ENV_ARG_LIMIT=32
 # CONFIG_COMPILE_TEST is not set
-# CONFIG_HEADER_TEST is not set
 CONFIG_LOCALVERSION="-MANJARO"
 # CONFIG_LOCALVERSION_AUTO is not set
 CONFIG_BUILD_SALT=""
@@ -64,6 +63,7 @@ CONFIG_IRQ_SIM=y
 CONFIG_IRQ_DOMAIN_HIERARCHY=y
 CONFIG_GENERIC_MSI_IRQ=y
 CONFIG_GENERIC_MSI_IRQ_DOMAIN=y
+CONFIG_IRQ_MSI_IOMMU=y
 CONFIG_GENERIC_IRQ_MATRIX_ALLOCATOR=y
 CONFIG_GENERIC_IRQ_RESERVATION_MODE=y
 CONFIG_IRQ_FORCED_THREADING=y
@@ -154,6 +154,7 @@ CONFIG_UCLAMP_BUCKETS_COUNT=5
 
 CONFIG_ARCH_SUPPORTS_NUMA_BALANCING=y
 CONFIG_ARCH_WANT_BATCHED_UNMAP_TLB_FLUSH=y
+CONFIG_CC_HAS_INT128=y
 CONFIG_ARCH_SUPPORTS_INT128=y
 CONFIG_NUMA_BALANCING=y
 CONFIG_NUMA_BALANCING_DEFAULT_ENABLED=y
@@ -213,7 +214,6 @@ CONFIG_EXPERT=y
 CONFIG_MULTIUSER=y
 CONFIG_SGETMASK_SYSCALL=y
 # CONFIG_SYSFS_SYSCALL is not set
-# CONFIG_SYSCTL_SYSCALL is not set
 CONFIG_FHANDLE=y
 CONFIG_POSIX_TIMERS=y
 CONFIG_PRINTK=y
@@ -373,8 +373,6 @@ CONFIG_HPET_TIMER=y
 CONFIG_HPET_EMULATE_RTC=y
 CONFIG_DMI=y
 CONFIG_GART_IOMMU=y
-CONFIG_CALGARY_IOMMU=y
-CONFIG_CALGARY_IOMMU_ENABLED_BY_DEFAULT=y
 # CONFIG_MAXSMP is not set
 CONFIG_NR_CPUS_RANGE_BEGIN=2
 CONFIG_NR_CPUS_RANGE_END=512
@@ -406,6 +404,7 @@ CONFIG_PERF_EVENTS_AMD_POWER=m
 CONFIG_X86_16BIT=y
 CONFIG_X86_ESPFIX64=y
 CONFIG_X86_VSYSCALL_EMULATION=y
+CONFIG_X86_IOPL_IOPERM=y
 CONFIG_I8K=m
 CONFIG_MICROCODE=y
 CONFIG_MICROCODE_INTEL=y
@@ -443,7 +442,7 @@ CONFIG_X86_PAT=y
 CONFIG_ARCH_USES_PG_UNCACHED=y
 CONFIG_ARCH_RANDOM=y
 CONFIG_X86_SMAP=y
-CONFIG_X86_INTEL_UMIP=y
+CONFIG_X86_UMIP=y
 # CONFIG_X86_INTEL_MPX is not set
 CONFIG_X86_INTEL_MEMORY_PROTECTION_KEYS=y
 # CONFIG_X86_INTEL_TSX_MODE_OFF is not set
@@ -552,7 +551,6 @@ CONFIG_ACPI_IPMI=m
 CONFIG_ACPI_HOTPLUG_CPU=y
 CONFIG_ACPI_PROCESSOR_AGGREGATOR=y
 CONFIG_ACPI_THERMAL=y
-CONFIG_ACPI_NUMA=y
 CONFIG_ARCH_HAS_ACPI_TABLE_UPGRADE=y
 CONFIG_ACPI_TABLE_UPGRADE=y
 CONFIG_ACPI_DEBUG=y
@@ -567,6 +565,7 @@ CONFIG_ACPI_BGRT=y
 # CONFIG_ACPI_REDUCED_HARDWARE_ONLY is not set
 CONFIG_ACPI_NFIT=m
 # CONFIG_NFIT_SECURITY_DEBUG is not set
+CONFIG_ACPI_NUMA=y
 CONFIG_ACPI_HMAT=y
 CONFIG_HAVE_ACPI_APEI=y
 CONFIG_HAVE_ACPI_APEI_NMI=y
@@ -581,7 +580,8 @@ CONFIG_ACPI_WATCHDOG=y
 CONFIG_ACPI_EXTLOG=m
 CONFIG_ACPI_ADXL=y
 CONFIG_PMIC_OPREGION=y
-CONFIG_CRC_PMIC_OPREGION=y
+# CONFIG_BYTCRC_PMIC_OPREGION is not set
+# CONFIG_CHTCRC_PMIC_OPREGION is not set
 CONFIG_XPOWER_PMIC_OPREGION=y
 CONFIG_BXT_WC_PMIC_OPREGION=y
 CONFIG_CHT_WC_PMIC_OPREGION=y
@@ -701,6 +701,7 @@ CONFIG_GOOGLE_VPD=m
 CONFIG_EFI_ESRT=y
 CONFIG_EFI_RUNTIME_MAP=y
 # CONFIG_EFI_FAKE_MEMMAP is not set
+CONFIG_EFI_SOFT_RESERVE=y
 CONFIG_EFI_RUNTIME_WRAPPERS=y
 CONFIG_EFI_CAPSULE_LOADER=m
 # CONFIG_EFI_TEST is not set
@@ -835,7 +836,6 @@ CONFIG_HAVE_RELIABLE_STACKTRACE=y
 CONFIG_ISA_BUS_API=y
 CONFIG_OLD_SIGSUSPEND3=y
 CONFIG_COMPAT_OLD_SIGACTION=y
-CONFIG_64BIT_TIME=y
 CONFIG_COMPAT_32BIT_TIME=y
 CONFIG_HAVE_ARCH_VMAP_STACK=y
 CONFIG_VMAP_STACK=y
@@ -843,8 +843,6 @@ CONFIG_ARCH_HAS_STRICT_KERNEL_RWX=y
 CONFIG_STRICT_KERNEL_RWX=y
 CONFIG_ARCH_HAS_STRICT_MODULE_RWX=y
 CONFIG_STRICT_MODULE_RWX=y
-CONFIG_ARCH_HAS_REFCOUNT=y
-# CONFIG_REFCOUNT_FULL is not set
 CONFIG_HAVE_ARCH_PREL32_RELOCATIONS=y
 CONFIG_ARCH_USE_MEMREMAP_PROT=y
 CONFIG_LOCK_EVENT_COUNTS=y
@@ -893,6 +891,7 @@ CONFIG_MODULES_TREE_LOOKUP=y
 CONFIG_BLOCK=y
 CONFIG_BLK_RQ_ALLOC_TIME=y
 CONFIG_BLK_SCSI_REQUEST=y
+CONFIG_BLK_CGROUP_RWSTAT=y
 CONFIG_BLK_DEV_BSG=y
 CONFIG_BLK_DEV_BSGLIB=y
 CONFIG_BLK_DEV_INTEGRITY=y
@@ -1044,6 +1043,7 @@ CONFIG_ARCH_HAS_PKEYS=y
 # CONFIG_GUP_BENCHMARK is not set
 CONFIG_READ_ONLY_THP_FOR_FS=y
 CONFIG_ARCH_HAS_PTE_SPECIAL=y
+CONFIG_MAPPING_DIRTY_HELPERS=y
 # end of Memory Management options
 
 CONFIG_NET=y
@@ -1062,6 +1062,7 @@ CONFIG_UNIX_SCM=y
 CONFIG_UNIX_DIAG=y
 CONFIG_TLS=m
 CONFIG_TLS_DEVICE=y
+# CONFIG_TLS_TOE is not set
 CONFIG_XFRM=y
 CONFIG_XFRM_OFFLOAD=y
 CONFIG_XFRM_ALGO=m
@@ -1552,6 +1553,7 @@ CONFIG_RDS_TCP=m
 CONFIG_TIPC=m
 CONFIG_TIPC_MEDIA_IB=y
 CONFIG_TIPC_MEDIA_UDP=y
+CONFIG_TIPC_CRYPTO=y
 CONFIG_TIPC_DIAG=m
 CONFIG_ATM=m
 CONFIG_ATM_CLIP=m
@@ -1582,6 +1584,7 @@ CONFIG_NET_DSA_TAG_DSA=m
 CONFIG_NET_DSA_TAG_EDSA=m
 CONFIG_NET_DSA_TAG_MTK=m
 CONFIG_NET_DSA_TAG_KSZ=m
+# CONFIG_NET_DSA_TAG_OCELOT is not set
 CONFIG_NET_DSA_TAG_QCA=m
 CONFIG_NET_DSA_TAG_LAN9303=m
 CONFIG_NET_DSA_TAG_SJA1105=m
@@ -1907,7 +1910,6 @@ CONFIG_BT_HCIVHCI=m
 CONFIG_BT_MRVL=m
 CONFIG_BT_MRVL_SDIO=m
 CONFIG_BT_ATH3K=m
-CONFIG_BT_WILINK=m
 CONFIG_BT_MTKSDIO=m
 CONFIG_BT_MTKUART=m
 CONFIG_BT_HCIRSI=m
@@ -1995,6 +1997,7 @@ CONFIG_NFC_PN544_MEI=m
 CONFIG_NFC_PN533=m
 CONFIG_NFC_PN533_USB=m
 CONFIG_NFC_PN533_I2C=m
+# CONFIG_NFC_PN532_UART is not set
 CONFIG_NFC_MICROREAD=m
 CONFIG_NFC_MICROREAD_I2C=m
 CONFIG_NFC_MICROREAD_MEI=m
@@ -2042,7 +2045,6 @@ CONFIG_PCIEAER=y
 # CONFIG_PCIEAER_INJECT is not set
 CONFIG_PCIE_ECRC=y
 CONFIG_PCIEASPM=y
-# CONFIG_PCIEASPM_DEBUG is not set
 CONFIG_PCIEASPM_DEFAULT=y
 # CONFIG_PCIEASPM_POWERSAVE is not set
 # CONFIG_PCIEASPM_POWER_SUPERSAVE is not set
@@ -2079,15 +2081,6 @@ CONFIG_HOTPLUG_PCI_SHPC=y
 #
 # PCI controller drivers
 #
-
-#
-# Cadence PCIe controllers support
-#
-CONFIG_PCIE_CADENCE=y
-CONFIG_PCIE_CADENCE_HOST=y
-CONFIG_PCIE_CADENCE_EP=y
-# end of Cadence PCIe controllers support
-
 CONFIG_PCI_FTPCI100=y
 CONFIG_PCI_HOST_COMMON=y
 CONFIG_PCI_HOST_GENERIC=y
@@ -2106,6 +2099,13 @@ CONFIG_PCIE_DW_PLAT_HOST=y
 CONFIG_PCIE_DW_PLAT_EP=y
 CONFIG_PCI_MESON=y
 # end of DesignWare PCI Core Support
+
+#
+# Cadence PCIe controllers support
+#
+# CONFIG_PCIE_CADENCE_PLAT_HOST is not set
+# CONFIG_PCIE_CADENCE_PLAT_EP is not set
+# end of Cadence PCIe controllers support
 # end of PCI controller drivers
 
 #
@@ -2176,6 +2176,7 @@ CONFIG_FW_LOADER_PAGED_BUF=y
 CONFIG_EXTRA_FIRMWARE=""
 # CONFIG_FW_LOADER_USER_HELPER is not set
 CONFIG_FW_LOADER_COMPRESS=y
+CONFIG_FW_CACHE=y
 # end of Firmware loader
 
 CONFIG_WANT_DEV_COREDUMP=y
@@ -2342,6 +2343,7 @@ CONFIG_MTD_NAND_CAFE=m
 CONFIG_MTD_NAND_MXIC=m
 CONFIG_MTD_NAND_GPIO=m
 CONFIG_MTD_NAND_PLATFORM=m
+# CONFIG_MTD_NAND_CADENCE is not set
 
 #
 # Misc
@@ -2442,6 +2444,7 @@ CONFIG_BLK_DEV_RSXX=m
 CONFIG_NVME_CORE=y
 CONFIG_BLK_DEV_NVME=y
 CONFIG_NVME_MULTIPATH=y
+CONFIG_NVME_HWMON=y
 CONFIG_NVME_FABRICS=m
 CONFIG_NVME_RDMA=m
 CONFIG_NVME_FC=m
@@ -2521,45 +2524,13 @@ CONFIG_VMWARE_VMCI=m
 #
 # Intel MIC & related support
 #
-
-#
-# Intel MIC Bus Driver
-#
 CONFIG_INTEL_MIC_BUS=m
-
-#
-# SCIF Bus Driver
-#
 CONFIG_SCIF_BUS=m
-
-#
-# VOP Bus Driver
-#
 CONFIG_VOP_BUS=m
-
-#
-# Intel MIC Host Driver
-#
 CONFIG_INTEL_MIC_HOST=m
-
-#
-# Intel MIC Card Driver
-#
 CONFIG_INTEL_MIC_CARD=m
-
-#
-# SCIF Driver
-#
 CONFIG_SCIF=m
-
-#
-# Intel MIC Coprocessor State Management (COSM) Drivers
-#
 CONFIG_MIC_COSM=m
-
-#
-# VOP Driver
-#
 CONFIG_VOP=m
 CONFIG_VHOST_RING=m
 # end of Intel MIC & related support
@@ -2979,15 +2950,7 @@ CONFIG_ATM_FORE200E_DEBUG=0
 CONFIG_ATM_HE=m
 CONFIG_ATM_HE_USE_SUNI=y
 CONFIG_ATM_SOLOS=m
-
-#
-# CAIF transport drivers
-#
-CONFIG_CAIF_TTY=m
-CONFIG_CAIF_SPI_SLAVE=m
-CONFIG_CAIF_SPI_SYNC=y
-CONFIG_CAIF_HSI=m
-CONFIG_CAIF_VIRTIO=m
+# CONFIG_CAIF_DRIVERS is not set
 
 #
 # Distributed Switch Architecture drivers
@@ -3012,6 +2975,7 @@ CONFIG_NET_DSA_MICROCHIP_KSZ8795_SPI=m
 CONFIG_NET_DSA_MV88E6XXX=m
 CONFIG_NET_DSA_MV88E6XXX_GLOBAL2=y
 CONFIG_NET_DSA_MV88E6XXX_PTP=y
+# CONFIG_NET_DSA_MSCC_FELIX is not set
 CONFIG_NET_DSA_SJA1105=m
 CONFIG_NET_DSA_SJA1105_PTP=y
 CONFIG_NET_DSA_SJA1105_TAS=y
@@ -3140,8 +3104,6 @@ CONFIG_NET_VENDOR_FUJITSU=y
 CONFIG_PCMCIA_FMVJ18X=m
 CONFIG_NET_VENDOR_GOOGLE=y
 CONFIG_GVE=m
-CONFIG_NET_VENDOR_HP=y
-CONFIG_HP100=m
 CONFIG_NET_VENDOR_HUAWEI=y
 CONFIG_HINIC=m
 CONFIG_NET_VENDOR_I825XX=y
@@ -3381,7 +3343,6 @@ CONFIG_ADIN_PHY=m
 CONFIG_AMD_PHY=m
 CONFIG_AQUANTIA_PHY=m
 CONFIG_AX88796B_PHY=m
-CONFIG_AT803X_PHY=m
 CONFIG_BCM7XXX_PHY=m
 CONFIG_BCM87XX_PHY=m
 CONFIG_BCM_NET_PHYLIB=m
@@ -3393,6 +3354,7 @@ CONFIG_DP83822_PHY=m
 CONFIG_DP83TC811_PHY=m
 CONFIG_DP83848_PHY=m
 CONFIG_DP83867_PHY=m
+# CONFIG_DP83869_PHY is not set
 CONFIG_FIXED_PHY=m
 CONFIG_ICPLUS_PHY=m
 CONFIG_INTEL_XWAY_PHY=m
@@ -3406,6 +3368,7 @@ CONFIG_MICROCHIP_T1_PHY=m
 CONFIG_MICROSEMI_PHY=m
 CONFIG_NATIONAL_PHY=m
 CONFIG_NXP_TJA11XX_PHY=m
+CONFIG_AT803X_PHY=m
 CONFIG_QSEMI_PHY=m
 CONFIG_REALTEK_PHY=m
 CONFIG_RENESAS_PHY=m
@@ -4093,7 +4056,6 @@ CONFIG_INPUT_ATLAS_BTNS=m
 CONFIG_INPUT_ATI_REMOTE2=m
 CONFIG_INPUT_KEYSPAN_REMOTE=m
 CONFIG_INPUT_KXTJ9=m
-# CONFIG_INPUT_KXTJ9_POLLED_MODE is not set
 CONFIG_INPUT_POWERMATE=m
 CONFIG_INPUT_YEALINK=m
 CONFIG_INPUT_CM109=m
@@ -4318,6 +4280,7 @@ CONFIG_HW_RANDOM_TPM=y
 CONFIG_TCG_TIS_CORE=m
 CONFIG_TCG_TIS=m
 CONFIG_TCG_TIS_SPI=m
+# CONFIG_TCG_TIS_SPI_CR50 is not set
 CONFIG_TCG_TIS_I2C_ATMEL=m
 CONFIG_TCG_TIS_I2C_INFINEON=m
 CONFIG_TCG_TIS_I2C_NUVOTON=m
@@ -4389,7 +4352,6 @@ CONFIG_I2C_ISCH=m
 CONFIG_I2C_ISMT=m
 CONFIG_I2C_PIIX4=m
 CONFIG_I2C_CHT_WC=m
-CONFIG_I2C_NCT6775=m
 CONFIG_I2C_NFORCE2=m
 CONFIG_I2C_NFORCE2_S4985=m
 CONFIG_I2C_NVIDIA_GPU=m
@@ -4530,6 +4492,7 @@ CONFIG_PPS_CLIENT_GPIO=m
 CONFIG_PTP_1588_CLOCK=y
 CONFIG_DP83640_PHY=m
 CONFIG_PTP_1588_CLOCK_KVM=m
+# CONFIG_PTP_1588_CLOCK_IDTCM is not set
 # end of PTP clock support
 
 CONFIG_PINCTRL=y
@@ -4561,6 +4524,7 @@ CONFIG_PINCTRL_GEMINILAKE=y
 CONFIG_PINCTRL_ICELAKE=y
 CONFIG_PINCTRL_LEWISBURG=y
 CONFIG_PINCTRL_SUNRISEPOINT=y
+# CONFIG_PINCTRL_TIGERLAKE is not set
 CONFIG_PINCTRL_LOCHNAGAR=m
 CONFIG_PINCTRL_MADERA=m
 CONFIG_PINCTRL_CS47L15=y
@@ -4568,6 +4532,7 @@ CONFIG_PINCTRL_CS47L35=y
 CONFIG_PINCTRL_CS47L85=y
 CONFIG_PINCTRL_CS47L90=y
 CONFIG_PINCTRL_CS47L92=y
+# CONFIG_PINCTRL_EQUILIBRIUM is not set
 CONFIG_GPIOLIB=y
 CONFIG_GPIOLIB_FASTPATH_LIMIT=512
 CONFIG_OF_GPIO=y
@@ -4722,6 +4687,7 @@ CONFIG_W1_SLAVE_DS2413=m
 CONFIG_W1_SLAVE_DS2406=m
 CONFIG_W1_SLAVE_DS2423=m
 CONFIG_W1_SLAVE_DS2805=m
+# CONFIG_W1_SLAVE_DS2430 is not set
 CONFIG_W1_SLAVE_DS2431=m
 CONFIG_W1_SLAVE_DS2433=m
 # CONFIG_W1_SLAVE_DS2433_CRC is not set
@@ -4739,6 +4705,7 @@ CONFIG_POWER_RESET_AS3722=y
 CONFIG_POWER_RESET_GPIO=y
 CONFIG_POWER_RESET_GPIO_RESTART=y
 CONFIG_POWER_RESET_LTC2952=y
+# CONFIG_POWER_RESET_MT6323 is not set
 CONFIG_POWER_RESET_RESTART=y
 CONFIG_POWER_RESET_SYSCON=y
 CONFIG_POWER_RESET_SYSCON_POWEROFF=y
@@ -4879,6 +4846,8 @@ CONFIG_SENSORS_POWR1220=m
 CONFIG_SENSORS_LINEAGE=m
 CONFIG_SENSORS_LOCHNAGAR=m
 CONFIG_SENSORS_LTC2945=m
+# CONFIG_SENSORS_LTC2947_I2C is not set
+# CONFIG_SENSORS_LTC2947_SPI is not set
 CONFIG_SENSORS_LTC2990=m
 CONFIG_SENSORS_LTC4151=m
 CONFIG_SENSORS_LTC4215=m
@@ -4931,6 +4900,7 @@ CONFIG_SENSORS_PCF8591=m
 CONFIG_PMBUS=m
 CONFIG_SENSORS_PMBUS=m
 CONFIG_SENSORS_ADM1275=m
+# CONFIG_SENSORS_BEL_PFE is not set
 CONFIG_SENSORS_IBM_CFFPS=m
 CONFIG_SENSORS_INSPUR_IPSPS=m
 CONFIG_SENSORS_IR35221=m
@@ -4984,6 +4954,7 @@ CONFIG_SENSORS_TMP103=m
 CONFIG_SENSORS_TMP108=m
 CONFIG_SENSORS_TMP401=m
 CONFIG_SENSORS_TMP421=m
+# CONFIG_SENSORS_TMP513 is not set
 CONFIG_SENSORS_VIA_CPUTEMP=m
 CONFIG_SENSORS_VIA686A=m
 CONFIG_SENSORS_VT1211=m
@@ -5941,9 +5912,11 @@ CONFIG_VIDEO_THS8200=m
 #
 CONFIG_VIDEO_APTINA_PLL=m
 CONFIG_VIDEO_SMIAPP_PLL=m
+# CONFIG_VIDEO_HI556 is not set
 CONFIG_VIDEO_IMX214=m
 CONFIG_VIDEO_IMX258=m
 CONFIG_VIDEO_IMX274=m
+# CONFIG_VIDEO_IMX290 is not set
 CONFIG_VIDEO_IMX319=m
 CONFIG_VIDEO_IMX355=m
 CONFIG_VIDEO_OV2640=m
@@ -6273,13 +6246,16 @@ CONFIG_DRM_DP_AUX_CHARDEV=y
 # CONFIG_DRM_DEBUG_SELFTEST is not set
 CONFIG_DRM_KMS_HELPER=m
 CONFIG_DRM_KMS_FB_HELPER=y
+# CONFIG_DRM_DEBUG_DP_MST_TOPOLOGY_REFS is not set
 CONFIG_DRM_FBDEV_EMULATION=y
 CONFIG_DRM_FBDEV_OVERALLOC=100
 # CONFIG_DRM_FBDEV_LEAK_PHYS_SMEM is not set
 CONFIG_DRM_LOAD_EDID_FIRMWARE=y
 CONFIG_DRM_DP_CEC=y
 CONFIG_DRM_TTM=m
+CONFIG_DRM_TTM_DMA_PAGE_POOL=y
 CONFIG_DRM_VRAM_HELPER=m
+CONFIG_DRM_TTM_HELPER=m
 CONFIG_DRM_GEM_CMA_HELPER=y
 CONFIG_DRM_KMS_CMA_HELPER=y
 CONFIG_DRM_GEM_SHMEM_HELPER=y
@@ -6298,6 +6274,7 @@ CONFIG_DRM_I2C_NXP_TDA9950=m
 # ARM devices
 #
 CONFIG_DRM_KOMEDA=m
+# CONFIG_DRM_KOMEDA_ERROR_PRINT is not set
 # end of ARM devices
 
 CONFIG_DRM_RADEON=m
@@ -6322,6 +6299,7 @@ CONFIG_DRM_AMD_DC_DCN1_0=y
 CONFIG_DRM_AMD_DC_DCN2_0=y
 CONFIG_DRM_AMD_DC_DCN2_1=y
 CONFIG_DRM_AMD_DC_DSC_SUPPORT=y
+# CONFIG_DRM_AMD_DC_HDCP is not set
 # CONFIG_DEBUG_KERNEL_DC is not set
 # end of Display Engine Configuration
 
@@ -6361,7 +6339,11 @@ CONFIG_DRM_I915_GVT_KVMGT=m
 # drm/i915 Profile Guided Optimisation
 #
 CONFIG_DRM_I915_USERFAULT_AUTOSUSPEND=250
+CONFIG_DRM_I915_HEARTBEAT_INTERVAL=2500
+CONFIG_DRM_I915_PREEMPT_TIMEOUT=640
 CONFIG_DRM_I915_SPIN_REQUEST=5
+CONFIG_DRM_I915_STOP_TIMEOUT=100
+CONFIG_DRM_I915_TIMESLICE_DURATION=1
 # end of drm/i915 Profile Guided Optimisation
 
 CONFIG_DRM_VGEM=m
@@ -6573,7 +6555,7 @@ CONFIG_BACKLIGHT_DA903X=m
 CONFIG_BACKLIGHT_DA9052=m
 CONFIG_BACKLIGHT_MAX8925=m
 CONFIG_BACKLIGHT_APPLE=m
-CONFIG_BACKLIGHT_PM8941_WLED=m
+# CONFIG_BACKLIGHT_QCOM_WLED is not set
 CONFIG_BACKLIGHT_SAHARA=m
 CONFIG_BACKLIGHT_WM831X=m
 CONFIG_BACKLIGHT_ADP5520=m
@@ -6757,7 +6739,6 @@ CONFIG_SND_YMFPCI=m
 #
 CONFIG_SND_HDA=m
 CONFIG_SND_HDA_INTEL=m
-# CONFIG_SND_HDA_INTEL_DETECT_DMIC is not set
 CONFIG_SND_HDA_HWDEP=y
 CONFIG_SND_HDA_RECONFIG=y
 CONFIG_SND_HDA_INPUT_BEEP=y
@@ -6785,7 +6766,8 @@ CONFIG_SND_HDA_COMPONENT=y
 CONFIG_SND_HDA_I915=y
 CONFIG_SND_HDA_EXT_CORE=m
 CONFIG_SND_HDA_PREALLOC_SIZE=4096
-CONFIG_SND_INTEL_NHLT=m
+CONFIG_SND_INTEL_NHLT=y
+CONFIG_SND_INTEL_DSP_CONFIG=m
 CONFIG_SND_SPI=y
 CONFIG_SND_USB=y
 CONFIG_SND_USB_AUDIO=m
@@ -6900,6 +6882,7 @@ CONFIG_SND_SOC_INTEL_SKL_RT286_MACH=m
 CONFIG_SND_SOC_INTEL_SKL_NAU88L25_SSM4567_MACH=m
 CONFIG_SND_SOC_INTEL_SKL_NAU88L25_MAX98357A_MACH=m
 CONFIG_SND_SOC_INTEL_DA7219_MAX98357A_GENERIC=m
+CONFIG_SND_SOC_INTEL_BXT_DA7219_MAX98357A_COMMON=m
 CONFIG_SND_SOC_INTEL_BXT_DA7219_MAX98357A_MACH=m
 CONFIG_SND_SOC_INTEL_BXT_RT298_MACH=m
 CONFIG_SND_SOC_INTEL_KBL_RT5663_MAX98927_MACH=m
@@ -6907,19 +6890,18 @@ CONFIG_SND_SOC_INTEL_KBL_RT5663_RT5514_MAX98927_MACH=m
 CONFIG_SND_SOC_INTEL_KBL_DA7219_MAX98357A_MACH=m
 CONFIG_SND_SOC_INTEL_KBL_DA7219_MAX98927_MACH=m
 CONFIG_SND_SOC_INTEL_KBL_RT5660_MACH=m
+# CONFIG_SND_SOC_INTEL_GLK_DA7219_MAX98357A_MACH is not set
 CONFIG_SND_SOC_INTEL_GLK_RT5682_MAX98357A_MACH=m
 CONFIG_SND_SOC_INTEL_SKL_HDA_DSP_GENERIC_MACH=m
 CONFIG_SND_SOC_INTEL_SOF_RT5682_MACH=m
 CONFIG_SND_SOC_INTEL_CML_LP_DA7219_MAX98357A_MACH=m
+# CONFIG_SND_SOC_INTEL_SOF_CML_RT1011_RT5682_MACH is not set
 CONFIG_SND_SOC_MTK_BTCVSD=m
 CONFIG_SND_SOC_SOF_TOPLEVEL=y
 CONFIG_SND_SOC_SOF_PCI=m
 CONFIG_SND_SOC_SOF_ACPI=m
 CONFIG_SND_SOC_SOF_OF=m
-CONFIG_SND_SOC_SOF_OPTIONS=m
-# CONFIG_SND_SOC_SOF_NOCODEC_SUPPORT is not set
-# CONFIG_SND_SOC_SOF_STRICT_ABI_CHECKS is not set
-# CONFIG_SND_SOC_SOF_DEBUG is not set
+# CONFIG_SND_SOC_SOF_DEVELOPER_SUPPORT is not set
 CONFIG_SND_SOC_SOF=m
 CONFIG_SND_SOC_SOF_PROBE_WORK_QUEUE=y
 CONFIG_SND_SOC_SOF_INTEL_TOPLEVEL=y
@@ -6928,8 +6910,6 @@ CONFIG_SND_SOC_SOF_INTEL_PCI=m
 CONFIG_SND_SOC_SOF_INTEL_HIFI_EP_IPC=m
 CONFIG_SND_SOC_SOF_INTEL_ATOM_HIFI_EP=m
 CONFIG_SND_SOC_SOF_INTEL_COMMON=m
-# CONFIG_SND_SOC_SOF_BAYTRAIL_SUPPORT is not set
-# CONFIG_SND_SOC_SOF_BROADWELL_SUPPORT is not set
 CONFIG_SND_SOC_SOF_MERRIFIELD_SUPPORT=y
 CONFIG_SND_SOC_SOF_MERRIFIELD=m
 CONFIG_SND_SOC_SOF_APOLLOLAKE_SUPPORT=y
@@ -6950,10 +6930,12 @@ CONFIG_SND_SOC_SOF_TIGERLAKE_SUPPORT=y
 CONFIG_SND_SOC_SOF_TIGERLAKE=m
 CONFIG_SND_SOC_SOF_ELKHARTLAKE_SUPPORT=y
 CONFIG_SND_SOC_SOF_ELKHARTLAKE=m
+# CONFIG_SND_SOC_SOF_JASPERLAKE_SUPPORT is not set
 CONFIG_SND_SOC_SOF_HDA_COMMON=m
 CONFIG_SND_SOC_SOF_HDA_LINK=y
 CONFIG_SND_SOC_SOF_HDA_AUDIO_CODEC=y
 # CONFIG_SND_SOC_SOF_HDA_ALWAYS_ENABLE_DMI_L1 is not set
+# CONFIG_SND_SOC_SOF_HDA_COMMON_HDMI_CODEC is not set
 CONFIG_SND_SOC_SOF_HDA_LINK_BASELINE=m
 CONFIG_SND_SOC_SOF_HDA=m
 CONFIG_SND_SOC_SOF_XTENSA=m
@@ -6981,6 +6963,8 @@ CONFIG_SND_SOC_ADAU1761=m
 CONFIG_SND_SOC_ADAU1761_I2C=m
 CONFIG_SND_SOC_ADAU1761_SPI=m
 CONFIG_SND_SOC_ADAU7002=m
+# CONFIG_SND_SOC_ADAU7118_HW is not set
+# CONFIG_SND_SOC_ADAU7118_I2C is not set
 CONFIG_SND_SOC_AK4104=m
 CONFIG_SND_SOC_AK4118=m
 CONFIG_SND_SOC_AK4458=m
@@ -7095,6 +7079,8 @@ CONFIG_SND_SOC_STA32X=m
 CONFIG_SND_SOC_STA350=m
 CONFIG_SND_SOC_STI_SAS=m
 CONFIG_SND_SOC_TAS2552=m
+# CONFIG_SND_SOC_TAS2562 is not set
+# CONFIG_SND_SOC_TAS2770 is not set
 CONFIG_SND_SOC_TAS5086=m
 CONFIG_SND_SOC_TAS571X=m
 CONFIG_SND_SOC_TAS5720=m
@@ -7689,6 +7675,7 @@ CONFIG_TYPEC_WCOVE=m
 CONFIG_TYPEC_UCSI=m
 CONFIG_UCSI_CCG=m
 CONFIG_UCSI_ACPI=m
+# CONFIG_TYPEC_HD3SS3220 is not set
 CONFIG_TYPEC_TPS6598X=m
 
 #
@@ -7731,6 +7718,7 @@ CONFIG_MMC_SDHCI_OF_AT91=m
 CONFIG_MMC_SDHCI_OF_DWCMSHC=m
 CONFIG_MMC_SDHCI_CADENCE=m
 CONFIG_MMC_SDHCI_F_SDH30=m
+# CONFIG_MMC_SDHCI_MILBEAUT is not set
 CONFIG_MMC_WBSD=m
 CONFIG_MMC_ALCOR=m
 CONFIG_MMC_TIFM_SD=m
@@ -7784,6 +7772,7 @@ CONFIG_LEDS_BCM6328=m
 CONFIG_LEDS_BCM6358=m
 CONFIG_LEDS_CPCAP=m
 CONFIG_LEDS_CR0014114=m
+# CONFIG_LEDS_EL15203000 is not set
 CONFIG_LEDS_LM3530=m
 CONFIG_LEDS_LM3532=m
 CONFIG_LEDS_LM3533=m
@@ -7881,7 +7870,6 @@ CONFIG_INFINIBAND_MTHCA=m
 CONFIG_INFINIBAND_MTHCA_DEBUG=y
 CONFIG_INFINIBAND_QIB=m
 CONFIG_INFINIBAND_QIB_DCA=y
-CONFIG_INFINIBAND_CXGB3=m
 CONFIG_INFINIBAND_CXGB4=m
 CONFIG_INFINIBAND_EFA=m
 CONFIG_INFINIBAND_I40IW=m
@@ -8107,6 +8095,7 @@ CONFIG_DW_DMAC_PCI=y
 CONFIG_DW_EDMA=m
 CONFIG_DW_EDMA_PCIE=m
 CONFIG_HSU_DMA=y
+# CONFIG_SF_PDMA is not set
 
 #
 # DMA Clients
@@ -8497,7 +8486,6 @@ CONFIG_UWB_HWA=m
 CONFIG_UWB_WHCI=m
 CONFIG_UWB_I1480U=m
 CONFIG_EXFAT_FS=m
-CONFIG_EXFAT_DONT_MOUNT_VFAT=y
 CONFIG_EXFAT_DISCARD=y
 # CONFIG_EXFAT_DELAYED_SYNC is not set
 # CONFIG_EXFAT_KERNEL_DEBUG is not set
@@ -8505,6 +8493,9 @@ CONFIG_EXFAT_DISCARD=y
 CONFIG_EXFAT_DEFAULT_CODEPAGE=437
 CONFIG_EXFAT_DEFAULT_IOCHARSET="utf8"
 CONFIG_QLGE=m
+CONFIG_NET_VENDOR_HP=y
+CONFIG_HP100=m
+# CONFIG_WFX is not set
 CONFIG_X86_PLATFORM_DEVICES=y
 CONFIG_ACER_WMI=m
 CONFIG_ACER_WIRELESS=m
@@ -8599,6 +8590,7 @@ CONFIG_PCENGINES_APU2=m
 CONFIG_INTEL_SPEED_SELECT_INTERFACE=m
 # end of Intel Speed Select Technology interface support
 
+CONFIG_SYSTEM76_ACPI=m
 CONFIG_PMC_ATOM=y
 CONFIG_MFD_CROS_EC=m
 CONFIG_CHROME_PLATFORMS=y
@@ -8617,6 +8609,7 @@ CONFIG_CROS_EC_CHARDEV=m
 CONFIG_CROS_EC_LIGHTBAR=m
 CONFIG_CROS_EC_VBC=m
 CONFIG_CROS_EC_DEBUGFS=m
+CONFIG_CROS_EC_SENSORHUB=m
 CONFIG_CROS_EC_SYSFS=m
 CONFIG_CROS_USBPD_LOGGER=m
 CONFIG_WILCO_EC=m
@@ -8683,6 +8676,7 @@ CONFIG_IOMMU_SUPPORT=y
 # CONFIG_IOMMU_DEBUGFS is not set
 # CONFIG_IOMMU_DEFAULT_PASSTHROUGH is not set
 CONFIG_OF_IOMMU=y
+CONFIG_IOMMU_DMA=y
 CONFIG_AMD_IOMMU=y
 CONFIG_AMD_IOMMU_V2=y
 CONFIG_DMAR_TABLE=y
@@ -8862,6 +8856,7 @@ CONFIG_AD_SIGMA_DELTA=m
 CONFIG_AD7124=m
 CONFIG_AD7266=m
 CONFIG_AD7291=m
+# CONFIG_AD7292 is not set
 CONFIG_AD7298=m
 CONFIG_AD7476=m
 CONFIG_AD7606=m
@@ -9104,6 +9099,8 @@ CONFIG_ADIS16480=m
 CONFIG_BMI160=m
 CONFIG_BMI160_I2C=m
 CONFIG_BMI160_SPI=m
+# CONFIG_FXOS8700_I2C is not set
+# CONFIG_FXOS8700_SPI is not set
 CONFIG_KMX61=m
 CONFIG_INV_MPU6050_IIO=m
 CONFIG_INV_MPU6050_I2C=m
@@ -9122,6 +9119,7 @@ CONFIG_IIO_ADIS_LIB_BUFFER=y
 #
 CONFIG_ACPI_ALS=m
 CONFIG_ADJD_S311=m
+# CONFIG_ADUX1020 is not set
 CONFIG_AL3320A=m
 CONFIG_APDS9300=m
 CONFIG_APDS9960=m
@@ -9164,6 +9162,7 @@ CONFIG_TSL4531=m
 CONFIG_US5182D=m
 CONFIG_VCNL4000=m
 CONFIG_VCNL4035=m
+# CONFIG_VEML6030 is not set
 CONFIG_VEML6070=m
 CONFIG_VL6180=m
 CONFIG_ZOPT2201=m
@@ -9293,6 +9292,7 @@ CONFIG_AD2S1200=m
 #
 # Temperature sensors
 #
+# CONFIG_LTC2983 is not set
 CONFIG_MAXIM_THERMOCOUPLE=m
 CONFIG_HID_SENSOR_TEMP=m
 CONFIG_MLX90614=m
@@ -9422,6 +9422,7 @@ CONFIG_DAX_DRIVER=y
 CONFIG_DAX=y
 CONFIG_DEV_DAX=m
 CONFIG_DEV_DAX_PMEM=m
+CONFIG_DEV_DAX_HMEM=m
 CONFIG_DEV_DAX_KMEM=m
 CONFIG_DEV_DAX_PMEM_COMPAT=m
 CONFIG_NVMEM=y
@@ -9472,6 +9473,7 @@ CONFIG_FSI=m
 CONFIG_FSI_NEW_DEV_NODE=y
 CONFIG_FSI_MASTER_GPIO=m
 CONFIG_FSI_MASTER_HUB=m
+# CONFIG_FSI_MASTER_ASPEED is not set
 CONFIG_FSI_SCOM=m
 CONFIG_FSI_SBEFIFO=m
 CONFIG_FSI_OCC=m
@@ -9866,13 +9868,13 @@ CONFIG_DLM=m
 # CONFIG_DLM_DEBUG is not set
 CONFIG_UNICODE=y
 # CONFIG_UNICODE_NORMALIZATION_SELFTEST is not set
+CONFIG_IO_WQ=y
 # end of File systems
 
 #
 # Security options
 #
 CONFIG_KEYS=y
-CONFIG_KEYS_COMPAT=y
 CONFIG_KEYS_REQUEST_CACHE=y
 CONFIG_PERSISTENT_KEYRINGS=y
 CONFIG_BIG_KEYS=y
@@ -9967,8 +9969,8 @@ CONFIG_CRYPTO_ALGAPI=y
 CONFIG_CRYPTO_ALGAPI2=y
 CONFIG_CRYPTO_AEAD=y
 CONFIG_CRYPTO_AEAD2=y
-CONFIG_CRYPTO_BLKCIPHER=y
-CONFIG_CRYPTO_BLKCIPHER2=y
+CONFIG_CRYPTO_SKCIPHER=y
+CONFIG_CRYPTO_SKCIPHER2=y
 CONFIG_CRYPTO_HASH=y
 CONFIG_CRYPTO_HASH2=y
 CONFIG_CRYPTO_RNG=y
@@ -10002,6 +10004,8 @@ CONFIG_CRYPTO_DH=y
 CONFIG_CRYPTO_ECC=m
 CONFIG_CRYPTO_ECDH=m
 CONFIG_CRYPTO_ECRDSA=m
+# CONFIG_CRYPTO_CURVE25519 is not set
+# CONFIG_CRYPTO_CURVE25519_X86 is not set
 
 #
 # Authenticated Encryption with Associated Data
@@ -10049,6 +10053,9 @@ CONFIG_CRYPTO_CRC32C_INTEL=m
 CONFIG_CRYPTO_CRC32=m
 CONFIG_CRYPTO_CRC32_PCLMUL=m
 CONFIG_CRYPTO_XXHASH=m
+CONFIG_CRYPTO_BLAKE2B=m
+# CONFIG_CRYPTO_BLAKE2S is not set
+# CONFIG_CRYPTO_BLAKE2S_X86 is not set
 CONFIG_CRYPTO_CRCT10DIF=y
 CONFIG_CRYPTO_CRCT10DIF_PCLMUL=m
 CONFIG_CRYPTO_GHASH=y
@@ -10065,7 +10072,6 @@ CONFIG_CRYPTO_SHA1=y
 CONFIG_CRYPTO_SHA1_SSSE3=m
 CONFIG_CRYPTO_SHA256_SSSE3=m
 CONFIG_CRYPTO_SHA512_SSSE3=m
-CONFIG_CRYPTO_LIB_SHA256=y
 CONFIG_CRYPTO_SHA256=y
 CONFIG_CRYPTO_SHA512=y
 CONFIG_CRYPTO_SHA3=m
@@ -10078,12 +10084,10 @@ CONFIG_CRYPTO_GHASH_CLMUL_NI_INTEL=m
 #
 # Ciphers
 #
-CONFIG_CRYPTO_LIB_AES=y
 CONFIG_CRYPTO_AES=y
 CONFIG_CRYPTO_AES_TI=m
 CONFIG_CRYPTO_AES_NI_INTEL=m
 CONFIG_CRYPTO_ANUBIS=m
-CONFIG_CRYPTO_LIB_ARC4=m
 CONFIG_CRYPTO_ARC4=m
 CONFIG_CRYPTO_BLOWFISH=m
 CONFIG_CRYPTO_BLOWFISH_COMMON=m
@@ -10097,7 +10101,6 @@ CONFIG_CRYPTO_CAST5=m
 CONFIG_CRYPTO_CAST5_AVX_X86_64=m
 CONFIG_CRYPTO_CAST6=m
 CONFIG_CRYPTO_CAST6_AVX_X86_64=m
-CONFIG_CRYPTO_LIB_DES=m
 CONFIG_CRYPTO_DES=m
 CONFIG_CRYPTO_DES3_EDE_X86_64=m
 CONFIG_CRYPTO_FCRYPT=m
@@ -10145,6 +10148,24 @@ CONFIG_CRYPTO_USER_API_RNG=m
 CONFIG_CRYPTO_USER_API_AEAD=m
 # CONFIG_CRYPTO_STATS is not set
 CONFIG_CRYPTO_HASH_INFO=y
+
+#
+# Crypto library routines
+#
+CONFIG_CRYPTO_LIB_AES=y
+CONFIG_CRYPTO_LIB_ARC4=m
+# CONFIG_CRYPTO_LIB_BLAKE2S is not set
+CONFIG_CRYPTO_ARCH_HAVE_LIB_CHACHA=m
+CONFIG_CRYPTO_LIB_CHACHA_GENERIC=m
+# CONFIG_CRYPTO_LIB_CHACHA is not set
+# CONFIG_CRYPTO_LIB_CURVE25519 is not set
+CONFIG_CRYPTO_LIB_DES=m
+CONFIG_CRYPTO_LIB_POLY1305_RSIZE=4
+CONFIG_CRYPTO_ARCH_HAVE_LIB_POLY1305=m
+CONFIG_CRYPTO_LIB_POLY1305_GENERIC=m
+# CONFIG_CRYPTO_LIB_POLY1305 is not set
+# CONFIG_CRYPTO_LIB_CHACHA20POLY1305 is not set
+CONFIG_CRYPTO_LIB_SHA256=y
 CONFIG_CRYPTO_HW=y
 CONFIG_CRYPTO_DEV_PADLOCK=m
 CONFIG_CRYPTO_DEV_PADLOCK_AES=m
@@ -10169,10 +10190,10 @@ CONFIG_CRYPTO_DEV_NITROX=m
 CONFIG_CRYPTO_DEV_NITROX_CNN55XX=m
 CONFIG_CRYPTO_DEV_CHELSIO=m
 CONFIG_CHELSIO_IPSEC_INLINE=y
-CONFIG_CRYPTO_DEV_CHELSIO_TLS=m
 CONFIG_CRYPTO_DEV_VIRTIO=m
 CONFIG_CRYPTO_DEV_SAFEXCEL=m
 CONFIG_CRYPTO_DEV_CCREE=m
+# CONFIG_CRYPTO_DEV_AMLOGIC_GXL is not set
 CONFIG_ASYMMETRIC_KEY_TYPE=y
 CONFIG_ASYMMETRIC_PUBLIC_KEY_SUBTYPE=y
 CONFIG_ASYMMETRIC_TPM_KEY_SUBTYPE=m
@@ -10316,6 +10337,7 @@ CONFIG_FONT_8x16=y
 CONFIG_FONT_AUTOSELECT=y
 CONFIG_SG_POOL=y
 CONFIG_ARCH_HAS_PMEM_API=y
+CONFIG_MEMREGION=y
 CONFIG_ARCH_HAS_UACCESS_FLUSHCACHE=y
 CONFIG_ARCH_HAS_UACCESS_MCSAFE=y
 CONFIG_ARCH_STACKWALK=y
@@ -10339,6 +10361,8 @@ CONFIG_CONSOLE_LOGLEVEL_QUIET=1
 CONFIG_MESSAGE_LOGLEVEL_DEFAULT=4
 # CONFIG_BOOT_PRINTK_DELAY is not set
 CONFIG_DYNAMIC_DEBUG=y
+CONFIG_SYMBOLIC_ERRNAME=y
+CONFIG_DEBUG_BUGVERBOSE=y
 # end of printk and dmesg options
 
 #
@@ -10349,7 +10373,6 @@ CONFIG_DYNAMIC_DEBUG=y
 CONFIG_FRAME_WARN=2048
 CONFIG_STRIP_ASM_SYMS=y
 # CONFIG_READABLE_ASM is not set
-CONFIG_DEBUG_FS=y
 # CONFIG_HEADERS_INSTALL is not set
 CONFIG_OPTIMIZE_INLINING=y
 # CONFIG_DEBUG_SECTION_MISMATCH is not set
@@ -10358,9 +10381,20 @@ CONFIG_STACK_VALIDATION=y
 # CONFIG_DEBUG_FORCE_WEAK_PER_CPU is not set
 # end of Compile-time checks and compiler options
 
+#
+# Generic Kernel Debugging Instruments
+#
 CONFIG_MAGIC_SYSRQ=y
 CONFIG_MAGIC_SYSRQ_DEFAULT_ENABLE=0x0
 CONFIG_MAGIC_SYSRQ_SERIAL=y
+CONFIG_DEBUG_FS=y
+CONFIG_HAVE_ARCH_KGDB=y
+# CONFIG_KGDB is not set
+CONFIG_ARCH_HAS_UBSAN_SANITIZE_ALL=y
+# CONFIG_UBSAN is not set
+CONFIG_UBSAN_ALIGNMENT=y
+# end of Generic Kernel Debugging Instruments
+
 CONFIG_DEBUG_KERNEL=y
 CONFIG_DEBUG_MISC=y
 
@@ -10379,25 +10413,27 @@ CONFIG_DEBUG_MISC=y
 CONFIG_HAVE_DEBUG_KMEMLEAK=y
 # CONFIG_DEBUG_KMEMLEAK is not set
 # CONFIG_DEBUG_STACK_USAGE is not set
+CONFIG_SCHED_STACK_END_CHECK=y
 # CONFIG_DEBUG_VM is not set
 CONFIG_ARCH_HAS_DEBUG_VIRTUAL=y
 # CONFIG_DEBUG_VIRTUAL is not set
 CONFIG_DEBUG_MEMORY_INIT=y
 # CONFIG_DEBUG_PER_CPU_MAPS is not set
 CONFIG_HAVE_ARCH_KASAN=y
+CONFIG_HAVE_ARCH_KASAN_VMALLOC=y
 CONFIG_CC_HAS_KASAN_GENERIC=y
 # CONFIG_KASAN is not set
 CONFIG_KASAN_STACK=1
 # end of Memory Debugging
 
-CONFIG_ARCH_HAS_KCOV=y
-CONFIG_CC_HAS_SANCOV_TRACE_PC=y
-# CONFIG_KCOV is not set
 # CONFIG_DEBUG_SHIRQ is not set
 
 #
-# Debug Lockups and Hangs
+# Debug Oops, Lockups and Hangs
 #
+# CONFIG_PANIC_ON_OOPS is not set
+CONFIG_PANIC_ON_OOPS_VALUE=0
+CONFIG_PANIC_TIMEOUT=0
 CONFIG_LOCKUP_DETECTOR=y
 CONFIG_SOFTLOCKUP_DETECTOR=y
 # CONFIG_BOOTPARAM_SOFTLOCKUP_PANIC is not set
@@ -10412,15 +10448,16 @@ CONFIG_DEFAULT_HUNG_TASK_TIMEOUT=120
 # CONFIG_BOOTPARAM_HUNG_TASK_PANIC is not set
 CONFIG_BOOTPARAM_HUNG_TASK_PANIC_VALUE=0
 # CONFIG_WQ_WATCHDOG is not set
-# end of Debug Lockups and Hangs
+# end of Debug Oops, Lockups and Hangs
 
-# CONFIG_PANIC_ON_OOPS is not set
-CONFIG_PANIC_ON_OOPS_VALUE=0
-CONFIG_PANIC_TIMEOUT=0
+#
+# Scheduler Debugging
+#
 CONFIG_SCHED_DEBUG=y
 CONFIG_SCHED_INFO=y
 CONFIG_SCHEDSTATS=y
-CONFIG_SCHED_STACK_END_CHECK=y
+# end of Scheduler Debugging
+
 # CONFIG_DEBUG_TIMEKEEPING is not set
 CONFIG_DEBUG_PREEMPT=y
 
@@ -10445,11 +10482,17 @@ CONFIG_LOCK_DEBUGGING_SUPPORT=y
 CONFIG_STACKTRACE=y
 # CONFIG_WARN_ALL_UNSEEDED_RANDOM is not set
 # CONFIG_DEBUG_KOBJECT is not set
-CONFIG_DEBUG_BUGVERBOSE=y
+
+#
+# Debug kernel data structures
+#
 # CONFIG_DEBUG_LIST is not set
 # CONFIG_DEBUG_PLIST is not set
 # CONFIG_DEBUG_SG is not set
 # CONFIG_DEBUG_NOTIFIERS is not set
+# CONFIG_BUG_ON_DATA_CORRUPTION is not set
+# end of Debug kernel data structures
+
 # CONFIG_DEBUG_CREDENTIALS is not set
 
 #
@@ -10465,9 +10508,6 @@ CONFIG_RCU_CPU_STALL_TIMEOUT=60
 # CONFIG_DEBUG_WQ_FORCE_RR_CPU is not set
 # CONFIG_DEBUG_BLOCK_EXT_DEVT is not set
 # CONFIG_CPU_HOTPLUG_STATE_CONTROL is not set
-# CONFIG_NOTIFIER_ERROR_INJECTION is not set
-CONFIG_FUNCTION_ERROR_INJECTION=y
-# CONFIG_FAULT_INJECTION is not set
 CONFIG_LATENCYTOP=y
 CONFIG_USER_STACKTRACE_SUPPORT=y
 CONFIG_NOP_TRACER=y
@@ -10475,6 +10515,7 @@ CONFIG_HAVE_FUNCTION_TRACER=y
 CONFIG_HAVE_FUNCTION_GRAPH_TRACER=y
 CONFIG_HAVE_DYNAMIC_FTRACE=y
 CONFIG_HAVE_DYNAMIC_FTRACE_WITH_REGS=y
+CONFIG_HAVE_DYNAMIC_FTRACE_WITH_DIRECT_CALLS=y
 CONFIG_HAVE_FTRACE_MCOUNT_RECORD=y
 CONFIG_HAVE_SYSCALL_TRACEPOINTS=y
 CONFIG_HAVE_FENTRY=y
@@ -10511,6 +10552,7 @@ CONFIG_DYNAMIC_EVENTS=y
 CONFIG_PROBE_EVENTS=y
 CONFIG_DYNAMIC_FTRACE=y
 CONFIG_DYNAMIC_FTRACE_WITH_REGS=y
+CONFIG_DYNAMIC_FTRACE_WITH_DIRECT_CALLS=y
 CONFIG_FUNCTION_PROFILER=y
 CONFIG_BPF_KPROBE_OVERRIDE=y
 CONFIG_FTRACE_MCOUNT_RECORD=y
@@ -10518,6 +10560,7 @@ CONFIG_FTRACE_MCOUNT_RECORD=y
 CONFIG_MMIOTRACE=y
 CONFIG_TRACING_MAP=y
 CONFIG_HIST_TRIGGERS=y
+# CONFIG_TRACE_EVENT_INJECT is not set
 # CONFIG_MMIOTRACE_TEST is not set
 # CONFIG_TRACEPOINT_BENCHMARK is not set
 # CONFIG_RING_BUFFER_BENCHMARK is not set
@@ -10525,6 +10568,53 @@ CONFIG_HIST_TRIGGERS=y
 # CONFIG_PREEMPTIRQ_DELAY_TEST is not set
 # CONFIG_TRACE_EVAL_MAP_FILE is not set
 # CONFIG_PROVIDE_OHCI1394_DMA_INIT is not set
+# CONFIG_SAMPLES is not set
+CONFIG_ARCH_HAS_DEVMEM_IS_ALLOWED=y
+CONFIG_STRICT_DEVMEM=y
+CONFIG_IO_STRICT_DEVMEM=y
+
+#
+# x86 Debugging
+#
+CONFIG_TRACE_IRQFLAGS_SUPPORT=y
+# CONFIG_X86_VERBOSE_BOOTUP is not set
+CONFIG_EARLY_PRINTK=y
+# CONFIG_EARLY_PRINTK_DBGP is not set
+# CONFIG_EARLY_PRINTK_USB_XDBC is not set
+CONFIG_X86_PTDUMP_CORE=y
+# CONFIG_X86_PTDUMP is not set
+# CONFIG_EFI_PGT_DUMP is not set
+CONFIG_DEBUG_WX=y
+CONFIG_DOUBLEFAULT=y
+# CONFIG_DEBUG_TLBFLUSH is not set
+# CONFIG_IOMMU_DEBUG is not set
+CONFIG_HAVE_MMIOTRACE_SUPPORT=y
+# CONFIG_X86_DECODER_SELFTEST is not set
+CONFIG_IO_DELAY_0X80=y
+# CONFIG_IO_DELAY_0XED is not set
+# CONFIG_IO_DELAY_UDELAY is not set
+# CONFIG_IO_DELAY_NONE is not set
+CONFIG_DEBUG_BOOT_PARAMS=y
+# CONFIG_CPA_DEBUG is not set
+# CONFIG_DEBUG_ENTRY is not set
+# CONFIG_DEBUG_NMI_SELFTEST is not set
+# CONFIG_X86_DEBUG_FPU is not set
+# CONFIG_PUNIT_ATOM_DEBUG is not set
+CONFIG_UNWINDER_ORC=y
+# CONFIG_UNWINDER_FRAME_POINTER is not set
+# CONFIG_UNWINDER_GUESS is not set
+# end of x86 Debugging
+
+#
+# Kernel Testing and Coverage
+#
+# CONFIG_KUNIT is not set
+# CONFIG_NOTIFIER_ERROR_INJECTION is not set
+CONFIG_FUNCTION_ERROR_INJECTION=y
+# CONFIG_FAULT_INJECTION is not set
+CONFIG_ARCH_HAS_KCOV=y
+CONFIG_CC_HAS_SANCOV_TRACE_PC=y
+# CONFIG_KCOV is not set
 CONFIG_RUNTIME_TESTING_MENU=y
 CONFIG_LKDTM=m
 # CONFIG_TEST_LIST_SORT is not set
@@ -10567,41 +10657,6 @@ CONFIG_LKDTM=m
 # CONFIG_TEST_STACKINIT is not set
 # CONFIG_TEST_MEMINIT is not set
 # CONFIG_MEMTEST is not set
-# CONFIG_BUG_ON_DATA_CORRUPTION is not set
-# CONFIG_SAMPLES is not set
-CONFIG_HAVE_ARCH_KGDB=y
-# CONFIG_KGDB is not set
-CONFIG_ARCH_HAS_UBSAN_SANITIZE_ALL=y
-# CONFIG_UBSAN is not set
-CONFIG_UBSAN_ALIGNMENT=y
-CONFIG_ARCH_HAS_DEVMEM_IS_ALLOWED=y
-CONFIG_STRICT_DEVMEM=y
-CONFIG_IO_STRICT_DEVMEM=y
-CONFIG_TRACE_IRQFLAGS_SUPPORT=y
-# CONFIG_X86_VERBOSE_BOOTUP is not set
-CONFIG_EARLY_PRINTK=y
-# CONFIG_EARLY_PRINTK_DBGP is not set
-# CONFIG_EARLY_PRINTK_USB_XDBC is not set
-CONFIG_X86_PTDUMP_CORE=y
-# CONFIG_X86_PTDUMP is not set
-# CONFIG_EFI_PGT_DUMP is not set
-CONFIG_DEBUG_WX=y
-CONFIG_DOUBLEFAULT=y
-# CONFIG_DEBUG_TLBFLUSH is not set
-# CONFIG_IOMMU_DEBUG is not set
-CONFIG_HAVE_MMIOTRACE_SUPPORT=y
-# CONFIG_X86_DECODER_SELFTEST is not set
-CONFIG_IO_DELAY_0X80=y
-# CONFIG_IO_DELAY_0XED is not set
-# CONFIG_IO_DELAY_UDELAY is not set
-# CONFIG_IO_DELAY_NONE is not set
-CONFIG_DEBUG_BOOT_PARAMS=y
-# CONFIG_CPA_DEBUG is not set
-# CONFIG_DEBUG_ENTRY is not set
-# CONFIG_DEBUG_NMI_SELFTEST is not set
-# CONFIG_X86_DEBUG_FPU is not set
-# CONFIG_PUNIT_ATOM_DEBUG is not set
-CONFIG_UNWINDER_ORC=y
-# CONFIG_UNWINDER_FRAME_POINTER is not set
-# CONFIG_UNWINDER_GUESS is not set
+# CONFIG_HYPERV_TESTING is not set
+# end of Kernel Testing and Coverage
 # end of Kernel hacking
diff --git a/create-aufs.sh b/create-aufs.sh
index 60e2e31..dfa0cf3 100644
--- a/create-aufs.sh
+++ b/create-aufs.sh
@@ -5,7 +5,7 @@ rm -Rf aufs5-standalone
 git clone git://github.com/sfjro/aufs5-standalone.git aufs5-standalone
 cd aufs5-standalone
 git branch -r
-git checkout origin/aufs5.4
+git checkout origin/aufs5.x-rcN
 
 # modify what you want
 
@@ -15,16 +15,16 @@ git checkout origin/aufs5.4
 rm -v $(find . -type f -name '*.orig')
 #grep -qse 'EXPORT_SYMBOL(' aufs4-standalone.patch && \
 #sed -i-old -e 's|EXPORT_SYMBOL(|EXPORT_SYMBOL_GPL(|' aufs4-standalone.patch
-rm -rvf ../tmp/linux-5.4
-mkdir -p ../tmp/linux-5.4
-cp -a fs ../tmp/linux-5.4
-cp -a include ../tmp/linux-5.4
-cp -a Documentation ../tmp/linux-5.4
-rm -v ../tmp/linux-5.4/include/uapi/linux/Kbuild
+rm -rvf ../tmp/linux-5.x-rcN
+mkdir -p ../tmp/linux-5.x-rcN
+cp -a fs ../tmp/linux-5.x-rcN
+cp -a include ../tmp/linux-5.x-rcN
+cp -a Documentation ../tmp/linux-5.x-rcN
+rm -v ../tmp/linux-5.x-rcN/include/uapi/linux/Kbuild
 cd ../tmp
-diff -Naur null linux-5.4  | filterdiff | \
-sed -e 's|null\(/include/uapi/linux/Kbuild\)|linux-5.4-old\1|;s|^--- null.*|--- /dev/null|;\|linux-5.4/include/uapi/linux/Kbuild|,${\|@@ -0,0 +1 @@|,$d}' \
-> aufs$(sed -ne 's|#define.*AUFS_VERSION.*"\(.*\)"|\1|p'  linux-5.4/include/uapi/linux/aufs_type.h).patch
+diff -Naur null linux-5.x-rcN  | filterdiff | \
+sed -e 's|null\(/include/uapi/linux/Kbuild\)|linux-5.x-rcN-old\1|;s|^--- null.*|--- /dev/null|;\|linux-5.x-rcN/include/uapi/linux/Kbuild|,${\|@@ -0,0 +1 @@|,$d}' \
+> aufs$(sed -ne 's|#define.*AUFS_VERSION.*"\(.*\)"|\1|p'  linux-5.x-rcN/include/uapi/linux/aufs_type.h).patch
 mv *.patch $OLDPWD
 cd $OLDPWD
 mv *.patch ..
diff --git a/gen-stable-queue-patch.sh b/gen-stable-queue-patch.sh
deleted file mode 100755
index e1154cc..0000000
--- a/gen-stable-queue-patch.sh
+++ /dev/null
@@ -1,23 +0,0 @@
-#!/bin/bash
-source PKGBUILD
-
-if [ -d stable-queue ] ;
-then
-  cd stable-queue
-  git pull
-  cd ..
-else
-  git clone git://git.kernel.org/pub/scm/linux/kernel/git/stable/stable-queue.git
-fi
-
-if [ -d stable-queue/queue-$_basekernel ] ;
-then
-  cd stable-queue/queue-$_basekernel
-  echo "" > ../../prepatch-$_basekernel.patch
-  for i in $(cat ./series); 
-  do 
-     cat $i >> ../../prepatch-$_basekernel.patch; 
-  done
-else
-  echo "There is no patch-set this time"
-fi
diff --git a/lockdep-debug.patch b/lockdep-debug.patch
index b7b1202..1ea80bf 100644
--- a/lockdep-debug.patch
+++ b/lockdep-debug.patch
@@ -1,8 +1,8 @@
 SPDX-License-Identifier: GPL-2.0
-aufs5.4 lockdep patch
+aufs5.x-rcN lockdep patch
 
 diff --git a/include/linux/lockdep.h b/include/linux/lockdep.h
-index f452521f2e05..8043dba1cceb 100644
+index 4f4677020360..1aef2c1047a3 100644
 --- a/include/linux/lockdep.h
 +++ b/include/linux/lockdep.h
 @@ -17,7 +17,7 @@ struct lockdep_map;
@@ -15,17 +15,9 @@ index f452521f2e05..8043dba1cceb 100644
  #include <linux/types.h>
  
 diff --git a/kernel/locking/lockdep.c b/kernel/locking/lockdep.c
-index d7f71842f8a2..f1a630b92260 100644
+index d9bc5cbe9078..30cdce225406 100644
 --- a/kernel/locking/lockdep.c
 +++ b/kernel/locking/lockdep.c
-@@ -4767,6 +4773,7 @@ void lockdep_reset(void)
- 		INIT_HLIST_HEAD(chainhash_table + i);
- 	raw_local_irq_restore(flags);
- }
-+/* EXPORT_SYMBOL_GPL(lock_reset); */
- 
- /* Remove a class from a lock chain. Must be called with the graph lock held. */
- static void remove_class_from_lock_chain(struct pending_free *pf,
 diff --git a/kernel/locking/lockdep_internals.h b/kernel/locking/lockdep_internals.h
 index 18d85aebbb57..1fe552a33fb1 100644
 --- a/kernel/locking/lockdep_internals.h
diff --git a/proc_mounts.patch b/proc_mounts.patch
index 038212c..0f72565 100644
--- a/proc_mounts.patch
+++ b/proc_mounts.patch
@@ -1,4 +1,5 @@
 SPDX-License-Identifier: GPL-2.0
+
 diff --git a/fs/mount.h b/fs/mount.h
 index 711a4093e475..a5703d5c7205 100644
 --- a/fs/mount.h
@@ -15,7 +16,7 @@ index 711a4093e475..a5703d5c7205 100644
  
  extern const struct seq_operations mounts_op;
 diff --git a/fs/namespace.c b/fs/namespace.c
-index 2adfe7b166a3..eb4f14c2dd0e 100644
+index 5e1bf611a9eb..a4cc7a494f32 100644
 --- a/fs/namespace.c
 +++ b/fs/namespace.c
 @@ -1246,46 +1246,80 @@ struct vfsmount *mnt_clone_internal(const struct path *path)
diff --git a/tmpfs-idr.patch b/tmpfs-idr.patch
index 37eeeb2..1f27fa4 100644
--- a/tmpfs-idr.patch
+++ b/tmpfs-idr.patch
@@ -1,4 +1,5 @@
 SPDX-License-Identifier: GPL-2.0
+
 diff --git a/include/linux/shmem_fs.h b/include/linux/shmem_fs.h
 index de8e4b71e3ba..ae8c9fcaea91 100644
 --- a/include/linux/shmem_fs.h
@@ -20,7 +21,7 @@ index de8e4b71e3ba..ae8c9fcaea91 100644
  	umode_t mode;		    /* Mount mode for root directory */
  	unsigned char huge;	    /* Whether to try for hugepages */
 diff --git a/mm/shmem.c b/mm/shmem.c
-index 220be9fa2c41..56b50b2b3639 100644
+index 8793e8cc1a48..ae68925ff71a 100644
 --- a/mm/shmem.c
 +++ b/mm/shmem.c
 @@ -110,7 +110,7 @@ struct shmem_falloc {
@@ -61,7 +62,7 @@ index 220be9fa2c41..56b50b2b3639 100644
  	shmem_free_inode(inode->i_sb);
  	clear_inode(inode);
  }
-@@ -2236,13 +2244,13 @@ static struct inode *shmem_get_inode(struct super_block *sb, const struct inode
+@@ -2242,13 +2250,13 @@ static struct inode *shmem_get_inode(struct super_block *sb, const struct inode
  	struct inode *inode;
  	struct shmem_inode_info *info;
  	struct shmem_sb_info *sbinfo = SHMEM_SB(sb);
@@ -76,7 +77,7 @@ index 220be9fa2c41..56b50b2b3639 100644
  		inode_init_owner(inode, dir, mode);
  		inode->i_blocks = 0;
  		inode->i_atime = inode->i_mtime = inode->i_ctime = current_time(inode);
-@@ -2286,6 +2294,25 @@ static struct inode *shmem_get_inode(struct super_block *sb, const struct inode
+@@ -2292,6 +2300,25 @@ static struct inode *shmem_get_inode(struct super_block *sb, const struct inode
  			break;
  		}
  
@@ -102,7 +103,7 @@ index 220be9fa2c41..56b50b2b3639 100644
  		lockdep_annotate_inode_mutex_key(inode);
  	} else
  		shmem_free_inode(sb);
-@@ -3291,8 +3318,7 @@ static struct dentry *shmem_get_parent(struct dentry *child)
+@@ -3297,8 +3324,7 @@ static struct dentry *shmem_get_parent(struct dentry *child)
  static int shmem_match(struct inode *ino, void *vfh)
  {
  	__u32 *fh = vfh;
@@ -112,7 +113,7 @@ index 220be9fa2c41..56b50b2b3639 100644
  	return ino->i_ino == inum && fh[0] == ino->i_generation;
  }
  
-@@ -3312,14 +3338,11 @@ static struct dentry *shmem_fh_to_dentry(struct super_block *sb,
+@@ -3318,14 +3344,11 @@ static struct dentry *shmem_fh_to_dentry(struct super_block *sb,
  	struct dentry *dentry = NULL;
  	u64 inum;
  
@@ -130,7 +131,7 @@ index 220be9fa2c41..56b50b2b3639 100644
  	if (inode) {
  		dentry = shmem_find_alias(inode);
  		iput(inode);
-@@ -3331,30 +3354,15 @@ static struct dentry *shmem_fh_to_dentry(struct super_block *sb,
+@@ -3337,30 +3360,15 @@ static struct dentry *shmem_fh_to_dentry(struct super_block *sb,
  static int shmem_encode_fh(struct inode *inode, __u32 *fh, int *len,
  				struct inode *parent)
  {
@@ -164,7 +165,7 @@ index 220be9fa2c41..56b50b2b3639 100644
  	return 1;
  }
  
-@@ -3435,7 +3443,7 @@ static int shmem_parse_one(struct fs_context *fc, struct fs_parameter *param)
+@@ -3441,7 +3449,7 @@ static int shmem_parse_one(struct fs_context *fc, struct fs_parameter *param)
  		break;
  	case Opt_nr_inodes:
  		ctx->inodes = memparse(param->string, &rest);
@@ -173,7 +174,7 @@ index 220be9fa2c41..56b50b2b3639 100644
  			goto bad_value;
  		ctx->seen |= SHMEM_SEEN_INODES;
  		break;
-@@ -3533,7 +3541,7 @@ static int shmem_reconfigure(struct fs_context *fc)
+@@ -3539,7 +3547,7 @@ static int shmem_reconfigure(struct fs_context *fc)
  {
  	struct shmem_options *ctx = fc->fs_private;
  	struct shmem_sb_info *sbinfo = SHMEM_SB(fc->root->d_sb);
@@ -182,7 +183,7 @@ index 220be9fa2c41..56b50b2b3639 100644
  	const char *err;
  
  	spin_lock(&sbinfo->stat_lock);
-@@ -3592,7 +3600,7 @@ static int shmem_show_options(struct seq_file *seq, struct dentry *root)
+@@ -3598,7 +3606,7 @@ static int shmem_show_options(struct seq_file *seq, struct dentry *root)
  		seq_printf(seq, ",size=%luk",
  			sbinfo->max_blocks << (PAGE_SHIFT - 10));
  	if (sbinfo->max_inodes != shmem_default_max_inodes())
@@ -191,7 +192,7 @@ index 220be9fa2c41..56b50b2b3639 100644
  	if (sbinfo->mode != (0777 | S_ISVTX))
  		seq_printf(seq, ",mode=%03ho", sbinfo->mode);
  	if (!uid_eq(sbinfo->uid, GLOBAL_ROOT_UID))
-@@ -3616,6 +3624,8 @@ static void shmem_put_super(struct super_block *sb)
+@@ -3622,6 +3630,8 @@ static void shmem_put_super(struct super_block *sb)
  {
  	struct shmem_sb_info *sbinfo = SHMEM_SB(sb);
  
@@ -200,7 +201,7 @@ index 220be9fa2c41..56b50b2b3639 100644
  	percpu_counter_destroy(&sbinfo->used_blocks);
  	mpol_put(sbinfo->mpol);
  	kfree(sbinfo);
-@@ -3656,6 +3666,8 @@ static int shmem_fill_super(struct super_block *sb, struct fs_context *fc)
+@@ -3662,6 +3672,8 @@ static int shmem_fill_super(struct super_block *sb, struct fs_context *fc)
  #else
  	sb->s_flags |= SB_NOUSER;
  #endif
@@ -209,7 +210,7 @@ index 220be9fa2c41..56b50b2b3639 100644
  	sbinfo->max_blocks = ctx->blocks;
  	sbinfo->free_inodes = sbinfo->max_inodes = ctx->inodes;
  	sbinfo->uid = ctx->uid;
-@@ -3767,6 +3779,15 @@ static void shmem_destroy_inodecache(void)
+@@ -3773,6 +3785,15 @@ static void shmem_destroy_inodecache(void)
  	kmem_cache_destroy(shmem_inode_cachep);
  }
  
@@ -225,7 +226,7 @@ index 220be9fa2c41..56b50b2b3639 100644
  static const struct address_space_operations shmem_aops = {
  	.writepage	= shmem_writepage,
  	.set_page_dirty	= __set_page_dirty_no_writeback,
-@@ -3907,6 +3928,7 @@ int __init shmem_init(void)
+@@ -3913,6 +3934,7 @@ int __init shmem_init(void)
  		pr_err("Could not kern_mount tmpfs\n");
  		goto out1;
  	}
diff --git a/vfs-ino.patch b/vfs-ino.patch
index 75ac43a..b2413b0 100644
--- a/vfs-ino.patch
+++ b/vfs-ino.patch
@@ -1,9 +1,10 @@
 SPDX-License-Identifier: GPL-2.0
+
 diff --git a/fs/inode.c b/fs/inode.c
-index fef457a42882..466c685248c2 100644
+index 96d62d97694e..9f873b4380a4 100644
 --- a/fs/inode.c
 +++ b/fs/inode.c
-@@ -885,6 +885,8 @@ unsigned int get_next_ino(void)
+@@ -892,6 +892,8 @@ unsigned int get_next_ino(void)
  	unsigned int *p = &get_cpu_var(last_ino);
  	unsigned int res = *p;
  
@@ -12,7 +13,7 @@ index fef457a42882..466c685248c2 100644
  #ifdef CONFIG_SMP
  	if (unlikely((res & (LAST_INO_BATCH-1)) == 0)) {
  		static atomic_t shared_last_ino;
-@@ -897,7 +899,7 @@ unsigned int get_next_ino(void)
+@@ -904,7 +906,7 @@ unsigned int get_next_ino(void)
  	res++;
  	/* get_next_ino should not provide a 0 inode number */
  	if (unlikely(!res))
